<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="">
  <link rel="canonical" href="https://ede65566-docs-migration.github.io/docs-site/mule-management-console/3.3/persisting-transaction-data.html">
  <link rel="stylesheet" href="../../_theme/stylesheets/theme.css">
  <title>Persisting Transaction Data // MuleSoft Documentation</title>
</head>
<body class="article">
<header class="header" id="header" role="banner"><div class="header__wrapper clearfix">
      <div class="header__logo--primary-nav clearfix">
        <a href="https://docs.mulesoft.com" title="Home" rel="home" class="header__logo" id="logo">
          <img src="../../_theme/images/mulesoft-dev-logo.svg" alt="Home" class="header__logo-image"></a>
          <div class="header__region region region-header">
    <div id="block-system-main-menu" class="block block-menu first last odd" role="navigation">

        <h2 class="block__title block-title">Main Dev Menu</h2>
    
  <ul class="menu"><li class="menu__item is-expanded first expanded"><span class="menu__link">Platform</span><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="https://developer.mulesoft.com/dev/anypoint-studio" title="" class="menu__link">Studio</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/connectors" title="" class="menu__link">Connectors</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/anypoint-exchange" title="" class="menu__link">Exchange</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/design-api" title="" class="menu__link">API Designer</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/api-developer-portal" title="" class="menu__link">API Portal</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/mule-runtime-engine" title="" class="menu__link">Mule runtime engine</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/api-management" title="" class="menu__link">API Manager</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://developer.mulesoft.com/dev/reporting-api-analytics" title="" class="menu__link">API Analytics</a></li>
</ul></li>
<li class="menu__item is-expanded expanded"><span class="menu__link">Resources</span><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="https://developer.mulesoft.com/getting-started/anypoint-platform" class="menu__link">Getting started</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/tutorials-and-howtos" class="menu__link">Tutorials &amp; HowTos</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/webinars-and-videos" title="" class="menu__link">Webinars &amp; Videos</a></li>
<li class="menu__item is-leaf leaf"><a href="http://s2.developer.mulesoft.com/workshops" class="menu__link">Online Workshops</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/integration-books-and-resources" class="menu__link">Books &amp; Whitepapers</a></li>
<li class="menu__item is-leaf leaf"><a href="https://blogs.mulesoft.com/dev/" class="menu__link">Blog</a></li>
<li class="menu__item is-leaf leaf"><a href="https://docs.mulesoft.com" class="menu__link">Documentation</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://training.mulesoft.com" class="menu__link">Training</a></li>
</ul></li>
<li class="menu__item is-expanded expanded"><a href="https://developer.mulesoft.com/community" class="menu__link">Community</a><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="http://forum.mulesoft.org/" class="menu__link">Forums</a></li>
<li class="menu__item is-leaf leaf"><a href="https://meetups.mulesoft.com" class="menu__link">Meetups</a></li>
<li class="menu__item is-leaf leaf"><a href="http://s2.developer.mulesoft.com/" class="menu__link">Contributed Content</a></li>
<li class="menu__item is-leaf leaf"><a href="https://s2.developer.mulesoft.com/jobs.html" class="menu__link">Jobs</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://www.mulesoft.org/jira/browse/MULE" class="menu__link">Issue tracker</a></li>
</ul></li>
<li class="menu__item is-leaf last leaf"><a href="https://developer.mulesoft.com/champions" class="menu__link">Champions</a></li>
</ul></div>
  </div>
      </div> <!-- header__logo--primary-nav -->
      <div class="header__top-wrapper">
        <div class="header__nav-wrapper">
                      <div class="region region-header-top">
    <div id="block-search-form" class="block block-search first last odd" role="search">

      
  
</div>
  </div>
        </div>
        <div class="top-nav-ctas">
          <a class="icon-muletheme-phone" href="https://mulesoft.com/lp/contact" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-contact');"></a>
          <a href="https://anypoint.mulesoft.com/login/#/signup?apintent=dmc_generic" class="try" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-nav');">Try now</a>
          <a href="https://mulesoft.com/" class="dev" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-mscom');">MuleSoft.com</a>
        </div>
      </div> <!-- header__secondary-nav-search -->
    </div> <!-- header__wrapper -->
    <a href="#sidr" id="open-left" class="closed">
    </a>
  </header><main role="main" class="main-wrapper">
  <div class="navigation-wrapper">
    <nav role="navigation" class="navigation">
      <div class="search">
        <input type="text" placeholder="Search the docs" class="search-input" autocomplete="off" autocorrect="off" autocapitalize="off">
      </div>
      <div class="inner-nav">
          <ul class="nav-lst">
              <li class="nav-itm" data-depth="0" data-state="collapsed">
                  <button class="nav-tgl"></button>
                <a class="nav-lnk" href="index.html">Mule Management Console</a>
                  <ul class="nav-lst">
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="installing-the-management-console.html">Installing the Management Console</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="quick-start-guide-to-mule-esb-server-and-the-management-console.html">Quick Start Guide to Mule ESB Server and the Management Console</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="architecture-of-the-management-console.html">Architecture of the Management Console</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="how-to-use-the-management-console.html">How to Use the Management Console</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="working-with-mule-server-instances.html">Working with Mule Server Instances</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="setting-up-users.html">Setting Up Users</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="managing-users-and-roles.html">Managing Users and Roles</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="monitoring-a-server.html">Monitoring a Server</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="monitoring-applications.html">Monitoring Applications</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="viewing-server-alerts.html">Viewing Server Alerts</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="viewing-system-memory.html">Viewing System Memory</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="viewing-threads.html">Viewing Threads</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="viewing-server-pools.html">Viewing Server Pools</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="working-with-the-server-configuration-files.html">Working with the Server Configuration Files</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="viewing-server-properties.html">Viewing Server Properties</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="viewing-server-os-resources.html">Viewing Server OS Resources</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="viewing-jmx-information.html">Viewing JMX Information</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="editing-server-settings.html">Editing Server Settings</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="customizing-server-metrics-dashboard.html">Customizing Server Metrics Dashboard</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="troubleshooting-tips.html">Troubleshooting Tips</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="monitoring-and-debugging-applications.html">Monitoring and Debugging Applications</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="tracking-flows.html">Tracking Flows</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="analyzing-message-flows.html">Analyzing Message Flows</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="debugging-message-processing.html">Debugging Message Processing</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="debugging-the-loan-broker-example-application.html">Debugging the Loan Broker Example Application</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="adding-and-managing-alerts-and-slas.html">Adding and Managing Alerts and SLAs</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="how-to-run-the-management-console.html">How to Run the Management Console</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="persisting-environment-data.html">Persisting Environment Data</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="persisting-transaction-data.html">Persisting Transaction Data</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="enabling-ldap-authentication.html">Enabling LDAP Authentication</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="defining-slas-and-alerts.html">Defining SLAs and Alerts</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="analyzing-business-events.html">Analyzing Business Events</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="tracking-and-querying-business-events.html">Tracking and Querying Business Events</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="business-events-use-cases.html">Business Events Use Cases</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="common-tasks.html">Common Tasks</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="managing-mule-high-availability-ha-clusters.html">Managing Mule High Availability (HA) Clusters</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="creating-or-disbanding-a-cluster.html">Creating or Disbanding a Cluster</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="configuring-mule-ha-clustering.html">Configuring Mule HA Clustering</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="deploying-redeploying-or-undeploying-an-application-to-or-from-a-cluster.html">Deploying, Redeploying, or Undeploying an Application To or From a Cluster</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="monitoring-a-cluster.html">Monitoring a Cluster</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="using-the-management-console-api.html">Using the Management Console API</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="setting-up-alert-destinations-and-notifications.html">Setting Up Alert Destinations and Notifications</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="working-with-logs.html">Working with Logs</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="accessing-server-logs.html">Accessing Server Logs</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="audit-logs.html">Audit Logs</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="automating-tasks-using-scripts.html">Automating Tasks Using Scripts</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="scripting-examples.html">Scripting Examples</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="customizing-the-dashboard.html">Customizing the Dashboard</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="using-the-management-console-for-performance-tuning.html">Using the Management Console for Performance Tuning</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="working-with-alerts.html">Working With Alerts</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="deploying-applications.html">Deploying Applications</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="working-with-flows.html">Working with Flows</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="maintaining-the-server-application-repository.html">Maintaining the Server Application Repository</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="analyzing-flow-processing-and-payloads.html">Analyzing Flow Processing and Payloads</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="rest-api-reference.html">REST API Reference</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="clusters.html">Clusters</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="repository-of-applications.html">Repository of Applications</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="server-groups.html">Server Groups</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="servers.html">Servers</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="user-groups.html">User Groups</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="deployments.html">Deployments</a>
                              </li>
                          </ul>
                      </li>
                  </ul>
              </li>
          </ul>
      </div>
    </nav>
  </div>
  <article class="primary-content">
    <header class="article-header">
      <div class="breadcrumb">
        <strong class="breadcrumb-item">[ Domain Selector Placeholder ]</strong> /
        <span class="breadcrumb-item">Persisting Transaction Data</span>
      </div>
      <div class="edit-on-github">
        <a href="https://github.com/ede65566-docs-migration/mule-management-console-docs/edit/v3.3/modules/ROOT/content/persisting-transaction-data.adoc" class="edit-on-github-link">Edit on Github</a>
      </div>
    </header>
    <h1>Persisting Transaction Data</h1>
    <div class="sect1">
<h2 id="overview"><a class="anchor" href="#overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, Mule stores transaction data using <a href="../../mule-runtime/3.3/mule-configuration/business-events.html">Business Events</a>. In this configuration, the data is stored on a local H2 database. For business-class deployments, however, it is advisable to store transaction data on an external database, both for improved performance and to aid in disaster recovery.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Do not confuse Business Events with persistent MMC state information. They are two independent systems, not related to each other.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
It is also possible to use an external database to store persistent MMC state information. Click <a href="persisting-environment-data.html">here</a> for details.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Storing information about Mule&#8217;s current state of operations on an external database can facilitate disaster recovery in two different types of scenarios:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mule <em>transaction-level</em> failures: Failure to complete the obligatory sequence of message processing events for a single message.</p>
</li>
<li>
<p>Mule <em>system-level</em> failures: Failure of the entire Mule system.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This document covers basic approaches to configuring the database Mule ESB can use to persist transactions and corresponding events. Two database servers are supported: <a href="#">Oracle</a> and <a href="#">PostgreSQL</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="oracle"><a class="anchor" href="#oracle"></a>Oracle</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following examples use Oracle Database Express Edition 11.*.. The installation outline is basic: the database server is installed on the local machine, listing on the default port with security deactivated (unsecured connection to the database).</p>
</div>
<div class="sect2">
<h3 id="tools"><a class="anchor" href="#tools"></a>Tools</h3>
<div class="ulist">
<ul>
<li>
<p>SQL Developer 3.0.04:</p>
<div class="ulist">
<ul>
<li>
<p>Download the latest version <a href="http://www.oracle.com/technetwork/developer-tools/sql-developer/downloads/index.html">here</a></p>
</li>
<li>
<p>Consult the installation guide for Linux and Windows <a href="http://docs.oracle.com/cd/E25259_01/doc.31/e26419/toc.htm">here</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Oracle Database Expression Edition 11.x:</p>
<div class="ulist">
<ul>
<li>
<p>Download the latest version <a href="http://www.oracle.com/technetwork/products/express-edition/downloads/index.html">here</a></p>
</li>
<li>
<p>Consult the Installation guides for Linux and Windows <a href="http://docs.oracle.com/cd/E17781_01/index.htm">here</a></p>
</li>
<li>
<p>The full documentation library is <a href="http://www.oracle.com/pls/db112/homepage">here</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Important</strong></p>
</div>
<div class="paragraph">
<p>Do not attempt to run SQL Developer with JDK 1.7.. <strong>Even though the SQL installation guide lists “JDK 1.6.11 or later” as suitable for installation, attempting to run SQL Developer with JDK 1.7.</strong> results in a warning message and malformed SQL code from SQL Developer.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="installing-sql-developer"><a class="anchor" href="#installing-sql-developer"></a>Installing SQL Developer</h3>
<div class="paragraph">
<p>Follow the simple instructions provided by the documentation listed above to decompress the installer and run the executable for SQL Developer.</p>
</div>
</div>
<div class="sect2">
<h3 id="installing-oracle-express"><a class="anchor" href="#installing-oracle-express"></a>Installing Oracle Express</h3>
<div class="paragraph">
<p>Oracle Express provides a straightforward graphical installer for Windows or an <code>.rpm</code> package for Linux. Simply follow the instructions provided by the documentation listed above.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Both Windows and Linux require you to have administrator privileges to install Oracle Express.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="configuration-files"><a class="anchor" href="#configuration-files"></a>Configuration Files</h3>
<div class="paragraph">
<p>The files <code>listener.ora</code> and <code>tnsnames.ora</code> are automatically generated during installation.</p>
</div>
<div class="paragraph">
<p>For Linux, these files typically reside at: <code>/u01/app/oracle/product/11.2.0/xe/network/admin</code></p>
</div>
<div class="paragraph">
<p>On Windows, <code>listener.ora</code> and <code>tnsnames.ora</code> typically reside at: <code>C:\oraclexe\app\oracle\product\11.2.0\server\network\admin</code></p>
</div>
<div class="listingblock">
<div class="title"><code>listener.ora</code> listing</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text"># listener.ora Network Configuration File:
SID_LIST_LISTENER =
    (SID_LIST =
        (SID_DESC =
             (SID_NAME = PLSExtProc)
             (ORACLE_HOME = /u01/app/oracle/product/11.2.0/xe)
             (PROGRAM = extproc)
         )
    (SID_DESC =
        (SID_NAME = CLRExtProc)
        (ORACLE_HOME = /u01/app/oracle/product/11.2.0/xe)
        (PROGRAM = extproc)
    )
    (SID_DESC =
        (SID_NAME = XE)
        (ORACLE_HOME = /u01/app/oracle/product/11.2.0/xe)
    )
)

LISTENER =
    (DESCRIPTION_LIST =
        (DESCRIPTION =
            (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))
            (ADDRESS = (PROTOCOL = TCP)(HOST = 0.0.0.0)(PORT = 1521))
        )
    )

DEFAULT_SERVICE_LISTENER = (XE)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">listing or <code>tnsnames.ora</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text"># tnsnames.ora Network Configuration File:

XE =
    (DESCRIPTION =
        (ADDRESS = (PROTOCOL = TCP)(HOST = 0.0.0.0)(PORT = 1521))
        (CONNECT_DATA =
            (SERVER = DEDICATED)
            (SERVICE_NAME = XE)
        )
    )

EXTPROC_CONNECTION_DATA =
    (DESCRIPTION =
        (ADDRESS_LIST =
            (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))
        )
    (CONNECT_DATA =
        (SID = PLSExtProc)
        (PRESENTATION = RO)
    )
)

ORACLR_CONNECTION_DATA =
    (DESCRIPTION =
        (ADDRESS_LIST =
           (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))
     )
    (CONNECT_DATA =
        (SID = CLRExtProc)
        (PRESENTATION = RO)
    )
)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>HOST</code> value, MuleSoft recommends a static IP address (for example, <code>192.168.1.10</code>), or the 0.0.0.0 address. MuleSoft further recommends against using <code>localhost</code> or a hostname for <code>HOST</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Please be aware that, if the file <code>slqnet.ora</code> exists (usually in <code>/app/oracle/product/11.2.0/xe/network/admin</code>), it may contain some options which have been known to cause problems. For example, unless you are fine-tuning the database, you should disable NFS security integration with <code>SQLNET.AUTHENTICATION_SERVICES = (NONE)</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="creating-the-database-user"><a class="anchor" href="#creating-the-database-user"></a>Creating the Database User</h3>
<div class="paragraph">
<p>To use the SQL Developer GUI to create the database user, complete the following tasks:</p>
</div>
<div class="sect3">
<h4 id="launch-the-sql-developer"><a class="anchor" href="#launch-the-sql-developer"></a>Launch the SQL Developer</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to <code>&lt;sqldeveloper install&gt;/sqldeveloper</code></p>
<div class="ulist">
<ul>
<li>
<p>On Linux and Mac OS X, run the <code>sqldeveloper.sh</code> shell script</p>
</li>
<li>
<p>On Windows, launch <code>sqldeveloper.exe</code></p>
<div class="paragraph">
<p>If SQL developer asks for the full Java path, enter the full path (or navigate to it if you are using a GUI). Typical Java paths are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Linux: <code>/usr/java/jdk1.6.0_31/bin/java</code></p>
</li>
<li>
<p>Windows: ` C:\Program Files\Java\jdk1.6.0_06\bin\java.exe`</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="creating-a-new-database-connection"><a class="anchor" href="#creating-a-new-database-connection"></a>Creating a New Database Connection</h4>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click the <strong>Connections</strong> tab in the left-hand pane, right-click <strong>Connections</strong>, then selecting <strong>New Connection</strong> to display the <code>New / Select Database connection</code> dialog box.</p>
</li>
<li>
<p>In the connection <strong>Name</strong> field, enter: <code>mmc_persistency_tracking</code></p>
</li>
<li>
<p>In the <strong>Username</strong> field, enter: <code>SYSTEM</code></p>
</li>
<li>
<p>In the <strong>Password</strong> field, enter the <code>SYSTEM</code> password that you issued during the Oracle Express installation process.</p>
</li>
<li>
<p>In the <strong>Hostname</strong> field, ensure that the hostname is correct. (It will be localhost, if Oracle is installed on the local machine.)</p>
</li>
<li>
<p>In the <strong>SID</strong> field, enter <code>xe</code></p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="verify-and-save-the-connection"><a class="anchor" href="#verify-and-save-the-connection"></a>Verify and Save the Connection</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click <strong>Test</strong> to verify the connection. After testing, verify that <code>Status : Success</code> appears near the bottom of the dialog box.</p>
</li>
<li>
<p>Click <strong>Save</strong> to save the connection settings you have specified.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="configuring-the-connection"><a class="anchor" href="#configuring-the-connection"></a>Configuring the Connection</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click <strong>Connect</strong>, then click <strong>+</strong> next to the name of your connection on the <strong>Connections</strong> tab to expand the connection elements menu.</p>
</li>
<li>
<p>Right-click <strong>Other Users</strong>, then select <strong>Create User</strong> to display the <strong>New/Edit User</strong> dialog box.</p>
</li>
<li>
<p>Complete the filed with the required information. The following provide sample guidance:</p>
<div class="ulist">
<ul>
<li>
<p>User Name: <code>TRACKER</code></p>
</li>
<li>
<p>New Password: <code>tracker</code></p>
</li>
<li>
<p>Default Tablespace: <code>USERS</code></p>
</li>
<li>
<p>Temporary Tablespace: <code>TEMP</code></p>
</li>
<li>
<p>Roles tab: <code>RESOURCE, CONNECT</code></p>
</li>
<li>
<p>System Privileges tab: <code>CREATE ANY CONTEXT, CREATE ANY TABLE, CREATE ANY SEQUENCE</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Apply</strong>, then click <strong>Close</strong>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="determining-database-quota"><a class="anchor" href="#determining-database-quota"></a>Determining Database Quota</h3>
<div class="paragraph">
<p>Database size will, of course, vary greatly depending on usage, and the database quota should be determined while taking into account the actual usage on the environment. One way to do this is by performing load tests and extrapolating the results to actual usage over a period of time.</p>
</div>
<div class="paragraph">
<p>To determine the actual size of the database, launch Oracle&#8217;s <code>sqlplus</code> utility (see <a href="#">below</a>) and run the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">select sum(bytes) from user_segments;</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>details on using the <code>sqlplus</code> utility to run commands</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Access the Oracle Express menu by completing one of the following steps, depending on your operating system:</p>
<div class="ulist">
<ul>
<li>
<p>On Windows: From the Windows Start menu: To open the <code><strong>sqlplus</strong></code> command prompt, navigate to <strong>Programs (or All Programs) &gt; Oracle Database Express 11g Edition &gt; , Run SQL Command Line</strong>.</p>
</li>
<li>
<p>On Linux: Open the appropriate menu (A*pplications* in Gnome, or the <strong>K</strong> menu in KDE), and select <strong>Oracle Database 11g Express Edition</strong>, then select <strong>Run SQL Command Line</strong>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>After the <code>sqlplus</code> command prompt opens, type: connect <code>TRACKER/tracker@XE</code> (in this example,<code>TRACKER</code> is the user and <code>tracker</code> is password)</p>
</li>
<li>
<p>Run the command select sum(bytes) from user segments`;</p>
</li>
<li>
<p>To exit <code>sqlplus</code>, type: <code>exit</code></p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For detailed information about the <code>sqlplus</code> command, consult the <a href="http://docs.oracle.com/cd/E11882_01/server.112/e16604/qstart.htm#SQPUG002">SQL*Plus Reference Guide</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Output should be similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">SQL&gt; connect TRACKER/tracker@XE
Connected.
SQL&gt; select sum(bytes) from user_segments;

SUM(BYTES)
----------
   5832704

SQL&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This indicates that the current database size is 5.83 MB.</p>
</div>
</div>
<div class="sect2">
<h3 id="sample-test-results-for-database-quota"><a class="anchor" href="#sample-test-results-for-database-quota"></a>Sample Test Results for Database Quota</h3>
<div class="paragraph">
<p><strong>Test configuration</strong>: Agent running on Mule ESB 3.3, on Red Hat Enterprise Linux 6.1 64 bits. For this test, the <code>Echo</code> app in Mule was deployed on the same server.</p>
</div>
<div class="paragraph">
<p>Database tests were performed using <a href="http://jmeter.apache.org/">JMeter</a>, an Open Source Java desktop application to perform server load testing, developed by the Apache Software Foundation. JMeter can be downloaded <a href="http://jmeter.apache.org/download_jmeter.cgi">here</a>. Be sure to check the User Manual <a href="http://jmeter.apache.org/usermanual/index.html">here</a>.</p>
</div>
<div class="paragraph">
<p>On these tests, JMeter was used to generate calls to Mule&#8217;s Echo app, which is provided as part of Mule&#8217;s example applications bundle. Each call to the Echo app generates eight events: two fixed events, two custom events, and two message processors with two events each.</p>
</div>
<div class="paragraph">
<p>JMeter was configured to simulate 20 connections with a ramp-up of five seconds in an infinite loop, running for a specific time.</p>
</div>
<div class="paragraph">
<p>After a single call, the total storage added to the database was 1.625 MB (including database metadata). The following table lists number of transactions and database size at different time marks:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20.202%;">
<col style="width: 26.2626%;">
<col style="width: 26.2626%;">
<col style="width: 27.2728%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Load testing time</th>
<th class="tableblock halign-left valign-top">Cumulative Total Size</th>
<th class="tableblock halign-left valign-top">JMeter transactions</th>
<th class="tableblock halign-left valign-top">Cumalitive JMeter transactions</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 h</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">701.25MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2,302,691</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2,302,692</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 hs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2351.25 MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4,710,680</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7,013,372</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3 hs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4577.25 MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5,960,692</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12,974,064</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="configuring-the-console"><a class="anchor" href="#configuring-the-console"></a>Configuring the Console</h3>
<div class="sect3">
<h4 id="install-the-database-driver"><a class="anchor" href="#install-the-database-driver"></a>Install the Database Driver</h4>
<div class="paragraph">
<p>The driver is <code>ojdbc5.jar</code>. You can download it <a href="http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html">here</a> or from our <a href="http://corp.wiki.mulesource.com/display/MULEDEV/Drivers">internal Drivers page</a>.</p>
</div>
<div class="paragraph">
<p>Copy <code>ojdbc5.jar</code> to the folder <code>&lt;Mule install path&gt;/apps/mmc/webapps/mmc/WEB-INF/lib/</code></p>
</div>
</div>
<div class="sect3">
<h4 id="database-specific-configuration"><a class="anchor" href="#database-specific-configuration"></a>Database Specific Configuration</h4>
<div class="paragraph">
<p>Go to one of the following directories:</p>
</div>
<div class="paragraph">
<p>If running MMC on Tomcat: <code>webapps/mmc/WEB-INF/classes/META-INF/</code></p>
</div>
<div class="paragraph">
<p>If running MMC on Mule ESB: <code>&lt;Mule install path&gt;/apps/mmc/webapps/mmc/WEB-INF/classes/META-INF/</code></p>
</div>
<div class="paragraph">
<p>Locate the file <code>persistence.xml</code>. Open it with a text editor, and find the following line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;property name="openjpa.jdbc.DBDictionary" value="batchLimit=-1" /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace the line with the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;property name="openjpa.jdbc.DBDictionary" value="oracle(DriverVendor=oracle)}" /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Locate the file <code>applicationContext-tracking.xml</code> and open it with a text editor. Redefine the beans <code>dataSource</code>, <code>jpavendorAdapter</code> and <code>entityManagerFactory</code>, as listed below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource"&gt;
    &lt;property name="driverClassName" value="oracle.jdbc.driver.OracleDriver" /&gt;
    &lt;property name="url" value="jdbc:oracle:thin:@127.0.0.1:1521:xe" /&gt;
    &lt;property name="username" value="TRACKER" /&gt;
    &lt;property name="password" value="tracker" /&gt;
&lt;/bean&gt;

&lt;tx:annotation-driven transaction-manager="transactionManager" /&gt;

&lt;bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager"&gt;
    &lt;property name="entityManagerFactory" ref="entityManagerFactory" /&gt;
&lt;/bean&gt;

&lt;bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"&gt;
    &lt;property name="dataSource" ref="dataSource" /&gt;
    &lt;property name="persistenceUnitName" value="persistence-unit" /&gt;

    &lt;property name="jpaVendorAdapter"&gt;
        &lt;bean id="jpaAdapter" class="org.springframework.orm.jpa.vendor.OpenJpaVendorAdapter" &gt;
            &lt;property name="database" value="ORACLE"/&gt;
            &lt;property name="showSql" value="true"/&gt;
        &lt;/bean&gt;
    &lt;/property&gt;

    &lt;property name="loadTimeWeaver"&gt;
        &lt;bean class="com.mulesoft.mmc.tracking.repository.jpa.OpenJPALoadTimeWeaver" /&gt;
    &lt;/property&gt;
&lt;/bean&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the output above, notice that the configuration specifies a database listening on localhost (IP <code>127.0.0.1</code>), on the default port for Oracle (1521). This is defined in the line <code>&lt;property name="url" value="jdbc:oracle:thin:@127.0.0.1:1521:xe" /&gt;</code></p>
</div>
<div class="paragraph">
<p>Also, the specified SID (<code>TRACKER</code>) and password (<code>tracker</code>) are the same as those specified on the first part of this document.</p>
</div>
</div>
<div class="sect3">
<h4 id="known-limitations"><a class="anchor" href="#known-limitations"></a>Known Limitations</h4>
<div class="paragraph">
<p>On <code>persistence.xml</code> the following property is set:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;property name="openjpa.jdbc.SynchronizeMappings" value="buildSchema(SchemaAction=add)" /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This specifies that new tables will be added as needed, but if an essential change is done, the older tables will not be removed, which may be cause for conflicts.</p>
</div>
<div class="paragraph">
<p>Using <code>SchemaAction=refresh</code> instead of <code>SchemaAction=add</code> in the above line will solve this problem, but will produce <code>ORA-01031</code> Not enough privileges exceptions. This is caused by the system trying to drop everything that it does not directly use, including sequences on the XDB and SYS schemas, which are reserved by Oracle.</p>
</div>
</div>
<div class="sect3">
<h4 id="troubleshooting-tips"><a class="anchor" href="#troubleshooting-tips"></a>Troubleshooting Tips</h4>
<div class="paragraph">
<p>Error message: <code>ORA-12519, TNS:no appropriate service handler found</code></p>
</div>
<div class="paragraph">
<p>If you get this error message, you will need to run the SQL command provided below, then restart the TNS listener.</p>
</div>
<div class="paragraph">
<p>As user SYS, run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">ALTER SYSTEM SET PROCESSES=150 SCOPE=SPFILE;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To run the SQL command, you can use the <code>sqlplus</code> utility, as explained above.</p>
</div>
<div class="paragraph">
<p>To restart your TNS listener:</p>
</div>
<div class="paragraph">
<p>On Windows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in as the user who installed Oracle Database Express and open a DOS terminal.</p>
</li>
<li>
<p>To check the status of the TNS Listener, run the following command: <code>LSNRCTL STATUS</code></p>
</li>
<li>
<p>To stop the TNS Listener, run <code>LSNRCTL STOP</code></p>
</li>
<li>
<p>To start the TNS Listener, run <code>LSNRCTL START</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>On Unix/Linux:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to the oracle system user, for example by running the command <code>su - oracle</code>.</p>
</li>
<li>
<p>Set the appropriate environment variables:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Navigate to the bin directory of the Oracle installation (typically, /<code>u01/app/oracle/product/11.2.0/xe/bin</code></p>
</li>
<li>
<p>Run the command source <code>oracle_env.sh</code></p>
</li>
</ol>
</div>
</li>
<li>
<p>After setting environment variables, check the TNS listener status by running <code>lsnrctl</code> status</p>
</li>
<li>
<p>To stop the TNS listener, run <code>lsnrctl stop</code></p>
</li>
<li>
<p>To start the TNS listener, run <code>lsnrctl start</code></p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="postgresql"><a class="anchor" href="#postgresql"></a>PostgreSQL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following tutorial covers a simple setup for MMC to work with a Postgres database. The Postgres installation outlined here is basic: the database is installed on the local machine on the default port, with security deactivated (unsecured connection to the database, user with full admin rights).</p>
</div>
<div class="sect2">
<h3 id="tools-2"><a class="anchor" href="#tools-2"></a>Tools</h3>
<div class="ulist">
<ul>
<li>
<p>PostgreSQL 9.1.3 (download it here)</p>
</li>
<li>
<p>pgAdmin III (select it when installing Postgres)</p>
</li>
<li>
<p>Postgres JDBC driver: postgresql-9.1-901.jdbc4.jar. Select it at installation time or download it from our internal Drivers page</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="installing-the-database"><a class="anchor" href="#installing-the-database"></a>Installing the Database</h3>
<div class="paragraph">
<p>The easiest way to install the database is by using the Enterprise One-Click installer, which you can download here.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You need administrator privileges on your machine for the installation to proceed.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Quick Postgres tutorials for Linux, Mac OS X and Windows can be found here.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Version 9.1 installs with the following default values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Default port: <code>5432</code></p>
</li>
<li>
<p>Default admin user: <code>postgres</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Mule recommends installing one of Postgres’s GUI administration utilities, such as phpPdAdmin (Web-based) or pgAdmin III. These can be selected for installation during the Postgres installation process. In this document, we will use pgAdmin III.</p>
</div>
<div class="sect3">
<h4 id="setting-up-the-database-listener"><a class="anchor" href="#setting-up-the-database-listener"></a>Setting Up the Database Listener</h4>
<div class="paragraph">
<p>Locate the file postgresql.conf, which is in the data directory of the Postgres installation, for example: /opt/PostgreSQL/9.1/data/postgresql.conf</p>
</div>
<div class="paragraph">
<p>In the postgresql.conf file, go to the "Connections and Authentication" section. Locate the line that begins with: Listen_addresses =. If the line reads: listen_addresses = 'localhost', then modify it to read as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">listen_addresses = '*'</code></pre>
</div>
</div>
<div class="paragraph">
<p>This ill make PostgreSQL listen on all of the available interfaces.</p>
</div>
<div class="paragraph">
<p>Locate the file pg_hba.conf, which is also in the data directory of the Postgres installation. In this file, find the line that begins with: host all. It will probably look similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">host    all             all             127.0.0.1/32            md5</code></pre>
</div>
</div>
<div class="paragraph">
<p>Change it to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">host    all             all             0.0.0.0/0       trust</code></pre>
</div>
</div>
<div class="paragraph">
<p>This ensures that Postgres accepts all attempts to connect from any host, without asking for an encrypted password.</p>
</div>
<div class="paragraph">
<p>For a detailed description of the <code>pg_hba.conf</code> file, click <a href="http://developer.postgresql.org/pgdocs/postgres/auth-pg-hba-conf.html">here</a>.</p>
</div>
<div class="paragraph">
<p>After setting up the listener, the database must be restarted. To do this, open a terminal window (Unix terminal or DOS prompt) and use the <code>pg_ctl</code> command.</p>
</div>
<div class="paragraph">
<p>To verify the state of the PostgreSQL server, run <code>pg_ctl status</code></p>
</div>
<div class="paragraph">
<p>To restart the PostgreSQL server, run <code>pg_ctl restart</code></p>
</div>
<div class="paragraph">
<p>Click for instructions on running pg_ctl on Unix or Linux systems</p>
</div>
<div class="paragraph">
<p>When running pg_ctl status, it is possible that you may get the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">pg_ctl: no database directory specified and environment variable PGDATA unset
Try "pg_ctl --help" for more information.</code></pre>
</div>
</div>
<div class="paragraph">
<p>In that case, issue the command with the following options <code>pg_ctl status -D &lt;Postgres data directory&gt;</code></p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">pg_ctl status -D /opt/PostgreSQL/9.1/data</code></pre>
</div>
</div>
<div class="paragraph">
<p>The same is valid for the <code>restart</code> option of the <code>pg_ctl</code> command. For example, to restart the PostgreSQL server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">pg_ctl restart -D /opt/PostgreSQL/9.1/data</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="creating-the-database-user-2"><a class="anchor" href="#creating-the-database-user-2"></a>Creating the Database User</h4>
<div class="paragraph">
<p>We will create user with the the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Role name: TRACKER</p>
</li>
<li>
<p>Password: tracker</p>
</li>
<li>
<p>Permissions:</p>
<div class="ulist">
<ul>
<li>
<p>Can login</p>
</li>
<li>
<p>Inherit rights from parent roles</p>
</li>
<li>
<p>Can create database objects</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>To create the user with pgAdmin III, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Launch pgAdmin III and login to the database server as user postgres by using pgAdmin III’s object browser (located on the right-hand pane) to right-click server PostgreSQL on localhost, then select Connect.</p>
</li>
<li>
<p>On the Object Browser, right-click Login Roles, then select New Login Role.</p>
</li>
<li>
<p>At the New Login Role dialog box, type TRACKER in the Role name field.</p>
</li>
<li>
<p>Go to the Definition tab in the dialog box, and type the password tracker in both Password fields.</p>
</li>
<li>
<p>In the Role Privileges tab, select all the checkboxes.</p>
</li>
<li>
<p>Click OK to close the New Login Role dialog box.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="creating-a-new-database"><a class="anchor" href="#creating-a-new-database"></a>Creating a New Database</h3>
<div class="paragraph">
<p>We will create a database called <code>mmc_persistency_tracking</code>, owned by user <code>TRACKER</code></p>
</div>
<div class="sect3">
<h4 id="using-pgadmin-iii"><a class="anchor" href="#using-pgadmin-iii"></a>Using pgAdmin III:</h4>
<div class="paragraph">
<p>Complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Using the Object Browser, navigate to Databases &gt; New Database.</p>
</li>
<li>
<p>In the dialog box, type mmc_persistency_tracking in the Name field.</p>
</li>
<li>
<p>In the Owner field, select TRACKER</p>
</li>
<li>
<p>In the Definition tab, ensure that Encoding is set to UTF8</p>
</li>
<li>
<p>Click OK to close the New Database dialog box.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="verifying-the-new-database"><a class="anchor" href="#verifying-the-new-database"></a>Verifying the New Database</h3>
<div class="paragraph">
<p>Use PostgreSQL’s psql command-line utility to log in to database mmc_persistency_tracking as user TRACKER. To do this, open a terminal and run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">psql postgres –UTRACKER</code></pre>
</div>
</div>
<div class="paragraph">
<p>Click to view how to run the psql command</p>
</div>
<div class="paragraph">
<p>When you run this command, psql should prompt for the user’s password. After typing it, you should get a prompt similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">mmc_persistency_tracking=#</code></pre>
</div>
</div>
<div class="paragraph">
<p>This indicates that you have successfully connected to the mmc_persistency_tracking database as user TRACKER.</p>
</div>
<div class="paragraph">
<p>An example of the full login command and output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">mitra:/opt/PostgreSQL/9.1/bin$ ./psql mmc_persistency_tracking -UTRACKER
Password for user TRACKER:
psql.bin (9.1.3)
Type "help" for help.
mmc_persistency_tracking=#</code></pre>
</div>
</div>
<div class="paragraph">
<p>To exit psql, type \q the press Enter</p>
</div>
</div>
<div class="sect2">
<h3 id="configure-the-console"><a class="anchor" href="#configure-the-console"></a>Configure the Console</h3>
<div class="sect3">
<h4 id="installing-the-database-driver"><a class="anchor" href="#installing-the-database-driver"></a>Installing the Database Driver</h4>
<div class="sect4">
<h5 id="mule-driver"><a class="anchor" href="#mule-driver"></a>Mule Driver</h5>
<div class="paragraph">
<p>Copy the Postgres jdbc driver, <code>postgresql-9.1-901.jdbc3.jar</code>, to the following directory: <code>&lt;Mule install path&gt;/apps/mmc/webapps/mmc/WEB-INF/lib</code></p>
</div>
<div class="paragraph">
<p>Or make it generally available by copying it to: <code>&lt;Mule install path&gt;/lib/user</code></p>
</div>
</div>
<div class="sect4">
<h5 id="web-container-driver"><a class="anchor" href="#web-container-driver"></a>Web Container Driver</h5>
<div class="paragraph">
<p>Copy the Postgres jdbc driver, <code>postgresql-9.1-901.jdbc3.jar</code>, to the following directory: <code>&lt;Mule install path&gt;/mmc/webapps/mmc/WEB-INF/lib</code></p>
</div>
</div>
<div class="sect4">
<h5 id="database-specific-configuration-2"><a class="anchor" href="#database-specific-configuration-2"></a>Database-specific Configuration</h5>
<div class="paragraph">
<p>Go to one of the following directories:</p>
</div>
<div class="paragraph">
<p>If running MMC on Tomcat: <code>webapps/mmc/WEB-INF/classes/META-INF/</code></p>
</div>
<div class="paragraph">
<p>If running MMC on Mule ESB: <code>&lt;Mule install path&gt;/apps/mmc/webapps/mmc/WEB-INF/classes/META-INF/</code></p>
</div>
<div class="paragraph">
<p>Locate the file <code>persistence.xml</code>. Open it with a text editor, and find the following line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;property name="openjpa.jdbc.DBDictionary" value="batchLimit=-1" /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace the line with the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;property name="openjpa.jdbc.DBDictionary" value="*postgres*" /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Locate the file applicationContext-tracking.xml and open it with a text editor. Redefine the beans dataSource and jpaAdapter as listed below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;bean id="dataSource"  class="org.springframework.jdbc.datasource.DriverManagerDataSource"&gt;
    &lt;property name="driverClassName" value="org.postgresql.Driver" /&gt;
    &lt;property name="url" value="jdbc:postgresql://172.16.20.78:5432/persistency" /&gt;
    &lt;property name="username" value="TRACKER"/&gt;
    &lt;property name="password" value="tracker"/&gt;
&lt;/bean&gt;

[...]

&lt;bean id="jpaAdapter" &gt;
    &lt;property name="database" value="POSTGRESQL"/&gt;
    &lt;property name="showSql" value="true"/&gt;
&lt;/bean&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="troubleshooting-tips-2"><a class="anchor" href="#troubleshooting-tips-2"></a>Troubleshooting Tips</h3>
<div class="paragraph">
<p>If you have installed the database on a remote host and experience problems, ensure that network connectivity to the database is working. Open a terminal (Unix or DOS) and run: telnet &lt;host&gt; &lt;port&gt;</p>
</div>
<div class="paragraph">
<p>Output should be similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">mitra:~$ telnet dbserver 5432
Trying ::1...
Connected to dbserver.
Escape character is '^]'.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above output indicates a successful connection to host dbserver on port 5432. A “connection refused” error indicates that nothing is listening on the specified host and port. Any other output often indicates a connectivity problem, such as a firewall blocking requests to the specified port.</p>
</div>
</div>
</div>
</div>
  </article>
</main>
<footer class="footer"><div class="footer__wrapper">
      <div class="footer__top">
              </div>
      <div class="footer-bottom-wrapper">
        <!--<a href="/" title="Home" rel="home" class="header__logo" id="logo"><img src="/sites/all/themes/muletheme/images/mule_logo.svg" alt="Home" class="header__logo-image" /></a>-->
        <div class="connect-footer">
          <p>Sign up for our Dev newsletter</p>
          <div class="connect-footer">

</div>
  </div>
        <div class="terms-conditions temp">
          <div id="block-menu-menu-footer-bottom-menu" class="block block-menu contextual-links-region first last odd" role="navigation">
            <ul class="menu"><li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/" class="menu__link">MuleSoft.com</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://blogs.mulesoft.com/" class="menu__link">Blog</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/content/terms-service" class="menu__link">Terms</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/privacy-policy" class="menu__link">Privacy</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/contact" class="menu__link">Contact</a></li>
            </ul></div>
                    <div class="default-terms-conditions">
          </div>
          MuleSoft provides a widely used <a href="https://www.mulesoft.com/platform/enterprise-integration">integration platform</a> for connecting SaaS and enterprise applications in the cloud and on-premise. Delivered as a unified integration experience, <a href="https://www.mulesoft.com/platform/saas/cloudhub-ipaas-cloud-based-integration">CloudHub&trade;</a> and <a href="https://www.mulesoft.com/platform/soa/mule-esb-open-source-esb">Mule ESB&trade;</a> (Enterprise Service Bus) are built on proven open source technology for fast and reliable on-premise and cloud integration without vendor lock-in.


        </div>
      </div>
      <div class="footer-end">
        <div class="footer-logo-wrapper">
          <a href="https://developer.mulesoft.com/" class="footer-logo"></a>
        </div>
        <ul class="social-links"><li><a href="https://www.mulesoft.com/lp/contact" target="_blank" class="icon-muletheme-phone"></a></li>
          <li><a href="https://www.linkedin.com/company/mulesoft" target="_blank" class="icon-muletheme-linkedin"></a></li>
          <li><a href="https://twitter.com/muledev" target="_blank" class="icon-muletheme-twitter"></a></li>
          <li><a href="https://www.facebook.com/MuleSoft" target="_blank" class="icon-muletheme-facebook"></a></li>
          <li><a href="mailto:info@mulesoft.com" target="_blank" class="icon-muletheme-email"></a></li>
          <li><a href="https://videos.mulesoft.com/" target="_blank" class="icon-muletheme-youtube"></a></li>
        </ul><p class="copyright"><span>&copy;2017</span> MuleSoft, INC.</p>
      </div>
    </div>
    </footer><script src="../../_theme/scripts/menu.js"></script>
<script src="../../_theme/scripts/highlight.pack.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>
