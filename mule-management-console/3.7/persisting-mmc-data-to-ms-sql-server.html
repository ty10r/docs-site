<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="">
  <link rel="canonical" href="https://ede65566-docs-migration.github.io/docs-site/mule-management-console/3.8/persisting-mmc-data-to-ms-sql-server.html">
  <link rel="stylesheet" href="../../_theme/stylesheets/theme.css">
  <title>Persisting MMC Data to MS SQL Server // MuleSoft Documentation</title>
</head>
<body class="article">
<header class="header" id="header" role="banner"><div class="header__wrapper clearfix">
      <div class="header__logo--primary-nav clearfix">
        <a href="https://docs.mulesoft.com" title="Home" rel="home" class="header__logo" id="logo">
          <img src="../../_theme/images/mulesoft-dev-logo.svg" alt="Home" class="header__logo-image"></a>
          <div class="header__region region region-header">
    <div id="block-system-main-menu" class="block block-menu first last odd" role="navigation">

        <h2 class="block__title block-title">Main Dev Menu</h2>
    
  <ul class="menu"><li class="menu__item is-expanded first expanded"><span class="menu__link">Platform</span><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="https://developer.mulesoft.com/dev/anypoint-studio" title="" class="menu__link">Studio</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/connectors" title="" class="menu__link">Connectors</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/anypoint-exchange" title="" class="menu__link">Exchange</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/design-api" title="" class="menu__link">API Designer</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/api-developer-portal" title="" class="menu__link">API Portal</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/mule-runtime-engine" title="" class="menu__link">Mule runtime engine</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/api-management" title="" class="menu__link">API Manager</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://developer.mulesoft.com/dev/reporting-api-analytics" title="" class="menu__link">API Analytics</a></li>
</ul></li>
<li class="menu__item is-expanded expanded"><span class="menu__link">Resources</span><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="https://developer.mulesoft.com/getting-started/anypoint-platform" class="menu__link">Getting started</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/tutorials-and-howtos" class="menu__link">Tutorials &amp; HowTos</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/webinars-and-videos" title="" class="menu__link">Webinars &amp; Videos</a></li>
<li class="menu__item is-leaf leaf"><a href="http://s2.developer.mulesoft.com/workshops" class="menu__link">Online Workshops</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/integration-books-and-resources" class="menu__link">Books &amp; Whitepapers</a></li>
<li class="menu__item is-leaf leaf"><a href="https://blogs.mulesoft.com/dev/" class="menu__link">Blog</a></li>
<li class="menu__item is-leaf leaf"><a href="https://docs.mulesoft.com" class="menu__link">Documentation</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://training.mulesoft.com" class="menu__link">Training</a></li>
</ul></li>
<li class="menu__item is-expanded expanded"><a href="https://developer.mulesoft.com/community" class="menu__link">Community</a><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="http://forum.mulesoft.org/" class="menu__link">Forums</a></li>
<li class="menu__item is-leaf leaf"><a href="https://meetups.mulesoft.com" class="menu__link">Meetups</a></li>
<li class="menu__item is-leaf leaf"><a href="http://s2.developer.mulesoft.com/" class="menu__link">Contributed Content</a></li>
<li class="menu__item is-leaf leaf"><a href="https://s2.developer.mulesoft.com/jobs.html" class="menu__link">Jobs</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://www.mulesoft.org/jira/browse/MULE" class="menu__link">Issue tracker</a></li>
</ul></li>
<li class="menu__item is-leaf last leaf"><a href="https://developer.mulesoft.com/champions" class="menu__link">Champions</a></li>
</ul></div>
  </div>
      </div> <!-- header__logo--primary-nav -->
      <div class="header__top-wrapper">
        <div class="header__nav-wrapper">
                      <div class="region region-header-top">
    <div id="block-search-form" class="block block-search first last odd" role="search">

      
  
</div>
  </div>
        </div>
        <div class="top-nav-ctas">
          <a class="icon-muletheme-phone" href="https://mulesoft.com/lp/contact" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-contact');"></a>
          <a href="https://anypoint.mulesoft.com/login/#/signup?apintent=dmc_generic" class="try" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-nav');">Try now</a>
          <a href="https://mulesoft.com/" class="dev" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-mscom');">MuleSoft.com</a>
        </div>
      </div> <!-- header__secondary-nav-search -->
    </div> <!-- header__wrapper -->
    <a href="#sidr" id="open-left" class="closed">
    </a>
  </header><main role="main" class="main-wrapper">
  <div class="navigation-wrapper">
    <nav role="navigation" class="navigation">
      <div class="search">
        <input type="text" placeholder="Search the docs" class="search-input" autocomplete="off" autocorrect="off" autocapitalize="off">
      </div>
      <div class="inner-nav">
          <ul class="nav-lst">
              <li class="nav-itm" data-depth="0" data-state="collapsed">
                  <button class="nav-tgl"></button>
                <a class="nav-lnk" href="index.html">Mule Management Console</a>
                  <ul class="nav-lst">
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="installing-the-production-version-of-mmc.html">Installing the Production Version of MMC</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="installing-and-deploying-mmc-to-weblogic.html">Installing and Deploying MMC to Weblogic</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="installing-and-deploying-mmc-to-websphere.html">Installing and Deploying MMC to WebSphere</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="upgrading-the-management-console.html">Upgrading the Management Console</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="configuration-files-for-ldap-and-external-dbs-in-mmc-before-and-after-3.4.2.html">Configuration Files for LDAP and External DBs in MMC Before and After 3.4.2</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="migration-scripts-for-business-events.html">Migration Scripts for Business Events</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="upgrading-to-mmc-with-an-external-database.html">Upgrading to MMC with an External Database</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="upgrading-to-mmc-with-ldap.html">Upgrading to MMC with LDAP</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="upgrading-from-mmc-3.4.1-for-ms-sql-server-to-latest-mmc-for-ms-sql-server.html">Upgrading from MMC 3.4.1 for MS-SQL Server to the Latest MMC for MS-SQL Server</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="orientation-to-the-console.html">Orientation to the Console</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="mmc-walkthrough.html">MMC Walkthrough</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="architecture-of-the-mule-management-console.html">Architecture of the Mule Management Console</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="setting-up-mmc.html">Setting Up MMC</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="setting-up-mmc-mule-esb-communications.html">Setting Up MMC-Mule ESB Communications</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                  <button class="nav-tgl"></button>
                                <a class="nav-lnk" href="persisting-mmc-data-on-external-databases.html">Persisting MMC Data On External Databases</a>
                                  <ul class="nav-lst">
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="configuring-mmc-for-external-databases-quick-reference.html">Configuring MMC for External Databases - Quick Reference</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="persisting-mmc-data-to-ms-sql-server.html">Persisting MMC Data to MS SQL Server</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="persisting-mmc-data-to-mysql.html">Persisting MMC Data to MySQL</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="persisting-mmc-data-to-oracle.html">Persisting MMC Data to Oracle</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="persisting-mmc-data-to-postgresql.html">Persisting MMC Data to PostgreSQL</a>
                                      </li>
                                  </ul>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="encrypting-ldap-and-database-passwords-in-mmc.html">Encrypting LDAP and Database Passwords in MMC</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                  <button class="nav-tgl"></button>
                                <a class="nav-lnk" href="managing-mmc-users-and-roles.html">Managing MMC Users and Roles</a>
                                  <ul class="nav-lst">
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                          <button class="nav-tgl"></button>
                                        <a class="nav-lnk" href="setting-up-and-managing-users-in-mmc.html">Setting Up and Managing Users in MMC</a>
                                          <ul class="nav-lst">
                                              <li class="nav-itm" data-depth="4" data-state="collapsed">
                                                <a class="nav-lnk" href="encrypting-mmc-user-passwords.html">Encrypting MMC User Passwords</a>
                                              </li>
                                          </ul>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="setting-up-and-managing-users-via-ldap.html">Setting Up and Managing Users via LDAP</a>
                                      </li>
                                  </ul>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="deploying-applications.html">Deploying Applications</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="managing-with-mmc.html">Managing with MMC</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="managing-mule-servers-clusters-and-groups.html">Managing Mule Servers Clusters and Groups</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="maintaining-the-server-application-repository.html">Maintaining the Server Application Repository</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="working-with-flows.html">Working with Flows</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                  <button class="nav-tgl"></button>
                                <a class="nav-lnk" href="managing-mule-high-availability-ha-clusters.html">Managing Mule High Availability (HA) Clusters</a>
                                  <ul class="nav-lst">
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="configuring-mule-ha-clustering.html">Configuring Mule HA Clustering</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="creating-or-disbanding-a-cluster.html">Creating or Disbanding a Cluster</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="deploying-redeploying-or-undeploying-an-application-to-or-from-a-cluster.html">Deploying, Redeploying, or Undeploying an Application To or From a Cluster</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="dynamically-adding-or-removing-nodes-in-a-cluster.html">Dynamically Adding or Removing Nodes in a Cluster</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="monitoring-a-cluster.html">Monitoring a Cluster</a>
                                      </li>
                                  </ul>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="mmc-rest-api.html">MMC REST API</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                  <button class="nav-tgl"></button>
                                <a class="nav-lnk" href="rest-api-reference.html">REST API Reference</a>
                                  <ul class="nav-lst">
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="clusters.html">Clusters</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="deployments.html">Deployments</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="repository-of-applications.html">Repository of Applications</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="server-groups.html">Server Groups</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="servers.html">Servers</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="user-groups.html">User Groups</a>
                                      </li>
                                  </ul>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="using-the-management-console-api.html">Using the Management Console API</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="monitoring-with-mmc.html">Monitoring with MMC</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                  <button class="nav-tgl"></button>
                                <a class="nav-lnk" href="monitoring-a-server.html">Monitoring a Server</a>
                                  <ul class="nav-lst">
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="monitoring-applications.html">Monitoring Applications</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="viewing-server-alerts.html">Viewing Server Alerts</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="viewing-system-memory.html">Viewing System Memory</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="viewing-threads.html">Viewing Threads</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="viewing-server-pools.html">Viewing Server Pools</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="working-with-the-server-configuration-files.html">Working with the Server Configuration Files</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="viewing-server-properties.html">Viewing Server Properties</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="editing-server-settings.html">Editing Server Settings</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="customizing-server-metrics-dashboard.html">Customizing Server Metrics Dashboard</a>
                                      </li>
                                  </ul>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="working-with-alerts.html">Working With Alerts</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="defining-slas-and-alerts.html">Defining SLAs and Alerts</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="adding-and-managing-alerts-and-slas.html">Adding and Managing Alerts and SLAs</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="setting-up-alert-destinations-and-notifications.html">Setting Up Alert Destinations and Notifications</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                  <button class="nav-tgl"></button>
                                <a class="nav-lnk" href="analyzing-business-events.html">Analyzing Business Events</a>
                                  <ul class="nav-lst">
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="business-events-use-cases.html">Business Events Use Cases</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="tracking-and-querying-business-events.html">Tracking and Querying Business Events</a>
                                      </li>
                                  </ul>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="analyzing-flow-processing-and-payloads.html">Analyzing Flow Processing and Payloads</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="viewing-server-os-resources.html">Viewing Server OS Resources</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="viewing-jmx-information.html">Viewing JMX Information</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="customizing-the-dashboard.html">Customizing the Dashboard</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="working-with-logs.html">Working with Logs</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="accessing-server-logs.html">Accessing Server Logs</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="audit-logs.html">Audit Logs</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="troubleshooting-with-mmc.html">Troubleshooting with MMC</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="troubleshooting-tips.html">Troubleshooting Tips</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                  <button class="nav-tgl"></button>
                                <a class="nav-lnk" href="monitoring-and-debugging-applications.html">Monitoring and Debugging Applications</a>
                                  <ul class="nav-lst">
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="tracking-flows.html">Tracking Flows</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="analyzing-message-flows.html">Analyzing Message Flows</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="debugging-message-processing.html">Debugging Message Processing</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="debugging-the-loan-broker-example-application.html">Debugging the Loan Broker Example Application</a>
                                      </li>
                                  </ul>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="using-the-management-console-for-performance-tuning.html">Using the Management Console for Performance Tuning</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="automating-tasks-using-scripts.html">Automating Tasks Using Scripts</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="scripting-examples.html">Scripting Examples</a>
                              </li>
                          </ul>
                      </li>
                  </ul>
              </li>
          </ul>
      </div>
    </nav>
  </div>
  <article class="primary-content">
    <header class="article-header">
      <div class="breadcrumb">
        <strong class="breadcrumb-item">[ Domain Selector Placeholder ]</strong> /
        <span class="breadcrumb-item">Persisting MMC Data to MS SQL Server</span>
      </div>
      <div class="edit-on-github">
        <a href="https://github.com/ede65566-docs-migration/mule-management-console-docs/edit/v3.7/modules/ROOT/content/persisting-mmc-data-to-ms-sql-server.adoc" class="edit-on-github-link">Edit on Github</a>
      </div>
    </header>
    <h1>Persisting MMC Data to MS SQL Server</h1>
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><mark><strong><em>MMC Version 3.4.2 and Later</em></strong></mark></p>
</div>
<div class="paragraph">
<p>This page describes how to set up and configure the Mule Management Console to persist environment and transaction data to <a href="http://technet.microsoft.com/en-us/sqlserver/default">Microsoft SQL Server</a>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This document lays out the instructions for deploying the Management Console on a production-ready environment using Apache Tomcat. All of the instructions should work with other <a href="../../mule-runtime/3.7/install/hardware-and-software-requirements.html">supported application servers</a> as well, but this has not been tested.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assumptions"><a class="anchor" href="#assumptions"></a>Assumptions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document assumes that you have installed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>MMC Version 3.5.0</strong>. Download it from the <a href="http://www.mulesoft.com/support-login">customer portal</a> if you need to upgrade to this version.</p>
</li>
<li>
<p><strong>a Web application server such as Tcat, Tomcat, or JBoss</strong>. Please refer to the <a href="../../mule-runtime/3.7/install/hardware-and-software-requirements.html">Hardware and Software Requirements</a> for the latest information about hardware requirements and supported application servers, Java Runtime Environments, and browsers.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For practical purposes, this document mentions Tomcat as the servlet container; however, the instructions contained here apply also to Tcat or JBoss. If using Tcat or JBoss, make sure to unpack the Management Console .war file in the appropriate directory. For additional information, see <a href="installing-the-production-version-of-mmc.html">Installing the Production Version of MMC</a>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Known Issue with MS SQL and Java 6, Update 29</strong></p>
</div>
<div class="paragraph">
<p>There is a <a href="http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7105007">known issue</a> with Java 6, Update 29, regarding an SSL configuration which causes connection attempts to the database to hang indefinetely, with no timeout, thus preventing MMC startup. MS SQL cannot be used with this Java version. Please upgrade to a later JVM.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Prior to configuring the Management Console to persist data to the MS SQL Server, you need to ensure that the MS SQL Server and logins are properly configured and available.</p>
</div>
<div class="sect2">
<h3 id="ms-sql-server-configuration"><a class="anchor" href="#ms-sql-server-configuration"></a>MS SQL Server Configuration</h3>
<div class="paragraph">
<p>This article assumes the following MS SQL Server configuration:</p>
</div>
<div class="sect3">
<h4 id="for-environment-data"><a class="anchor" href="#for-environment-data"></a>For Environment Data</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Item</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Database for environment data</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p>Name: <code>MMC_STATUS</code></p>
</li>
<li>
<p>Owner: <code>MMC_USER</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Login for environment data database</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p>Name: <code>MMC_USER</code></p>
</li>
<li>
<p>Default database: <code>MMC_STATUS</code></p>
</li>
<li>
<p>Password expiration: No</p>
</li>
<li>
<p>Password policy: Not set</p>
</li>
<li>
<p>Password: Any</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="for-tracking-data"><a class="anchor" href="#for-tracking-data"></a>For Tracking Data</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Item</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Database for tracking data</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p>Name: <code>MMC_PERSISTENCY</code></p>
</li>
<li>
<p>Owner: <code>MMC_TRACKER</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Login for tracking data database</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p>Name: <code>MMC_TRACKER</code></p>
</li>
<li>
<p>Default database: <code>MMC_PERSISTENCY</code></p>
</li>
<li>
<p>Password expiration: No</p>
</li>
<li>
<p>Password policy: Not set</p>
</li>
<li>
<p>Password: Any</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="database-connectivity"><a class="anchor" href="#database-connectivity"></a>Database Connectivity</h3>
<div class="paragraph">
<p>MS SQL Server must be configured to allow logging with a user name and password instead of only with integrated authentication (i.e. the security options need to specify SQL Server and Windows Authentication Mode).</p>
</div>
<div class="paragraph">
<p>The database must be accessible from the host where the Management Console resides. When in doubt, confirm that the connection is available using a standard client from the Management Console host.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="literalblock">
<div class="content">
<pre>Connection testing using the telnet command</pre>
</div>
</div>
<div class="paragraph">
<p>If connection using a standard client fails due to a connectivity issue (not an authentication issue), confirm connectivity using the <code>telnet</code> command, if available on your system.</p>
</div>
<div class="paragraph">
<p>From the Management Console host, run:</p>
</div>
<div class="paragraph">
<p>If the connection succeeds, you should output similar to the following:</p>
</div>
<div class="paragraph">
<p>The above output indicates that the connection was successful. A "connection refused" error usually indicates that nothing is listening on the specified host and port. Any other output, or lack of output, indicates a connectivity problem, such as a routing issue or firewall blocking requests between the Management Console host and the database host.</p>
</div>
<div class="paragraph">
<p>The telnet command only tests network connectivity, not authentication to the database.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="setting-up-database-tables-for-persistent-data"><a class="anchor" href="#setting-up-database-tables-for-persistent-data"></a>Setting Up Database Tables for Persistent Data</h3>
<div class="paragraph">
<p>On the first run, JCR automatically creates all the tables needed to store persistent MMC information. However, if you are planning to persist environment data to an external database, you must manually create tables that store Quartz job information, or an error similar to the following will occur:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">ERROR: relation "qrtz_locks" does not exist.</code></pre>
</div>
</div>
<div class="paragraph">
<p>To create and insert the tables, follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to ` &lt;MMC_HOME&gt;/`WEB-INF/classes/quartz.</p>
</li>
<li>
<p>Locate the SQL script <code>tables_sqlServer.sql</code>.</p>
</li>
<li>
<p>Execute <code>tables_sqlServer.sql</code> on the target database ( <code>MMC_STATUS</code> ) as the database owner.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>At this point, the database is completely defined.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mmc-configuration"><a class="anchor" href="#mmc-configuration"></a>MMC Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Configuring the Management Console to use MS SQL Server requires that you copy files to, and modify files contained in, the Management Console directory structure. This directory structure is contained in the .war file for deploying the Management Console to Tomcat.</p>
</div>
<div class="paragraph">
<p>It is recommended that you extract the contents of the console .war file to the <code>webapps</code> directory of your Tomcat installation and apply configuration to the extracted contents. The complete sequence of steps is:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure that the Tomcat servlet container is not running.</p>
</li>
<li>
<p>Extract the Management Console .war file to the <code>webapps</code> directory under the Tomcat root directory. After extraction, the contents of the .war file should reside in <code>&lt;TOMCAT_HOME&gt;/webapps/mmc-3.5.0</code>. For example, if the Tomcat root directory is <code>/var/lib/tomcat6</code>, the Management Console&#8217;s root directory should be <code>/var/lib/tomcat6/webapps/mmc-3.5.0</code>.</p>
</li>
<li>
<p>Perform the modifications described in this page: copying the <code>sqljdbc4.jar</code> file and modifying the appropriate configuration files.</p>
</li>
<li>
<p>Ensure that there is no directory named <code>mmc-data</code> anywhere in the Tomcat directory tree.</p>
</li>
<li>
<p>Start Tomcat, starting your customized Management Console for the first time.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The following sections explain how to configure the Management Console for MS SQL Server, working with the files extracted from the original Management Console .war file.</p>
</div>
<div class="sect2">
<h3 id="code-sqljdbc4-jar-code-driver-library"><a class="anchor" href="#code-sqljdbc4-jar-code-driver-library"></a><code>sqljdbc4.jar</code> Driver Library</h3>
<div class="paragraph">
<p>To use the Management Console with MS SQL Server, you need to add the <code>sqljdbc4.jar</code> library to the Management Console.</p>
</div>
<div class="paragraph">
<p>Download the library from the <a href="http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&amp;id=11774">Microsoft Download Center</a>. You will have the option to download several files, including an executable file for Windows operating systems and a gzipped tar archive for Unix or Unix-based systems.</p>
</div>
<div class="paragraph">
<p>If using Windows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>find and run the <code>sqljdbc_&lt;version&gt;_enu.exe</code> file, then follow the installation wizard</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If using a Unix or Unix-based system:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>uncompress and unpack the file <code>sqljdbc_&lt;version&gt;_enu.tar.gz</code> file</p>
</li>
<li>
<p>in the newly-created directory tree, locate the <code>sqljdbc4.jar</code> file</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>On both types of operating systems:</p>
</div>
<div class="paragraph">
<p>Copy the file <code>sqljdbc4.jar</code> to the following directory:` &lt;MMC_HOME&gt;/WEB-INF/lib`. For example, <code>/var/lib/tomcat6/webapps/mmc-console-3.5.0/WEB-INF/lib</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="literalblock">
<div class="content">
<pre>Unpacking gzipped tar files</pre>
</div>
</div>
<div class="paragraph">
<p>To uncompress and unpack the .tar.gz file, open a terminal and use the <code>cd</code> command to navigate to the directory containing the file. Then, run the following commands:</p>
</div>
<div class="paragraph">
<p>This will uncompress the file, whose filename extension will change from <code>.tar.gz</code> to <code>.tar</code>. Unpack the file with the <code>tar</code> command, as shown below.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="paragraph">
<p>Some versions of the <code>tar</code> utility allow you to uncompress and unpack the file with a single command, as shown below.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="paragraph">
<p>This will uncompress and unpack the contents of the file in the current directory.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>If MMC is deployed to Websphere</strong></p>
</div>
<div class="paragraph">
<p>If you have deployed MMC to Websphere, you can copy either <code>sqljdbc4.jar</code> as detailed above, <strong><em>or</em></strong> <code>sqlserver.jar</code>, which is the ConnectJDBC type 4 driver provided by IBM. You do not need to copy both files.</p>
</div>
<div class="paragraph">
<p>For further information, see the IBM documentation for <a href="http://www-01.ibm.com/support/knowledgecenter/SS7JFU_7.0.0/com.ibm.websphere.express.doc/info/exp/ae/rdat_minreqmssql.html">data source minimum required settings for Microsoft SQL Server</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="configuration-for-environment-data"><a class="anchor" href="#configuration-for-environment-data"></a>Configuration for Environment Data</h3>
<div class="paragraph">
<p>Configuring MMC to store data on a MS-SQL Server database involves two basic tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Modifying the file <code>web.xml</code> to tell MMC to use MS-SQL Server instead of its default database</p>
</li>
<li>
<p>Modifying the file <code>mmc-mssql.properties</code> to set the parameters for connecting to the MS-SQL Server database</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="modifying-code-web-xml-code"><a class="anchor" href="#modifying-code-web-xml-code"></a>Modifying <code>web.xml</code></h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the directory <code>&lt;MMC_HOME&gt;/WEB-INF</code>, locate the file <code>web.xml</code>, then open it for editing.</p>
</li>
<li>
<p>Locate the <code>spring.profiles.active</code> section, shown below.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;context-param&gt;
&lt;param-name&gt;spring.profiles.active&lt;/param-name&gt;
&lt;param-value&gt;tracking-h2,env-derby&lt;/param-value&gt;
&lt;/context-param&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Delete the string <code>env-derby</code>, then replace it with <code>env-mssql</code>, as shown below.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;context-param&gt;
&lt;param-name&gt;spring.profiles.active&lt;/param-name&gt;
&lt;param-value&gt;tracking-h2,env-mssql&lt;/param-value&gt;
&lt;/context-param&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If you are also planning to <a href="#configuration-for-transaction-data">Configuration for Transaction Data</a> to MS-SQL Server, delete the string <code>tracking-h2</code> and replace it with <code>tracking-mssql</code>.</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The <code>spring.profiles.active</code> section in the <code>web.xml</code> configuration file allows you to define what external databases are used for storing environment and/or tracking data. For a quick instructions for all supported database servers, see <a href="configuring-mmc-for-external-databases-quick-reference.html">Configuring MMC for External Databases - Quick Reference</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="modifying-code-mmc-mssql-properties-code"><a class="anchor" href="#modifying-code-mmc-mssql-properties-code"></a>Modifying <code>mmc-mssql.properties</code></h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the directory <code>&lt;MMC_HOME&gt;/WEB-INF/classes/META-INF/databases</code>, locate the file <code>mmc-mssql.properties</code>, then open it for editing.</p>
</li>
<li>
<p>The table below lists the settings contained in the file. Modify the values as needed. In general, the only values that you should need to modify are <code>env.username</code>, <code>env.password</code>, <code>env.host</code>, <code>env.port</code> and <code>env.dbschema</code>.</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>env.driver</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Driver to use for connecting to the database</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>com.microsoft.sqlserver.jdbc.SQLServerDriver</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>env.script</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Script to use for creating the tables in the target database</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>sqlServer</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>env.username</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database user</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>MMC_STATUS</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>env.password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password for the database user</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>mmc123</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>env.host</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hostname or IP address where the database server is listening</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>localhost</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>env.port</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port where the database server is listening</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>1433</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>env.url</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL for connecting to the database</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>jdbc\:sqlserver\://${env.host}\:${env.port};databaseName=${env.dbschema}</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>env.dbschema</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database to connect to</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>mmc_persistency_status</code></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Save the file with your modifications, if any.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="removing-local-database-files"><a class="anchor" href="#removing-local-database-files"></a>Removing Local Database Files</h3>
<div class="paragraph">
<p>For the configuration changes to take effect, before launching MMC you need to delete the local database files that MMC uses by default.</p>
</div>
<div class="paragraph">
<p>In the root directory of your Web application server, locate the <code>mmc-data</code> directory (for example, <code>/var/lib/tomcat6/mmc-data</code>), then delete the <code>mmc-data</code> directory.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Before you delete <code>mmc-data</code>, make a backup copy of this directory and store it in a safe location. If anything goes wrong with your new database configuration, you can use <code>mmc-data</code> to restore the old database configuration while you troubleshoot your new database config in a test environment.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>At this point, MMC, is configured to store environment data on the external MS-SQL Server database that you specified.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-for-transaction-data"><a class="anchor" href="#configuration-for-transaction-data"></a>Configuration for Transaction Data</h3>
<div class="paragraph">
<p>Configuring MMC to store Business Events data on an MS-SQL Server database involves two basic tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Modifying the file <code>web.xml</code> to tell MMC to use MS-SQL Server instead of its default database</p>
</li>
<li>
<p>Modifying the file <code>tracking-persistence-mssql.properties</code> to set the parameters for connecting to the MS-SQL Server database</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="modifying-code-web-xml-code-2"><a class="anchor" href="#modifying-code-web-xml-code-2"></a>Modifying <code>web.xml</code></h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the directory <code>&lt;MMC_HOME&gt;/WEB-INF</code>, locate the file <code>web.xml</code>, then open it for editing.</p>
</li>
<li>
<p>Locate the <code>spring.profiles.active</code> section, shown below.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;context-param&gt;
&lt;param-name&gt;spring.profiles.active&lt;/param-name&gt;
&lt;param-value&gt;tracking-h2,env-derby&lt;/param-value&gt;
&lt;/context-param&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Delete the string <code>tracking-h2</code>, then replace it with <code>tracking-mssql</code>, as shown below.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;context-param&gt;
&lt;param-name&gt;spring.profiles.active&lt;/param-name&gt;
&lt;param-value&gt;tracking-mssql,env-derby&lt;/param-value&gt;
&lt;/context-param&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If you are also planning to <a href="#configuration-for-environment-data">Configuration for Environment Data</a> to MS-SQL Server, delete the string <code>env-derby</code> and replace it with <code>env-mssql</code>.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>spring.profiles.active</code> section in the <code>web.xml</code> configuration file allows you to define what external databases are used for storing environment and/or tracking data. For a quick instructions for all supported database servers, see <a href="configuring-mmc-for-external-databases-quick-reference.html">Configuring MMC for External Databases - Quick Reference</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="modifying-code-tracking-persistence-mssql-properties-code"><a class="anchor" href="#modifying-code-tracking-persistence-mssql-properties-code"></a>Modifying <code>tracking-persistence-mssql.properties</code></h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the directory <code>&lt;MMC_HOME&gt;/WEB-INF/classes/META-INF/databases</code>, locate the file <code>tracking-persistence-mssql.properties</code>, then open it for editing.</p>
</li>
<li>
<p>Modify the included settings as needed, according to the table below. In general, the only values that you should need to modify are <code>mmc.tracking.db.username</code>, <code>mmc.tracking.db.password</code>, <code>mmc.tracking.db.host</code>, <code>mmc.tracking.db.port</code> and <code>mmc.tracking.db.dbname</code>.</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>mmc.tracking.db.events.query.deleteOlderThan</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Do not change this value.</strong> This is the cleanup script query for the MS-SQL database.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>DELETE p FROM EVENT_PROPERTIES p where p.id in (select e.id from EVENTS e where e.transaction_id in (select t.id from TRANSACTION_SUMMARIES t where t.timestamp &lt; ?1))</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>mmc.tracking.db.platform</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of database server to connect to</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>org.apache.openjpa.jdbc.sql.SQLServerDictionary</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>mmc.tracking.db.driver</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Driver to use for connecting to the database</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>com.microsoft.sqlserver.jdbc.SQLServerDriver</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>mmc.tracking.db.host</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hostname or IP address where the database server is listening</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>localhost</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>mmc.tracking.db.port</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port where the database server is listening</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>1433</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>mmc.tracking.db.url</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL for connecting to the database</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>jdbc:sqlserver://${mmc.tracking.db.host}:${mmc.tracking.db.port};databaseName=${mmc.tracking.db.dbname}</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>mmc.tracking.db.username</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database user</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>mmc_tracking</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>mmc.tracking.db.password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password for the database user</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>mmc123</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>mmc.tracking.db.dbname</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database to connect to</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>persistency</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>mmc.max.events.exception.details.length</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of characters from a Business Events exception that will be stored in the tracking database. The maximum allowed is 261120.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>8000</code></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Save the file with your modifications, if any.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="removing-local-database-files-2"><a class="anchor" href="#removing-local-database-files-2"></a>Removing Local Database Files</h3>
<div class="paragraph">
<p>For the configuration changes to take effect, before launching MMC you need to delete the local database files that MMC uses by default.</p>
</div>
<div class="paragraph">
<p>In the root directory of your Web application server, locate the <code>mmc-data</code> directory (for example, <code>/var/lib/tomcat6/mmc-data</code>), then delete the <code>mmc-data</code> directory.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Before you delete <code>mmc-data</code>, make a backup copy of this directory and store it in a safe location. If anything goes wrong with your new database configuration, you can use <code>mmc-data</code> to restore the old database configuration while you troubleshoot your new database config in a test environment.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>At this point, MMC, is configured to store tracking data on the external MS-SQL Server database that you specified.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="see-also"><a class="anchor" href="#see-also"></a>See Also</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Read more about <a href="setting-up-mmc.html">MMC setup</a>.</p>
</li>
<li>
<p>Review the <a href="architecture-of-the-mule-management-console.html">Architecture of the Mule Management Console</a>.</p>
</li>
</ul>
</div>
</div>
</div>
  </article>
</main>
<footer class="footer"><div class="footer__wrapper">
      <div class="footer__top">
              </div>
      <div class="footer-bottom-wrapper">
        <!--<a href="/" title="Home" rel="home" class="header__logo" id="logo"><img src="/sites/all/themes/muletheme/images/mule_logo.svg" alt="Home" class="header__logo-image" /></a>-->
        <div class="connect-footer">
          <p>Sign up for our Dev newsletter</p>
          <div class="connect-footer">

</div>
  </div>
        <div class="terms-conditions temp">
          <div id="block-menu-menu-footer-bottom-menu" class="block block-menu contextual-links-region first last odd" role="navigation">
            <ul class="menu"><li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/" class="menu__link">MuleSoft.com</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://blogs.mulesoft.com/" class="menu__link">Blog</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/content/terms-service" class="menu__link">Terms</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/privacy-policy" class="menu__link">Privacy</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/contact" class="menu__link">Contact</a></li>
            </ul></div>
                    <div class="default-terms-conditions">
          </div>
          MuleSoft provides a widely used <a href="https://www.mulesoft.com/platform/enterprise-integration">integration platform</a> for connecting SaaS and enterprise applications in the cloud and on-premise. Delivered as a unified integration experience, <a href="https://www.mulesoft.com/platform/saas/cloudhub-ipaas-cloud-based-integration">CloudHub&trade;</a> and <a href="https://www.mulesoft.com/platform/soa/mule-esb-open-source-esb">Mule ESB&trade;</a> (Enterprise Service Bus) are built on proven open source technology for fast and reliable on-premise and cloud integration without vendor lock-in.


        </div>
      </div>
      <div class="footer-end">
        <div class="footer-logo-wrapper">
          <a href="https://developer.mulesoft.com/" class="footer-logo"></a>
        </div>
        <ul class="social-links"><li><a href="https://www.mulesoft.com/lp/contact" target="_blank" class="icon-muletheme-phone"></a></li>
          <li><a href="https://www.linkedin.com/company/mulesoft" target="_blank" class="icon-muletheme-linkedin"></a></li>
          <li><a href="https://twitter.com/muledev" target="_blank" class="icon-muletheme-twitter"></a></li>
          <li><a href="https://www.facebook.com/MuleSoft" target="_blank" class="icon-muletheme-facebook"></a></li>
          <li><a href="mailto:info@mulesoft.com" target="_blank" class="icon-muletheme-email"></a></li>
          <li><a href="https://videos.mulesoft.com/" target="_blank" class="icon-muletheme-youtube"></a></li>
        </ul><p class="copyright"><span>&copy;2017</span> MuleSoft, INC.</p>
      </div>
    </div>
    </footer><script src="../../_theme/scripts/menu.js"></script>
<script src="../../_theme/scripts/highlight.pack.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>
