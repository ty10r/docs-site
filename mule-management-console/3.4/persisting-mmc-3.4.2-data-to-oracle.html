<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="">
  <link rel="canonical" href="https://ede65566-docs-migration.github.io/docs-site/mule-management-console/3.4/persisting-mmc-3.4.2-data-to-oracle.html">
  <link rel="stylesheet" href="../../_theme/stylesheets/theme.css">
  <title>Persisting MMC 3.4.2 Data to Oracle // MuleSoft Documentation</title>
</head>
<body class="article">
<header class="header" id="header" role="banner"><div class="header__wrapper clearfix">
      <div class="header__logo--primary-nav clearfix">
        <a href="https://docs.mulesoft.com" title="Home" rel="home" class="header__logo" id="logo">
          <img src="../../_theme/images/mulesoft-dev-logo.svg" alt="Home" class="header__logo-image"></a>
          <div class="header__region region region-header">
    <div id="block-system-main-menu" class="block block-menu first last odd" role="navigation">

        <h2 class="block__title block-title">Main Dev Menu</h2>
    
  <ul class="menu"><li class="menu__item is-expanded first expanded"><span class="menu__link">Platform</span><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="https://developer.mulesoft.com/dev/anypoint-studio" title="" class="menu__link">Studio</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/connectors" title="" class="menu__link">Connectors</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/anypoint-exchange" title="" class="menu__link">Exchange</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/design-api" title="" class="menu__link">API Designer</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/api-developer-portal" title="" class="menu__link">API Portal</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/mule-runtime-engine" title="" class="menu__link">Mule runtime engine</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/api-management" title="" class="menu__link">API Manager</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://developer.mulesoft.com/dev/reporting-api-analytics" title="" class="menu__link">API Analytics</a></li>
</ul></li>
<li class="menu__item is-expanded expanded"><span class="menu__link">Resources</span><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="https://developer.mulesoft.com/getting-started/anypoint-platform" class="menu__link">Getting started</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/tutorials-and-howtos" class="menu__link">Tutorials &amp; HowTos</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/webinars-and-videos" title="" class="menu__link">Webinars &amp; Videos</a></li>
<li class="menu__item is-leaf leaf"><a href="http://s2.developer.mulesoft.com/workshops" class="menu__link">Online Workshops</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/integration-books-and-resources" class="menu__link">Books &amp; Whitepapers</a></li>
<li class="menu__item is-leaf leaf"><a href="https://blogs.mulesoft.com/dev/" class="menu__link">Blog</a></li>
<li class="menu__item is-leaf leaf"><a href="https://docs.mulesoft.com" class="menu__link">Documentation</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://training.mulesoft.com" class="menu__link">Training</a></li>
</ul></li>
<li class="menu__item is-expanded expanded"><a href="https://developer.mulesoft.com/community" class="menu__link">Community</a><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="http://forum.mulesoft.org/" class="menu__link">Forums</a></li>
<li class="menu__item is-leaf leaf"><a href="https://meetups.mulesoft.com" class="menu__link">Meetups</a></li>
<li class="menu__item is-leaf leaf"><a href="http://s2.developer.mulesoft.com/" class="menu__link">Contributed Content</a></li>
<li class="menu__item is-leaf leaf"><a href="https://s2.developer.mulesoft.com/jobs.html" class="menu__link">Jobs</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://www.mulesoft.org/jira/browse/MULE" class="menu__link">Issue tracker</a></li>
</ul></li>
<li class="menu__item is-leaf last leaf"><a href="https://developer.mulesoft.com/champions" class="menu__link">Champions</a></li>
</ul></div>
  </div>
      </div> <!-- header__logo--primary-nav -->
      <div class="header__top-wrapper">
        <div class="header__nav-wrapper">
                      <div class="region region-header-top">
    <div id="block-search-form" class="block block-search first last odd" role="search">

      
  
</div>
  </div>
        </div>
        <div class="top-nav-ctas">
          <a class="icon-muletheme-phone" href="https://mulesoft.com/lp/contact" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-contact');"></a>
          <a href="https://anypoint.mulesoft.com/login/#/signup?apintent=dmc_generic" class="try" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-nav');">Try now</a>
          <a href="https://mulesoft.com/" class="dev" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-mscom');">MuleSoft.com</a>
        </div>
      </div> <!-- header__secondary-nav-search -->
    </div> <!-- header__wrapper -->
    <a href="#sidr" id="open-left" class="closed">
    </a>
  </header><main role="main" class="main-wrapper">
  <div class="navigation-wrapper">
    <nav role="navigation" class="navigation">
      <div class="search">
        <input type="text" placeholder="Search the docs" class="search-input" autocomplete="off" autocorrect="off" autocapitalize="off">
      </div>
      <div class="inner-nav">
          <ul class="nav-lst">
              <li class="nav-itm" data-depth="0" data-state="collapsed">
                  <button class="nav-tgl"></button>
                <a class="nav-lnk" href="index.html">Mule Management Console</a>
                  <ul class="nav-lst">
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="installing-the-trial-version-of-mmc.html">Installing the Trial Version of MMC</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="installing-the-production-version-of-mmc.html">Installing the Production Version of MMC</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="upgrading-the-management-console.html">Upgrading the Management Console</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                  <button class="nav-tgl"></button>
                                <a class="nav-lnk" href="installing-or-upgrading-mule-management-console-3.4.2.html">Installing or Upgrading Mule Management Console 3.4.2</a>
                                  <ul class="nav-lst">
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="upgrading-to-mmc-3.4.2-with-an-external-database.html">Upgrading to MMC 3.4.2 with an External Database</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="upgrading-to-mmc-3.4.2-with-ldap.html">Upgrading to MMC 3.4.2 with LDAP</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="upgrading-from-mmc-3.4.1-for-ms-sql-server-to-mmc-3.4.2-for-ms-sql-server.html">Upgrading from MMC 3.4.1 for MS-SQL Server to MMC 3.4.2 for MS-SQL Server</a>
                                      </li>
                                  </ul>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="orientation-to-the-console.html">Orientation to the Console</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="mmc-walkthrough.html">MMC Walkthrough</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="setting-up-mmc.html">Setting Up MMC</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="setting-up-mmc-mule-esb-communications.html">Setting Up MMC-Mule ESB Communications</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                  <button class="nav-tgl"></button>
                                <a class="nav-lnk" href="persisting-mmc-data-on-external-databases.html">Persisting MMC Data On External Databases</a>
                                  <ul class="nav-lst">
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="persisting-mmc-data-to-oracle.html">Persisting MMC Data to Oracle</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="persisting-mmc-data-to-postgresql.html">Persisting MMC Data to PostgreSQL</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="persisting-mmc-data-to-mysql.html">Persisting MMC Data to MySQL</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="persisting-mmc-data-to-ms-sql-server.html">Persisting MMC Data to MS SQL Server</a>
                                      </li>
                                  </ul>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                  <button class="nav-tgl"></button>
                                <a class="nav-lnk" href="persisting-mmc-data-on-external-databases-in-mmc-3.4.2.html">Persisting MMC Data On External Databases in MMC 3.4.2</a>
                                  <ul class="nav-lst">
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="configuring-mmc-3.4.2-for-external-databases-quick-reference.html">Configuring MMC 3.4.2 for External Databases - Quick Reference</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="persisting-mmc-3.4.2-data-to-postgresql.html">Persisting MMC 3.4.2 Data to PostgreSQL</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="persisting-mmc-3.4.2-data-to-mysql.html">Persisting MMC 3.4.2 Data to MySQL</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="persisting-mmc-3.4.2-data-to-oracle.html">Persisting MMC 3.4.2 Data to Oracle</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="persisting-mmc-3.4.2-data-to-ms-sql-server.html">Persisting MMC 3.4.2 Data to MS SQL Server</a>
                                      </li>
                                  </ul>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="encrypting-the-mmc-tracking-database-password.html">Encrypting the MMC Tracking Database Password</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="encrypting-ldap-and-database-passwords-in-mmc-3.4.2.html">Encrypting LDAP and Database Passwords in MMC 3.4.2</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                  <button class="nav-tgl"></button>
                                <a class="nav-lnk" href="managing-mmc-users-and-roles.html">Managing MMC Users and Roles</a>
                                  <ul class="nav-lst">
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                          <button class="nav-tgl"></button>
                                        <a class="nav-lnk" href="setting-up-and-managing-users-in-mmc.html">Setting Up and Managing Users in MMC</a>
                                          <ul class="nav-lst">
                                              <li class="nav-itm" data-depth="4" data-state="collapsed">
                                                <a class="nav-lnk" href="encrypting-mmc-user-passwords.html">Encrypting MMC User Passwords</a>
                                              </li>
                                          </ul>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                          <button class="nav-tgl"></button>
                                        <a class="nav-lnk" href="setting-up-and-managing-users-via-ldap.html">Setting Up and Managing Users via LDAP</a>
                                          <ul class="nav-lst">
                                              <li class="nav-itm" data-depth="4" data-state="collapsed">
                                                <a class="nav-lnk" href="encrypting-the-mmc-ldap-password.html">Encrypting the MMC LDAP Password</a>
                                              </li>
                                          </ul>
                                      </li>
                                  </ul>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="architecture-of-the-mule-management-console.html">Architecture of the Mule Management Console</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="managing-mule-servers-clusters-and-groups.html">Managing Mule Servers Clusters and Groups</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="deploying-applications.html">Deploying Applications</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="monitoring-a-server.html">Monitoring a Server</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="monitoring-applications.html">Monitoring Applications</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="viewing-server-alerts.html">Viewing Server Alerts</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="viewing-system-memory.html">Viewing System Memory</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="viewing-threads.html">Viewing Threads</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="viewing-server-pools.html">Viewing Server Pools</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="working-with-the-server-configuration-files.html">Working with the Server Configuration Files</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="viewing-server-properties.html">Viewing Server Properties</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="viewing-server-os-resources.html">Viewing Server OS Resources</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="viewing-jmx-information.html">Viewing JMX Information</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="editing-server-settings.html">Editing Server Settings</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="customizing-server-metrics-dashboard.html">Customizing Server Metrics Dashboard</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="troubleshooting-tips.html">Troubleshooting Tips</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="monitoring-and-debugging-applications.html">Monitoring and Debugging Applications</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="tracking-flows.html">Tracking Flows</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="analyzing-message-flows.html">Analyzing Message Flows</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="debugging-message-processing.html">Debugging Message Processing</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="debugging-the-loan-broker-example-application.html">Debugging the Loan Broker Example Application</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="adding-and-managing-alerts-and-slas.html">Adding and Managing Alerts and SLAs</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="defining-slas-and-alerts.html">Defining SLAs and Alerts</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="setting-up-alert-destinations-and-notifications.html">Setting Up Alert Destinations and Notifications</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="analyzing-business-events.html">Analyzing Business Events</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="tracking-and-querying-business-events.html">Tracking and Querying Business Events</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="business-events-use-cases.html">Business Events Use Cases</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="managing-mule-high-availability-ha-clusters.html">Managing Mule High Availability (HA) Clusters</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="configuring-mule-ha-clustering.html">Configuring Mule HA Clustering</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="creating-or-disbanding-a-cluster.html">Creating or Disbanding a Cluster</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="deploying-redeploying-or-undeploying-an-application-to-or-from-a-cluster.html">Deploying, Redeploying, or Undeploying an Application To or From a Cluster</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="dynamically-adding-or-removing-nodes-in-a-cluster.html">Dynamically Adding or Removing Nodes in a Cluster</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="monitoring-a-cluster.html">Monitoring a Cluster</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="working-with-logs.html">Working with Logs</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="accessing-server-logs.html">Accessing Server Logs</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="audit-logs.html">Audit Logs</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="automating-tasks-using-scripts.html">Automating Tasks Using Scripts</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="scripting-examples.html">Scripting Examples</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="customizing-the-dashboard.html">Customizing the Dashboard</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="using-the-management-console-for-performance-tuning.html">Using the Management Console for Performance Tuning</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="working-with-alerts.html">Working With Alerts</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="working-with-flows.html">Working with Flows</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="maintaining-the-server-application-repository.html">Maintaining the Server Application Repository</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="analyzing-flow-processing-and-payloads.html">Analyzing Flow Processing and Payloads</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="using-the-management-console-api.html">Using the Management Console API</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="rest-api-reference.html">REST API Reference</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="clusters.html">Clusters</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="deployments.html">Deployments</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="repository-of-applications.html">Repository of Applications</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="server-groups.html">Server Groups</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="servers.html">Servers</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="user-groups.html">User Groups</a>
                              </li>
                          </ul>
                      </li>
                  </ul>
              </li>
          </ul>
      </div>
    </nav>
  </div>
  <article class="primary-content">
    <header class="article-header">
      <div class="breadcrumb">
        <strong class="breadcrumb-item">[ Domain Selector Placeholder ]</strong> /
        <span class="breadcrumb-item">Persisting MMC 3.4.2 Data to Oracle</span>
      </div>
      <div class="edit-on-github">
        <a href="https://github.com/ede65566-docs-migration/mule-management-console-docs/edit/v3.4/modules/ROOT/content/persisting-mmc-3.4.2-data-to-oracle.adoc" class="edit-on-github-link">Edit on Github</a>
      </div>
    </header>
    <h1>Persisting MMC 3.4.2 Data to Oracle</h1>
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><strong><em>MMC Version 3.4.2 and Later</em></strong></p>
</div>
<div class="paragraph">
<p>This document describes how to persist environment and transaction data to Oracle databases. Follow the instructions to <a href="#installing-the-oracle-database">Installing the Oracle Database</a>, then follow the specific instructions for <a href="#persisting-environment-data">Persisting Environment Data</a> or <a href="#persisting-transaction-data">Persisting Transaction Data</a> persistence to set up your user, create your database, and configure your MMC instance to persist your data.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Remember that <strong>environment data and transaction data must exist in two separate databases</strong> (regardless of whether they are on the same server or use the same platform).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Jump to:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><a href="#persisting-environment-data">Persisting Environment Data</a></strong></p>
</li>
<li>
<p><strong><a href="#persisting-transaction-data">Persisting Transaction Data</a></strong></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assumptions"><a class="anchor" href="#assumptions"></a>Assumptions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document assumes that you have an understanding of the basic <a href="architecture-of-the-mule-management-console.html">Architecture of the Mule Management Console</a>.</p>
</div>
<div class="paragraph">
<p>It also assumes that you have installed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>MMC Version 3.4.2</strong>. Download it from the <a href="http://www.mulesoft.com/support-login">customer portal</a> if you need to upgrade to this version.</p>
</li>
<li>
<p><strong>a</strong> <strong>Web application server such as Tcat, Tomcat, or JBoss</strong>. Please refer to the <a href="../../mule-runtime/3.4/install/hardware-and-software-requirements.html">Hardware and Software Requirements</a> for the latest information about hardware requirements and supported application servers, Java Runtime Environments, and browsers.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For practical purposes, this document mentions Tomcat as the servlet container; however, the instructions contained here apply also to Tcat or JBoss. If using Tcat or JBoss, make sure to unpack the Management Console .war file in the appropriate directory. For additional information, see <a href="installing-the-production-version-of-mmc.html">Installing the Production Version of MMC</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In this document, <code>&lt;MMC_HOME&gt;</code> refers to the directory where MMC is installed.</p>
</div>
<div class="paragraph">
<p>If you are using the trial version, this is <code>&lt;Mule install path&gt;/mmc/webapps/mmc</code>. For example <code>/opt/mule/mule-enterprise-3.4.1/mmc/webapps/mmc</code>.</p>
</div>
<div class="paragraph">
<p>If you are using an application server such as Tomcat, this should be similar to <code>&lt;Tomcat root&gt;/webapps/mmc-console-3.4.1.</code> For example <code>/var/lib/tomcat6/webapps/mmc-console-3.4.1</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installing-the-oracle-database"><a class="anchor" href="#installing-the-oracle-database"></a>Installing the Oracle Database</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following example uses Oracle Database Express Edition 11.*. The installation outlined is basic: the database server is installed on the local machine, listening on the default port with security deactivated (unsecured connection to the database).</p>
</div>
<div class="sect2">
<h3 id="tools"><a class="anchor" href="#tools"></a>Tools</h3>
<div class="ulist">
<ul>
<li>
<p>SQL Developer 3.0.04:<br></p>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.oracle.com/technetwork/developer-tools/sql-developer/downloads/index.html">Download the latest version</a></p>
</li>
<li>
<p>Consult the <a href="http://docs.oracle.com/cd/E25259_01/doc.31/e26419/toc.htm">installation guides for Linux and Windows</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Oracle Database Express Edition 11.x:<br></p>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.oracle.com/technetwork/products/express-edition/downloads/index.html">Download the latest version</a></p>
</li>
<li>
<p>Consult the <a href="http://docs.oracle.com/cd/E17781_01/index.htm">installation guides for Linux and Windows</a></p>
</li>
<li>
<p>Refer to the <a href="http://www.oracle.com/pls/db112/homepage">full documentation library</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>Important!</strong><br>
<br>
Do not attempt to run SQL Developer with JDK 1.7. Even though the SQL installation guide lists “JDK 1.6.11 or later” as suitable for installation, attempting to run SQL Developer with JDK 1.7. results in a warning message and malformed SQL code from SQL Developer.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="installing-sql-developer"><a class="anchor" href="#installing-sql-developer"></a>Installing SQL Developer</h3>
<div class="paragraph">
<p>Follow the simple instructions provided by the documentation listed <a href="#tools">Tools</a> to decompress the installer and run the executable for SQL Developer.</p>
</div>
</div>
<div class="sect2">
<h3 id="installing-oracle-express"><a class="anchor" href="#installing-oracle-express"></a>Installing Oracle Express</h3>
<div class="paragraph">
<p>Oracle Express provides a straightforward graphical installer for Windows and an <code>.rpm</code> package for Linux. Simply follow the instructions provided by the documentation listed <a href="#tools">Tools</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Both Windows and Linux require you to have administrator privileges in order to install Oracle Express.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="configuration-files"><a class="anchor" href="#configuration-files"></a>Configuration Files</h3>
<div class="paragraph">
<p>The files <code>listener.ora</code> and <code>tnsnames.ora</code> are automatically generated during installation.</p>
</div>
<div class="paragraph">
<p>For Linux, these files typically reside at: <code>/u01/app/oracle/product/11.2.0/xe/network/admin</code>.</p>
</div>
<div class="paragraph">
<p>On Windows, <code>listener.ora</code> and <code>tnsnames.ora</code> typically reside at: <code>C:\oraclexe\app\oracle\product\11.2.0\server\network\admin</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text"># listener.ora Network Configuration File:
SID_LIST_LISTENER =
    (SID_LIST =
        (SID_DESC =
             (SID_NAME = PLSExtProc)
             (ORACLE_HOME = /u01/app/oracle/product/11.2.0/xe)
             (PROGRAM = extproc)
         )
    (SID_DESC =
        (SID_NAME = CLRExtProc)
        (ORACLE_HOME = /u01/app/oracle/product/11.2.0/xe)
        (PROGRAM = extproc)
    )
    (SID_DESC =
        (SID_NAME = XE)
        (ORACLE_HOME = /u01/app/oracle/product/11.2.0/xe)
    )
)

LISTENER =
    (DESCRIPTION_LIST =
        (DESCRIPTION =
            (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))
            (ADDRESS = (PROTOCOL = TCP)(HOST = 0.0.0.0)(PORT = 1521))
        )
    )

DEFAULT_SERVICE_LISTENER = (XE)</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Click for a listing of tnsnames.ora</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text"># tnsnames.ora Network Configuration File:

XE =
    (DESCRIPTION =
        (ADDRESS = (PROTOCOL = TCP)(HOST = 0.0.0.0)(PORT = 1521))
        (CONNECT_DATA =
            (SERVER = DEDICATED)
            (SERVICE_NAME = XE)
        )
    )

EXTPROC_CONNECTION_DATA =
    (DESCRIPTION =
        (ADDRESS_LIST =
            (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))
        )
    (CONNECT_DATA =
        (SID = PLSExtProc)
        (PRESENTATION = RO)
    )
)

ORACLR_CONNECTION_DATA =
    (DESCRIPTION =
        (ADDRESS_LIST =
           (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))
     )
    (CONNECT_DATA =
        (SID = CLRExtProc)
        (PRESENTATION = RO)
    )
)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>HOST</code> value, MuleSoft recommends a static IP address (for example, <code>192.168.1.10</code>), or the <code>0.0.0.0</code> address. MuleSoft further recommends against using <code>localhost</code> or a hostname for <code>HOST</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Be aware that, if the file <code>slqnet.ora</code> exists (usually in <code>/app/oracle/product/11.2.0/xe/network/admin</code>), it may contain some options which have been known to cause problems. For example, unless you are fine-tuning the database, you should disable NFS security integration by including the following parameter: <code>SQLNET.AUTHENTICATION_SERVICES = (NONE)</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="persisting-environment-data"><a class="anchor" href="#persisting-environment-data"></a>Persisting Environment Data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To set up an Oracle database to persist your MMC environment data, you need to complete three steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the database user and connection</p>
</li>
<li>
<p>Set up the database tables</p>
</li>
<li>
<p>Set up MMC</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The embedded database files for the Mule Management Console reside at:</p>
</div>
<div class="paragraph">
<p><code>&lt;MMC installation path&gt;/.mule/mmc/mmc-data/db</code></p>
</div>
<div class="paragraph">
<p>After you configure MMC to use an external database to store its persistent data, do not delete the <code>mmc-data</code> folder. The <code>db</code> subfolder will not be used anymore, but the <code>repository</code>, <code>version</code> and <code>workspaces</code> subfolders will be in use by Java Content Repository (JCR) internal settings.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="creating-the-database-user-and-connection"><a class="anchor" href="#creating-the-database-user-and-connection"></a>Creating the Database User and Connection</h3>
<div class="paragraph">
<p>To use the SQL Developer GUI to create the database user, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Launch SQL Developer:<br></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Navigate to <code>&lt;sqldeveloper install&gt;/sqldeveloper</code></p>
</li>
<li>
<p>Launch SQL Developer according to your operating system:</p>
<div class="ulist">
<ul>
<li>
<p>On Linux and Mac OS X, run the <code>sqldeveloper.sh</code> shell script</p>
</li>
<li>
<p>On Windows, launch <code>sqldeveloper.exe</code></p>
<div class="paragraph">
<p>If SQL developer asks for the full Java path, enter the full path. Typical Java paths are:<br></p>
</div>
</li>
<li>
<p>Linux: <code>/usr/java/jdk1.6.0_31/bin</code></p>
</li>
<li>
<p>Windows: <code>C:\Program Files\Java\jdk1.6.0_31\bin</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>In SQL Developer, create a new database connection:<br></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Display the <strong>New/Select Database connection</strong> dialog box. To do so, follow these steps:<br></p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Click the <strong>Connections</strong> tab in the left-hand pane.</p>
</li>
<li>
<p>Right-click <strong>Connections</strong>.</p>
</li>
<li>
<p>Select <strong>New Connec</strong> <strong>tion</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>In the connection <strong>Name</strong> field, enter: <code>mmc_persistency_status</code>.</p>
</li>
<li>
<p>In the <strong>Username</strong> field, enter: <code>SYSTEM</code>.</p>
</li>
<li>
<p>In the <strong>Password</strong> field, enter the SYSTEM password that you issued during the Oracle Express installation process.</p>
</li>
<li>
<p>In the <strong>Hostname</strong> field, ensure that the hostname is correct (it will be <code>localhost</code>, if Oracle is installed on the local machine).</p>
</li>
<li>
<p>In the <strong>SID</strong> field, enter <code>xe</code>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Verify the connection by clicking <strong>Test</strong>. After testing, verify that the message <code>Status: Success</code> appears near the bottom of the dialog box.</p>
</li>
<li>
<p>Click <strong>Save</strong> to save the connection settings you have specified.</p>
</li>
<li>
<p>Click <strong>Connect</strong>, then expand the connection elements menu by clicking the plus sign next to the name of your connection on the <strong>Connections</strong> tab.</p>
</li>
<li>
<p>Create a new database user by following these steps:<br></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Right-click <strong>Other Users,</strong> then select <strong>Create User</strong> to display the <strong>Create/Edit User</strong> dialog box.</p>
</li>
<li>
<p>Complete the fields with the required information. The following provide sample guidance:</p>
<div class="ulist">
<ul>
<li>
<p>User Name: <code>MMC_STATUS</code></p>
</li>
<li>
<p>New Password: <code>mmc123</code></p>
</li>
<li>
<p>Default Tablespace: <code>USERS</code></p>
</li>
<li>
<p>Temporary Tablespace: <code>TEMP</code></p>
</li>
<li>
<p>Roles tab: <code>RESOURCE</code>, <code>CONNECT</code></p>
</li>
<li>
<p>System Privileges tab: <code>CREATE TRIGGER</code>, <code>CREATE TABLE</code>, <code>CREATE SEQUENCE</code></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This setup was tested using an unlimited quota on the USERS tablespace.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Click <strong>Apply</strong>, then click <strong>Close</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="setting-up-the-database-tables"><a class="anchor" href="#setting-up-the-database-tables"></a>Setting Up the Database Tables</h3>
<div class="paragraph">
<p>On the first run, JCR automatically creates all the tables needed to store persistent MMC information. However, you must manually create tables that store Quartz job information; otherwise an error similar to the following will occur:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">ERROR: relation “qrtz_locks” does not exist.</code></pre>
</div>
</div>
<div class="paragraph">
<p>To create and insert the tables, follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to <code>&lt;MMC_HOME&gt;/</code> WEB-INF/classes/quartz.</p>
</li>
<li>
<p>Locate the SQL script <code>tables_oracle.sql</code>.</p>
</li>
<li>
<p>Execute <code>tables_oracle.sql</code> on the target database as user <code>MMC_STATUS</code>.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Use the sqlplus utility to execute tables_oracle.sql</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To run <code>tables_oracle.sql</code> using the <code>sqlplus</code> utility, complete one of the following steps depending on your operating system:<br></p>
<div class="ulist">
<ul>
<li>
<p><strong>Windows:</strong> From the Windows Start menu: Select <strong>Programs</strong> (or All Programs) &gt; <strong>Oracle Database Express 11g Edition</strong> &gt; <strong>Run SQL Command Line</strong>. This will open the <code>sqlplus</code> command prompt.</p>
</li>
<li>
<p><strong>In Linux:</strong> Open the appropriate menu (for example <strong>Applications</strong> in Gnome, or the <strong>K</strong> menu in KDE), then select <strong>Oracle Database 11g Express Edition</strong>, then <strong>Run SQL Command Line</strong>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>After the <code>sqlplus</code> command prompt opens, type: <code>connect MMC_STATUS/mmc123@XE</code></p>
</li>
<li>
<p>Run the <code>tables_oracle.sql</code> script by entering the following:<br></p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">start &lt;path to script&gt;/tables_oracle.sql</code></pre>
</div>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>To exit <code>sqlplus</code>, type: <code>exit</code></p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For detailed information about the <code>sqlplus</code> command, consult the <a href="http://docs.oracle.com/cd/E11882_01/server.112/e16604/qstart.htm#SQPUG002">SQL*Plus Reference Guide</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>At this point, the Oracle database is completely defined.</p>
</div>
</div>
<div class="sect2">
<h3 id="setting-up-mmc-to-use-oracle-for-persisting-environment-data"><a class="anchor" href="#setting-up-mmc-to-use-oracle-for-persisting-environment-data"></a>Setting Up MMC to Use Oracle for Persisting Environment Data</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>First, install the appropriate <a href="#drivers">Drivers</a>.</p>
</li>
<li>
<p>Then, follow the instructions below for editing the following configuration files:</p>
<div class="ulist">
<ul>
<li>
<p><a href="#Modifying web.xml">[Modifying web.xml]</a></p>
</li>
<li>
<p><a href="#Modifying mmc-oracle.properties">[Modifying mmc-oracle.properties]</a></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="drivers"><a class="anchor" href="#drivers"></a>Drivers</h4>
<div class="paragraph">
<p>Obtain the appropriate drivers using the links below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html">ojdbc5.jar</a></p>
</li>
<li>
<p><a href="http://repo1.maven.org/maven2/org/quartz-scheduler/quartz-oracle/1.8.5/quartz-oracle-1.8.5.jar">quartz-oracle-1.8.5.jar</a></p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The quartz Oracle jar must match the library version provided for quartz (i.e., <code>quartz-1.8.5.jar</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Copy the Oracle drivers to the following directory: <code>&lt;MMC_HOME&gt;/ WEB-INF/lib.</code></p>
</div>
</div>
<div class="sect3">
<h4 id="general-setup"><a class="anchor" href="#general-setup"></a>General Setup</h4>
<div class="paragraph">
<p>This example uses the parameters employed for setting up the Oracle database earlier in this document.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Oracle is listening on <code>localhost</code>, port <code>1521</code>, with SID: <code>XE</code></p>
</li>
<li>
<p>User: <code>MMC_STATUS</code></p>
</li>
<li>
<p>Password: <code>mmc123</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="mmc-configuration"><a class="anchor" href="#mmc-configuration"></a>MMC Configuration</h4>
<div class="paragraph">
<p>Configuring MMC to store data on an Oracle databse involves two basic tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Modifying the file <code>web.xml</code> to tell MMC to use Oracle instead of its default database</p>
</li>
<li>
<p>Modifying the file <code>mmc-oracle.properties</code> to set the parameters for connecting to the Oracle database</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="modifying-code-web-xml-code"><a class="anchor" href="#modifying-code-web-xml-code"></a>Modifying <code>web.xml</code></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the directory <code>&lt;MMC_HOME&gt;/WEB-INF</code>, locate the file <code>web.xml</code>, then open it for editing.</p>
</li>
<li>
<p>Locate the <code>spring.profiles.active</code> section, shown below.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;context-param&gt;
&lt;param-name&gt;spring.profiles.active&lt;/param-name&gt;
&lt;param-value&gt;tracking-h2,env-derby&lt;/param-value&gt;
&lt;/context-param&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Delete the string <code>env-derby</code>, then replace it with <code>env-oracle</code>, as shown below.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;context-param&gt;
&lt;param-name&gt;spring.profiles.active&lt;/param-name&gt;
&lt;param-value&gt;tracking-h2,env-oracle&lt;/param-value&gt;
&lt;/context-param&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>If you are also planning to <a href="#persisting-transaction-data">Persisting Transaction Data</a> to Oracle, delete the string <code>tracking-h2</code> and replace it with <code>tracking-oracle</code>.</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The <code>spring.profiles.active</code> section in the <code>web.xml</code> configuration file allows you to define what external databases are used for storing environment and/or tracking data. For a quick instructions for all supported database servers, see <a href="configuring-mmc-3.4.2-for-external-databases-quick-reference.html">Configuring MMC 3.4.2 for External Databases - Quick Reference</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="modifying-code-mmc-oracle-properties-code"><a class="anchor" href="#modifying-code-mmc-oracle-properties-code"></a>Modifying <code>mmc-oracle.properties</code></h5>
<div class="paragraph">
<p>In the directory <code>&lt;MMC_HOME&gt;/WEB-INF/classes/META-INF/databases</code>, locate the file <code>mmc-oracle.properties</code>, then open it for editing.</p>
</div>
<div class="paragraph">
<p>The table below lists the settings contained in the file. Modify the values as needed. In general, the only values that you should need to modify are <code>env.username</code>, <code>env.password</code>, <code>env.host</code>, <code>env.port</code> and <code>env.dbschema</code>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 34%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>env.driver</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Driver to use for connecting to the database</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oracle.jdbc.driver.OracleDriver</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>env.script</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Script to use for creating the tables in the target database</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oracle</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>env.username</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mmc_status</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>env.password</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password for the database user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mmc123</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>env.host</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hostname or IP address where the database server is listening</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>localhost</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>env.port</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port where the database server is listening</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1521</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>env.url</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL for connecting to the database</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jdbc:oracle:thin:${env.username}/${env.password}@${env.host}:${env.port}/${env.servicename}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>env.servicename</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service name for connecting to the external database</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>XEXDB</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="removing-local-database-files"><a class="anchor" href="#removing-local-database-files"></a>Removing Local Database Files</h3>
<div class="paragraph">
<p>For the configuration changes to take effect, before launching MMC you need to delete the local database files that MMC uses by default.</p>
</div>
<div class="paragraph">
<p>In the root directory of your Web application server, locate the <code>mmc-data</code> directory (for example, <code>/var/lib/tomcat6/mmc-data</code>), then delete the <code>mmc-data</code> directory.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Before you delete <code>mmc-data</code>, make a backup copy of this directory and store it in a safe location. If anything goes wrong with your new database configuration, you can use <code>mmc-data</code> to restore the old database configuration while you troubleshoot your new database config in a test environment.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>At this point, MMC, is configured to store environment data on the external Oracle database that you specified.</p>
</div>
</div>
<div class="sect2">
<h3 id="disaster-recovery-of-environment-data"><a class="anchor" href="#disaster-recovery-of-environment-data"></a>Disaster Recovery of Environment Data</h3>
<div class="paragraph">
<p>Out of the box, MMC stores persistent state data in the folder <code>&lt;Mule install path&gt;/.mule/mmc/mmc-data</code>. If for some reason database files become corrupted, you’ll probably have to delete <code>mmc-data</code> and start from scratch, unless you have a backup copy of <code>mmc-data</code>. But having a backup copy of <code>mmc-data</code> does not cover a catastrophic failure with complete data loss on the MMC host itself, nor does it allow for an active-passive configuration for immediate recovery.</p>
</div>
<div class="paragraph">
<p>One possible solution is to backup the database to a single file, which can then be copied to another machine. If the need for immediate recovery arises, you can use this file to restore the database to its original state.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When you restore MMC to a previous state, be aware of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You are restoring MMC state data, which is not related to the persistence of Business Events, which use a completely different mechanism to store data.</p>
</li>
<li>
<p>Registered servers at the time of the backup are restored, which means that one of the following situations may arise:<br></p>
<div class="ulist">
<ul>
<li>
<p>A server is paired to another Mule instance. In this case, “unpair” the server through MMC, then re-pair it. This can affect deployments and server groups.</p>
</li>
<li>
<p>A server does not exist anymore. Unpair the server.</p>
</li>
<li>
<p>Another server is using the same IP and port as the original server. Try to identify the original server’s current IP and port, then re-pair.</p>
</li>
<li>
<p>A server is correctly connected, but after the backup, deployed and/or undeployed apps are not shown or are shown incorrectly. Undeploy/Redeploy as needed to eliminate the unreconciled state.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This scenario assumes the following conditions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Oracle Xpress 11.x</p>
</li>
<li>
<p>The database has already been created, including the following data tables:<br></p>
<div class="ulist">
<ul>
<li>
<p>User: <code>MMC_STATUS</code></p>
</li>
<li>
<p>Permissions:<br></p>
<div class="ulist">
<ul>
<li>
<p><code>EXP_FULL_DATABASE</code></p>
</li>
<li>
<p><code>IMP_FULL_DATABASE</code></p>
</li>
<li>
<p><code>DBA</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Tool to access database: SQL Developer 3.0.04</p>
</li>
<li>
<p>Tool for backup: <code>exp</code> (bundled with the binaries of the Oracle distribution package)</p>
</li>
<li>
<p>Tool for restore: <code>imp</code> (bundled with the binaries of the Oracle distribution package)</p>
</li>
<li>
<p>Arbitrary dump file name: <code>OracleMMCDB</code></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="database-backup-procedure"><a class="anchor" href="#database-backup-procedure"></a>Database Backup Procedure</h4>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Tables on the database contain Binary Large Objects (BLOBs). A regular database export using SQL Developer does not export BLOB contents, so when restoring the database those fields are marked as <code>NULL</code> .
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To backup the database, open a terminal and issue the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">exp MMC_STATUS/mmc123 file=OracleMMCDB.dmp full=yes</code></pre>
</div>
</div>
<div class="paragraph">
<p>The file <code>OracleMMCDB.dmp</code> will be created in the same folder where the <code>exp</code> utility resides.</p>
</div>
<div class="paragraph">
<p>For help on <code>exp</code> command parameters run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">exp help=yes</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="database-restore-procedure"><a class="anchor" href="#database-restore-procedure"></a>Database Restore Procedure</h4>
<div class="paragraph">
<p>Open a terminal and run the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">imp MMC_STATUS/mmc123 file=OracleMMCDB.dmp full=yes</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The example assumes that the dump file, <code>OracleMMCDB.dmp</code>, is located in the same folder as the <code>imp</code> utility. If this is not the case, specify the full path to the <code>.dmp</code> file when calling the <code>imp</code> command.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For help on <code>imp</code> command parameters run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">imp help=yes</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>listing of imp output</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">C:\QA\oracle.xe\app\oracle\product\11.2.0\server\bin&gt;imp MMC_STATUS/mmc123 file=someOracleFile.dmp full=yes

Import: Release 11.2.0.2.0 - Production on Thu Mar 29 11:03:29 2012

Copyright (c) 1982, 2009, Oracle and/or its affiliates. All rights reserved.

Connected to: Oracle Database 11g Express Edition Release 11.2.0.2.0 - Production

Export file created by EXPORT:V11.02.00 via conventional path
import done in WE8MSWIN1252 character set and AL16UTF16 NCHAR character set
import server uses AL32UTF8 character set (possible charset conversion)
. importing MMC_STATUS's objects into MMC_STATUS
. . importing table "FILESYSTEM_VERSION_FSENTRY" 1 rows imported
. . importing table "JR_CORE_BINVAL" 0 rows imported
. . importing table "JR_CORE_BUNDLE" 187 rows imported
. . importing table "JR_CORE_NAMES" 0 rows imported
. . importing table "JR_CORE_REFS" 5 rows imported
. . importing table "QRTZ_BLOB_TRIGGERS" 0 rows imported
. . importing table "QRTZ_CALENDARS" 0 rows imported
. . importing table "QRTZ_CRON_TRIGGERS" 2 rows imported
. . importing table "QRTZ_FIRED_TRIGGERS" 0 rows imported
. . importing table "QRTZ_JOB_DETAILS" 2 rows imported
. . importing table "QRTZ_JOB_LISTENERS" 0 rows imported
. . importing table "QRTZ_LOCKS" 5 rows imported
. . importing table "QRTZ_PAUSED_TRIGGER_GRPS" 0 rows imported
. . importing table "QRTZ_SCHEDULER_STATE" 0 rows imported
. . importing table "QRTZ_SIMPLE_TRIGGERS" 0 rows imported
. . importing table "QRTZ_TRIGGERS" 2 rows imported
. . importing table "QRTZ_TRIGGER_LISTENERS" 0 rows imported
. . importing table "REPO_FSENTRY" 8 rows imported
. . importing table "SEARCH_INDEX_FSENTRY" 1 rows imported
. . importing table "SEARCH_INDEX_W_FSENTRY" 1 rows imported
. . importing table "VERSION_BINVAL" 0 rows imported
. . importing table "VERSION_BUNDLE" 3 rows imported
. . importing table "VERSION_NAMES" 0 rows imported
. . importing table "VERSION_REFS" 0 rows imported
. . importing table "WS1_FSENTRY" 1 rows imported
Import terminated successfully without warnings.</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>The listener.ora listing</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">C:\QA\oracle.xe\app\oracle\product\11.2.0\server\bin&gt;imp MMC_STATUS/mmc123 file=
someOracleFile.dmp full=yes

Import: Release 11.2.0.2.0 - Production on Thu Mar 29 11:03:29 2012

Copyright (c) 1982, 2009, Oracle and/or its affiliates.  All rights reserved.

Connected to: Oracle Database 11g Express Edition Release 11.2.0.2.0 - Production

Export file created by EXPORT:V11.02.00 via conventional path
import done in WE8MSWIN1252 character set and AL16UTF16 NCHAR character set
import server uses AL32UTF8 character set (possible charset conversion)
. importing MMC_STATUS's objects into MMC_STATUS
. . importing table   "FILESYSTEM_VERSION_FSENTRY"          1 rows imported
. . importing table               "JR_CORE_BINVAL"          0 rows imported
. . importing table               "JR_CORE_BUNDLE"        187 rows imported
. . importing table                "JR_CORE_NAMES"          0 rows imported
. . importing table                 "JR_CORE_REFS"          5 rows imported
. . importing table           "QRTZ_BLOB_TRIGGERS"          0 rows imported
. . importing table               "QRTZ_CALENDARS"          0 rows imported
. . importing table           "QRTZ_CRON_TRIGGERS"          2 rows imported
. . importing table          "QRTZ_FIRED_TRIGGERS"          0 rows imported
. . importing table             "QRTZ_JOB_DETAILS"          2 rows imported
. . importing table           "QRTZ_JOB_LISTENERS"          0 rows imported
. . importing table                   "QRTZ_LOCKS"          5 rows imported
. . importing table     "QRTZ_PAUSED_TRIGGER_GRPS"          0 rows imported
. . importing table         "QRTZ_SCHEDULER_STATE"          0 rows imported
. . importing table         "QRTZ_SIMPLE_TRIGGERS"          0 rows imported
. . importing table                "QRTZ_TRIGGERS"          2 rows imported
. . importing table       "QRTZ_TRIGGER_LISTENERS"          0 rows imported
. . importing table                 "REPO_FSENTRY"          8 rows imported
. . importing table         "SEARCH_INDEX_FSENTRY"          1 rows imported
. . importing table       "SEARCH_INDEX_W_FSENTRY"          1 rows imported
. . importing table               "VERSION_BINVAL"          0 rows imported
. . importing table               "VERSION_BUNDLE"          3 rows imported
. . importing table                "VERSION_NAMES"          0 rows imported
. . importing table                 "VERSION_REFS"          0 rows imported
. . importing table                  "WS1_FSENTRY"          1 rows imported
Import terminated successfully without warnings.</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="persisting-transaction-data"><a class="anchor" href="#persisting-transaction-data"></a>Persisting Transaction Data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To set up Oracle to persist your MMC transaction data, you need to complete three steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the database user and connection</p>
</li>
<li>
<p>Determine the database quota</p>
</li>
<li>
<p>Set up MMC</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="creating-the-database-user-and-connection-2"><a class="anchor" href="#creating-the-database-user-and-connection-2"></a>Creating the Database User and Connection</h3>
<div class="paragraph">
<p>You can create the database user and connection using the SQL Developer GUI. The procedure is described in this document, in the <a href="#persisting-environment-data">Persisting Environment Data</a> section. There you will find detailed instructions for launching SQL Developer and using it to create the database user and connection.</p>
</div>
<div class="paragraph">
<p>Using those instructions as reference, open the <strong>New/Select Database</strong> <strong>connection</strong> dialog box, then create a new database user and connection with the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Connection name:</strong> <code>mmc_persistency_tracking</code></p>
</li>
<li>
<p><strong>Username:</strong> <code>SYSTEM</code></p>
</li>
<li>
<p><strong>Password:</strong> The password that you issued during the Oracle Express Installation Process</p>
</li>
<li>
<p><strong>Hostname:</strong> Hostname of the machine where the Oracle server is installed</p>
</li>
<li>
<p><strong>SID:</strong> <code>xe</code></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="verify-and-save-the-connection"><a class="anchor" href="#verify-and-save-the-connection"></a>Verify and Save the Connection</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click <strong>Test</strong> to verify the connection. After testing, verify that the message <code>Status: Success</code> appears near the bottom of the dialog box.</p>
</li>
<li>
<p>Click <strong>Save</strong> to save the connection settings you have specified.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="configure-the-connection"><a class="anchor" href="#configure-the-connection"></a>Configure the Connection</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click <strong>Connect</strong>, then expand the connection elements menu by clicking the plus sign next to the name of your connection on the <strong>Connections</strong> tab.</p>
</li>
<li>
<p>Right-click <strong>Other Users,</strong> then select <strong>Create User</strong> to display the <strong>Create/Edit User</strong> dialog box.</p>
</li>
<li>
<p>Complete the fields with the required information. The following provide sample guidance:<br></p>
<div class="ulist">
<ul>
<li>
<p>User Name: <code>TRACKER</code></p>
</li>
<li>
<p>New Password: <code>tracker</code></p>
</li>
<li>
<p>Default Tablespace: <code>USERS</code></p>
</li>
<li>
<p>Temporary Tablespace: <code>TEMP</code></p>
</li>
<li>
<p>Roles tab: <code>RESOURCE</code>, <code>CONNECT</code></p>
</li>
<li>
<p>System Privileges tab: <code>CREATE ANY CONTEXT</code>, <code>CREATE ANY TABLE</code>, <code>CREATE ANY SEQUENCE</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Apply</strong>, then click <strong>Close</strong>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="determining-database-quota"><a class="anchor" href="#determining-database-quota"></a>Determining Database Quota</h3>
<div class="paragraph">
<p>Database size will, of course, vary greatly depending on usage, and the database quota should be determined while taking into account the actual usage on the environment. One way to do this is by performing load tests and extrapolating the results to actual usage over a period of time.</p>
</div>
<div class="paragraph">
<p>To determine the actual size of the database, launch Oracle&#8217;s <code>sqlplus</code> utility (see below) and run the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">select sum(bytes) from user_segments;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Details on using the sqlplus utility to run commands</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Access the Oracle Express menu by completing one of the following steps, depending on your operating system:<br></p>
<div class="ulist">
<ul>
<li>
<p>On Windows: From the Windows Start menu: To open the <strong>sqlplus</strong> command prompt, select <strong>Programs</strong> (or All Programs) &gt; <strong>Oracle Database Express 11g Edition</strong> &gt; <strong>Run SQL Command Line</strong>.</p>
</li>
<li>
<p>On Linux: Open the appropriate menu (for example, <strong>Applications</strong> in Gnome, or the <strong>K</strong> menu in KDE), select <strong>Oracle Database 11g Express Edition</strong>, then select <strong>Run SQL Command Line</strong>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>After the <code>sqlplus</code> command prompt opens, type: <code>connect TRACKER/tracker@XE</code> (in this example, <code>TRACKER</code> is the user and <code>tracker</code> is the password)</p>
</li>
<li>
<p>Run the command <code>select sum(bytes) from user segments;</code></p>
</li>
<li>
<p>To exit <code>sqlplus</code>, type: <code>exit</code></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For detailed information about the <code>sqlplus</code> command, consult the <a href="http://docs.oracle.com/cd/E11882_01/server.112/e16604/qstart.htm#SQPUG002">SQL*Plus Reference Guide</a>.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Output should be similar to the following.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">SQL&gt; connect TRACKER/tracker @XE
Connected.
SQL&gt; select sum(bytes) from user_segments;

SUM(BYTES)
----------
    5832704

SQL&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This indicates that the current database size is 5.83 MB.</p>
</div>
</div>
<div class="sect2">
<h3 id="setting-up-mmc-to-use-oracle-for-persisting-transaction-data"><a class="anchor" href="#setting-up-mmc-to-use-oracle-for-persisting-transaction-data"></a>Setting Up MMC to Use Oracle for Persisting Transaction Data</h3>
<div class="sect3">
<h4 id="installing-the-database-driver"><a class="anchor" href="#installing-the-database-driver"></a>Installing the Database Driver</h4>
<div class="paragraph">
<p>The driver is <code>ojdbc5.jar</code>. <a href="http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html">Download</a> the driver, then copy the <code>ojdbc5.jar</code> file to the directory  <code>&lt;MMC_HOME&gt;/WEB-INF/lib/.</code></p>
</div>
</div>
<div class="sect3">
<h4 id="mmc-configuration-2"><a class="anchor" href="#mmc-configuration-2"></a>MMC Configuration</h4>
<div class="paragraph">
<p>Configuring MMC to store Business Events data on a Oracle database involves two basic tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Modifying the file <code>web.xml</code> to tell MMC to use Oracle instead of its default database</p>
</li>
<li>
<p>Modifying the file <code>tracking-persistence-oracle.properties</code> to set the parameters for connecting to the Oracle database</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="modifying-code-web-xml-code-2"><a class="anchor" href="#modifying-code-web-xml-code-2"></a>Modifying <code>web.xml</code></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the directory <code>&lt;MMC_HOME&gt;/WEB-INF</code>, locate the file <code>web.xml</code>, then open it for editing.</p>
</li>
<li>
<p>Locate the <code>spring.profiles.active</code> section, shown below.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;context-param&gt;
&lt;param-name&gt;spring.profiles.active&lt;/param-name&gt;
&lt;param-value&gt;tracking-h2,env-derby&lt;/param-value&gt;
&lt;/context-param&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Delete the string <code>tracking-h2</code>, then replace it with <code>tracking-oracle</code>, as shown below.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;context-param&gt;
&lt;param-name&gt;spring.profiles.active&lt;/param-name&gt;
&lt;param-value&gt;tracking-oracle,env-derby&lt;/param-value&gt;
&lt;/context-param&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>If you are also planning to <a href="#persisting-environment-data">Persisting Environment Data</a> to Oracle, delete the string <code>env-derby</code> and replace it with <code>env-oracle</code>.</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The <code>spring.profiles.active</code> section in the <code>web.xml</code> configuration file allows you to define what external databases are used for storing environment and/or tracking data. For a quick instructions for all supported database servers, see <a href="configuring-mmc-3.4.2-for-external-databases-quick-reference.html">Configuring MMC 3.4.2 for External Databases - Quick Reference</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="modifying-code-tracking-persistence-oracle-properties-code"><a class="anchor" href="#modifying-code-tracking-persistence-oracle-properties-code"></a>Modifying <code>tracking-persistence-oracle.properties</code></h4>
<div class="paragraph">
<p>In the directory <code>&lt;MMC_HOME&gt;/WEB-INF/classes/META-INF/databases</code>, locate the file <code>tracking-persistence-oracle.properties</code>, then open it for editing.</p>
</div>
<div class="paragraph">
<p>Modify the included settings as needed, according to the table below. In general, the only values that you should need to modify are <code>mmc.tracking.db.username</code>, <code>mmc.tracking.db.password</code>, <code>mmc.tracking.db.host</code>, <code>mmc.tracking.db.port</code> and <code>mmc.tracking.db.servicename</code>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 34%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mmc.tracking.db.platform</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of database server to connect to</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oracle(DriverVendor=oracle)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mmc.tracking.db.driver</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Driver to use for connecting to the database</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oracle.jdbc.driver.OracleDriver</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mmc.tracking.db.host</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hostname or IP address where the database server is listening</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>localhost</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mmc.tracking.db.port</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port where the database server is listening</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1521</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mmc.tracking.db.url</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL for connecting to the database</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>jdbc:oracle:thin:@${mmc.tracking.db.host}:
${mmc.tracking.db.port}
/${mmc.tracking.db.servicename}</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mmc.tracking.db.username</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mmc_tracking</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mmc.tracking.db.password</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password for the database user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mmc123</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mmc.tracking.db.servicename</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service name for connecting to the external database</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>XEXB</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mmc.max.events.exception.details.length</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of characters from a Business Events exception that will be stored in the tracking database. The maximum allowed is 261120.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>8000</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Save the file with your modifications, if any.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="removing-local-database-files-2"><a class="anchor" href="#removing-local-database-files-2"></a>Removing Local Database Files</h3>
<div class="paragraph">
<p>For the configuration changes to take effect, before launching MMC you need to delete the local database files that MMC uses by default.</p>
</div>
<div class="paragraph">
<p>In the root directory of your Web application server, locate the <code>mmc-data</code> directory (for example, <code>/var/lib/tomcat6/mmc-data</code>), then delete the <code>mmc-data</code> directory.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Before you delete <code>mmc-data</code>, make a backup copy of this directory and store it in a safe location. If anything goes wrong with your new database configuration, you can use <code>mmc-data</code> to restore the old database configuration while you troubleshoot your new database config in a test environment.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>At this point, MMC, is configured to store tracking data on the external Oracle database that you specified.</p>
</div>
<div class="sect3">
<h4 id="troubleshooting-tips"><a class="anchor" href="#troubleshooting-tips"></a>Troubleshooting Tips</h4>
<div class="paragraph">
<p>Error message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">ORA-12519, TNS:no appropriate service handler found</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you get this error message, you will need to run the SQL command provided below, then restart the TNS listener.</p>
</div>
<div class="paragraph">
<p>As user SYS, run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">ALTER SYSTEM SET PROCESSES= 150 SCOPE=SPFILE;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To run the SQL command, you can use the <code>sqlplus</code> utility, as explained above.</p>
</div>
<div class="paragraph">
<p>To restart your TNS listener:</p>
</div>
<div class="paragraph">
<p>On Windows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in as the user who installed Oracle Database Express, then open a DOS terminal.</p>
</li>
<li>
<p>Check the status of the TNS Listener by running the following command: <code>LSNRCTL STATUS</code></p>
</li>
<li>
<p>To stop the TNS Listener, run <code>LSNRCTL STOP</code></p>
</li>
<li>
<p>To start the TNS Listener, run <code>LSNRCTL START</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>On Unix/Linux:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to the <code>oracle</code> system user, for example by running the command <code>su - oracle</code>.</p>
</li>
<li>
<p>Set the appropriate environment variables by performing these steps:<br></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Navigate to the <code>bin</code> directory of the Oracle installation (typically, <code>/u01/app/oracle/product/11.2.0/xe/bin</code>).</p>
</li>
<li>
<p>Run the command <code>source oracle_env.sh</code>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>After setting environment variables, check the TNS listener status by running <code>lsnrctl status</code></p>
</li>
<li>
<p>To stop the TNS listener, run <code>lsnrctl stop</code></p>
</li>
<li>
<p>To start the TNS listener, run <code>lsnrctl start</code></p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="see-also"><a class="anchor" href="#see-also"></a>See Also</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Read more about <a href="setting-up-mmc.html">MMC setup</a>.</p>
</li>
<li>
<p>Review the <a href="architecture-of-the-mule-management-console.html">Architecture of the Mule Management Console</a>.</p>
</li>
</ul>
</div>
</div>
</div>
  </article>
</main>
<footer class="footer"><div class="footer__wrapper">
      <div class="footer__top">
              </div>
      <div class="footer-bottom-wrapper">
        <!--<a href="/" title="Home" rel="home" class="header__logo" id="logo"><img src="/sites/all/themes/muletheme/images/mule_logo.svg" alt="Home" class="header__logo-image" /></a>-->
        <div class="connect-footer">
          <p>Sign up for our Dev newsletter</p>
          <div class="connect-footer">

</div>
  </div>
        <div class="terms-conditions temp">
          <div id="block-menu-menu-footer-bottom-menu" class="block block-menu contextual-links-region first last odd" role="navigation">
            <ul class="menu"><li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/" class="menu__link">MuleSoft.com</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://blogs.mulesoft.com/" class="menu__link">Blog</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/content/terms-service" class="menu__link">Terms</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/privacy-policy" class="menu__link">Privacy</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/contact" class="menu__link">Contact</a></li>
            </ul></div>
                    <div class="default-terms-conditions">
          </div>
          MuleSoft provides a widely used <a href="https://www.mulesoft.com/platform/enterprise-integration">integration platform</a> for connecting SaaS and enterprise applications in the cloud and on-premise. Delivered as a unified integration experience, <a href="https://www.mulesoft.com/platform/saas/cloudhub-ipaas-cloud-based-integration">CloudHub&trade;</a> and <a href="https://www.mulesoft.com/platform/soa/mule-esb-open-source-esb">Mule ESB&trade;</a> (Enterprise Service Bus) are built on proven open source technology for fast and reliable on-premise and cloud integration without vendor lock-in.


        </div>
      </div>
      <div class="footer-end">
        <div class="footer-logo-wrapper">
          <a href="https://developer.mulesoft.com/" class="footer-logo"></a>
        </div>
        <ul class="social-links"><li><a href="https://www.mulesoft.com/lp/contact" target="_blank" class="icon-muletheme-phone"></a></li>
          <li><a href="https://www.linkedin.com/company/mulesoft" target="_blank" class="icon-muletheme-linkedin"></a></li>
          <li><a href="https://twitter.com/muledev" target="_blank" class="icon-muletheme-twitter"></a></li>
          <li><a href="https://www.facebook.com/MuleSoft" target="_blank" class="icon-muletheme-facebook"></a></li>
          <li><a href="mailto:info@mulesoft.com" target="_blank" class="icon-muletheme-email"></a></li>
          <li><a href="https://videos.mulesoft.com/" target="_blank" class="icon-muletheme-youtube"></a></li>
        </ul><p class="copyright"><span>&copy;2017</span> MuleSoft, INC.</p>
      </div>
    </div>
    </footer><script src="../../_theme/scripts/menu.js"></script>
<script src="../../_theme/scripts/highlight.pack.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>
