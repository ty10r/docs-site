<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="datamapper">
  <link rel="canonical" href="https://ede65566-docs-migration.github.io/docs-site/anypoint-studio/6/mapping-elements-inside-lists.html">
  <link rel="stylesheet" href="../../_theme/stylesheets/theme.css">
  <title>Mapping Elements Inside Lists // MuleSoft Documentation</title>
</head>
<body class="article">
<header class="header" id="header" role="banner"><div class="header__wrapper clearfix">
      <div class="header__logo--primary-nav clearfix">
        <a href="https://docs.mulesoft.com" title="Home" rel="home" class="header__logo" id="logo">
          <img src="../../_theme/images/mulesoft-dev-logo.svg" alt="Home" class="header__logo-image"></a>
          <div class="header__region region region-header">
    <div id="block-system-main-menu" class="block block-menu first last odd" role="navigation">

        <h2 class="block__title block-title">Main Dev Menu</h2>
    
  <ul class="menu"><li class="menu__item is-expanded first expanded"><span class="menu__link">Platform</span><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="https://developer.mulesoft.com/dev/anypoint-studio" title="" class="menu__link">Studio</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/connectors" title="" class="menu__link">Connectors</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/anypoint-exchange" title="" class="menu__link">Exchange</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/design-api" title="" class="menu__link">API Designer</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/api-developer-portal" title="" class="menu__link">API Portal</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/mule-runtime-engine" title="" class="menu__link">Mule runtime engine</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/api-management" title="" class="menu__link">API Manager</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://developer.mulesoft.com/dev/reporting-api-analytics" title="" class="menu__link">API Analytics</a></li>
</ul></li>
<li class="menu__item is-expanded expanded"><span class="menu__link">Resources</span><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="https://developer.mulesoft.com/getting-started/anypoint-platform" class="menu__link">Getting started</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/tutorials-and-howtos" class="menu__link">Tutorials &amp; HowTos</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/webinars-and-videos" title="" class="menu__link">Webinars &amp; Videos</a></li>
<li class="menu__item is-leaf leaf"><a href="http://s2.developer.mulesoft.com/workshops" class="menu__link">Online Workshops</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/integration-books-and-resources" class="menu__link">Books &amp; Whitepapers</a></li>
<li class="menu__item is-leaf leaf"><a href="https://blogs.mulesoft.com/dev/" class="menu__link">Blog</a></li>
<li class="menu__item is-leaf leaf"><a href="https://docs.mulesoft.com" class="menu__link">Documentation</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://training.mulesoft.com" class="menu__link">Training</a></li>
</ul></li>
<li class="menu__item is-expanded expanded"><a href="https://developer.mulesoft.com/community" class="menu__link">Community</a><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="http://forum.mulesoft.org/" class="menu__link">Forums</a></li>
<li class="menu__item is-leaf leaf"><a href="https://meetups.mulesoft.com" class="menu__link">Meetups</a></li>
<li class="menu__item is-leaf leaf"><a href="http://s2.developer.mulesoft.com/" class="menu__link">Contributed Content</a></li>
<li class="menu__item is-leaf leaf"><a href="https://s2.developer.mulesoft.com/jobs.html" class="menu__link">Jobs</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://www.mulesoft.org/jira/browse/MULE" class="menu__link">Issue tracker</a></li>
</ul></li>
<li class="menu__item is-leaf last leaf"><a href="https://developer.mulesoft.com/champions" class="menu__link">Champions</a></li>
</ul></div>
  </div>
      </div> <!-- header__logo--primary-nav -->
      <div class="header__top-wrapper">
        <div class="header__nav-wrapper">
                      <div class="region region-header-top">
    <div id="block-search-form" class="block block-search first last odd" role="search">

      
  
</div>
  </div>
        </div>
        <div class="top-nav-ctas">
          <a class="icon-muletheme-phone" href="https://mulesoft.com/lp/contact" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-contact');"></a>
          <a href="https://anypoint.mulesoft.com/login/#/signup?apintent=dmc_generic" class="try" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-nav');">Try now</a>
          <a href="https://mulesoft.com/" class="dev" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-mscom');">MuleSoft.com</a>
        </div>
      </div> <!-- header__secondary-nav-search -->
    </div> <!-- header__wrapper -->
    <a href="#sidr" id="open-left" class="closed">
    </a>
  </header><main role="main" class="main-wrapper">
  <div class="navigation-wrapper">
    <nav role="navigation" class="navigation">
      <div class="search">
        <input type="text" placeholder="Search the docs" class="search-input" autocomplete="off" autocorrect="off" autocapitalize="off">
      </div>
      <div class="inner-nav">
          <ul class="nav-lst">
              <li class="nav-itm" data-depth="0" data-state="collapsed">
                  <button class="nav-tgl"></button>
                <a class="nav-lnk" href="index.html">Anypoint Studio</a>
                  <ul class="nav-lst">
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="setting-up-your-development-environment.html">Development Environment Setup</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="hardware-and-software-requirements.html">Hardware and Software Requirements</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                  <button class="nav-tgl"></button>
                                <a class="nav-lnk" href="download-and-launch-anypoint-studio.html">Download and Launch Anypoint Studio</a>
                                  <ul class="nav-lst">
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="install-update-items-in-studio.html">Installing Extensions</a>
                                      </li>
                                  </ul>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                  <button class="nav-tgl"></button>
                                <a class="nav-lnk" href="install-update-items-in-studio.html">Studio Update Sites</a>
                                  <ul class="nav-lst">
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="mule-runtime/adding-community-runtime.html">Installing Community Edition of Mule Runtime</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="install-studio-gw.html">Installing API Gateway Runtime</a>
                                      </li>
                                  </ul>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                  <button class="nav-tgl"></button>
                                <a class="nav-lnk" href="maven/using-maven-in-anypoint-studio.html">Using Maven in Studio</a>
                                  <ul class="nav-lst">
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="maven/maven-support-in-anypoint-studio.html">Maven Support in Studio</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="maven/building-a-mule-application-with-maven-in-studio.html">Building Mule Applications with Maven in Studio</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="maven/enabling-maven-support-for-a-studio-project.html">Enabling Maven Support on Studio Projects</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="maven/importing-a-maven-project-into-studio.html">Importing Maven Projects</a>
                                      </li>
                                  </ul>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="studio-in-eclipse.html">Studio in Eclipse</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="using-subversion-with-studio.html">Using Subversion</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="basic-studio-tutorial.html">Basic Studio Tutorial</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="anypoint-studio-features.html">Studio Reference</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                  <button class="nav-tgl"></button>
                                <a class="nav-lnk" href="datasense/datasense.html">DataSense</a>
                                  <ul class="nav-lst">
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="testing-connections.html">Testing Connections</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="using-perceptive-flow-design.html">Using Perceptive Flow Design</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="datasense/datasense-enabled-connectors.html">DataSense-enabled Connectors</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="datasense/using-the-datasense-explorer.html">Using the DataSense Explorer</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="datasense/datasense-query-editor.html">DataSense Query Editor</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="datasense/datasense-query-language.html">DataSense Query Language</a>
                                      </li>
                                  </ul>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="using-dataweave-in-studio.html">DataWeave</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="studio-visual-debugger.html">Studio Visual Debugger</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="import-export-projects-studio.html">Importing and Exporting</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="mule-runtime/changing-runtimes-in-studio.html">Changing Runtimes in Studio</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="keyboard-shortcuts-in-studio.html">Keyboard Shortcuts</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="adding-source-attachments-to-studio.html">Adding Source Attachments to Studio</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="mule-runtime/starting-the-runtime-in-cluster-mode-in-studio.html">Starting the Runtime in Cluster Mode in Studio</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                  <button class="nav-tgl"></button>
                                <a class="nav-lnk" href="datamapper/datamapper-user-guide-and-reference.html">DataMapper (Deprecated)</a>
                                  <ul class="nav-lst">
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="datamapper/datamapper-concepts.html">DataMapper Concepts</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="datamapper/datamapper-visual-reference.html">DataMapper Visual Reference</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                          <button class="nav-tgl"></button>
                                        <a class="nav-lnk" href="datamapper/defining-datamapper-input-and-output-metadata.html">Defining DataMapper Input and Output Metadata</a>
                                          <ul class="nav-lst">
                                              <li class="nav-itm" data-depth="4" data-state="collapsed">
                                                <a class="nav-lnk" href="defining-metadata-using-edit-fields.html">Defining Metadata Using Edit Fields</a>
                                              </li>
                                              <li class="nav-itm" data-depth="4" data-state="collapsed">
                                                <a class="nav-lnk" href="pojo-class-bindings-and-factory-classes.html">POJO Class Bindings and Factory Classes</a>
                                              </li>
                                          </ul>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                          <button class="nav-tgl"></button>
                                        <a class="nav-lnk" href="building-a-mapping-flow-in-the-graphical-mapping-editor.html">Building a Mapping Flow in the Graphical Mapping Editor</a>
                                          <ul class="nav-lst">
                                              <li class="nav-itm" data-depth="4" data-state="collapsed">
                                                <a class="nav-lnk" href="mapping-flow-input-and-output-properties.html">Mapping Flow Input and Output Properties</a>
                                              </li>
                                              <li class="nav-itm" data-depth="4" data-state="collapsed">
                                                <a class="nav-lnk" href="datamapper/datamapper-input-error-policy-for-bad-input-data.html">DataMapper Input Error Policy for Bad Input Data</a>
                                              </li>
                                              <li class="nav-itm" data-depth="4" data-state="collapsed">
                                                <a class="nav-lnk" href="datamapper/using-datamapper-lookup-tables.html">Using DataMapper Lookup Tables</a>
                                              </li>
                                              <li class="nav-itm" data-depth="4" data-state="collapsed">
                                                <a class="nav-lnk" href="datamapper/streaming-data-processing-with-datamapper.html">Streaming Data Processing with DataMapper</a>
                                              </li>
                                          </ul>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="updating-metadata-in-an-existing-mapping.html">Updating Metadata in an Existing Mapping</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="mapping-elements-inside-lists.html">Mapping Elements Inside Lists</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="datamapper/previewing-datamapper-results-on-sample-data.html">Previewing DataMapper Results on Sample Data</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="datamapper/datamapper-examples.html">DataMapper Examples</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                          <button class="nav-tgl"></button>
                                        <a class="nav-lnk" href="datamapper/datamapper-supplemental-topics.html">DataMapper Supplemental Topics</a>
                                          <ul class="nav-lst">
                                              <li class="nav-itm" data-depth="4" data-state="collapsed">
                                                <a class="nav-lnk" href="choosing-mel-or-ctl2-as-scripting-engine.html">Choosing MEL or CTL2 as Scripting Engine</a>
                                              </li>
                                              <li class="nav-itm" data-depth="4" data-state="collapsed">
                                                <a class="nav-lnk" href="datamapper/datamapper-fixed-width-input-format.html">DataMapper Fixed Width Input Format</a>
                                              </li>
                                              <li class="nav-itm" data-depth="4" data-state="collapsed">
                                                <a class="nav-lnk" href="datamapper/datamapper-flat-to-structured-and-structured-to-flat-mapping.html">DataMapper Flat-to-Structured and Structured-to-Flat Mapping</a>
                                              </li>
                                          </ul>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="datamapper/including-the-datamapper-plugin.html">Including the DataMapper Plugin</a>
                                      </li>
                                  </ul>
                              </li>
                          </ul>
                      </li>
                  </ul>
              </li>
          </ul>
      </div>
    </nav>
  </div>
  <article class="primary-content">
    <header class="article-header">
      <div class="breadcrumb">
        <strong class="breadcrumb-item">[ Domain Selector Placeholder ]</strong> /
        <span class="breadcrumb-item">Mapping Elements Inside Lists</span>
      </div>
      <div class="edit-on-github">
        <a href="https://github.com/ede65566-docs-migration/anypoint-studio-docs/edit/v5/modules/ROOT/content/mapping-elements-inside-lists.adoc" class="edit-on-github-link">Edit on Github</a>
      </div>
    </header>
    <h1>Mapping Elements Inside Lists</h1>
    <div id="preamble">
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>DataMapper will continue to be fully supported in all current and future versions of Mule ESB 3.x, however it will be removed in Mule 4.0 in favour of the <strong>Transform Message</strong> component (based on <a href="../../mule-runtime/3.8/dataweave/dataweave.html">DataWeave</a> code). We recommend that if you wish to take advantage of the new capabilities of DataWeave or if you start new projects, upgrade now.</p>
</div>
<div class="paragraph">
<p>A <a href="../../mule-runtime/3.8/dataweave/dataweave-migrator.html">migration tool</a> is now included in Studio, which assists in converting a DataMapper map to DataWeave. Right click on a DataMapper, select <strong>Migrate to DataWeave</strong>, and follow the instructions.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./_images/dw-migrator-script.png" alt="dw migrator">
</div>
</div>
<div class="paragraph">
<p>If you don&#8217;t see DataMapper on your palette, you can enable it by going to <strong>Preferences</strong> &#8594; <strong>Anypoint Studio</strong> &#8594; <strong>Palette Profiles</strong> and ticking the checkbox <strong>Show deprecated Mule Components and Attributes</strong>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A <a href="http://en.wikipedia.org/wiki/Collection_(abstract_data_type)">collection</a> groups data items together in one message payload. Anypoint DataMapper<strong> </strong>supports complex mapping and transformation operations, including those where the input and output are complex nested structures of different data formats.</p>
</div>
<div class="paragraph">
<p>Before mapping elements in a list, you must first map the list itself to an output object or list. Once the input list maps to the output object or list, you can map its individual child elements.</p>
</div>
<div class="paragraph">
<p>Creating a series of element mappings that map input lists to output lists, and then map their child elements, you can ultimately map data elements at any level in complex structures, working your way down through nesting levels in the input and the output.</p>
</div>
<div class="paragraph">
<p>This document uses two examples to demonstrate how to map elements inside lists:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mapping Nested Lists to a Flat File (XML to CSV)</p>
</li>
<li>
<p>Mapping Nested Lists to a Structured Data File (XML to JSON)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Both examples require sequential completion of the following high-level tasks:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Creating the sample input file</p>
</li>
<li>
<p>Creating the sample output file</p>
</li>
<li>
<p>Adding Anypoint DataMapper to a flow</p>
</li>
<li>
<p>Mapping the data</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mapping-nested-lists-to-a-flat-file-format-xml-to-csv"><a class="anchor" href="#mapping-nested-lists-to-a-flat-file-format-xml-to-csv"></a>Mapping Nested Lists to a Flat File Format (XML to CSV)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="creating-the-sample-xml-input-file"><a class="anchor" href="#creating-the-sample-xml-input-file"></a>Creating the Sample XML Input File</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new text file in a text editor, then paste into it the following contents:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;contact_list type="members" id="id0"&gt;
  &lt;contacts&gt;
    &lt;user name="John" lastname="Harrison" phone="1111 1111"/&gt;
    &lt;user name="Jane" lastname="Doe" phone="2222 2222"/&gt;
    &lt;user name="Harry" lastname="Hausen" phone="3333 3333"/&gt;
  &lt;/contacts&gt;
  &lt;emergency_contacts&gt;
    &lt;user name="Larry" lastname="Larson" phone="4444 4444"/&gt;
    &lt;user name="Harry" lastname="Harrison" phone="5555 5555"/&gt;
    &lt;user name="John" lastname="Johnson" phone="6666 6666"/&gt;
  &lt;/emergency_contacts&gt;
&lt;/contact_list&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Save the file to a convenient location under a useful descriptive name, such as <code>InputList.xml</code>. This serves as the input XML file for both examples.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="creating-the-sample-csv-output-file"><a class="anchor" href="#creating-the-sample-csv-output-file"></a>Creating the Sample CSV Output File</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create another new text file, then paste into it the following contents:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">Name,Lastname,Phone</code></pre>
</div>
</div>
</li>
<li>
<p>Save the file in a convenient location under a useful name, such as <code>Output.csv</code> This simple CSV file provides DataMapper with the output data fields. You can modify these fields when configuring the DataMapper building block.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="adding-datamapper-to-a-flow"><a class="anchor" href="#adding-datamapper-to-a-flow"></a>Adding DataMapper to a Flow</h3>
<div class="paragraph">
<p>The following procedure offers abbreviated steps for adding a DataMapper to a flow. For detailed instructions, consult the DataMapper User Guide and Reference.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the <strong>Transformers</strong> group in the <strong>Palette</strong>, drag a <strong>DataMapper</strong> building block to the location where it can receive its input, – such as to the right of a File connector.</p>
</li>
<li>
<p>Click the DataMapper icon to open its Properties Editor.</p>
</li>
<li>
<p>In the <strong>Input</strong> section of the the Properties Editor, use the drop-down menu next to the <strong>Type</strong> field to select <strong>XML</strong>.</p>
</li>
<li>
<p>In the <strong>Output</strong> section, use the drop-down menu next to the <strong>Type</strong> field to select <strong>CSV</strong>.</p>
</li>
<li>
<p>In the <strong>Output</strong> section, click the ellipsis (<strong>&#8230;&#8203;</strong>) button next to the <strong>CSV</strong> field.</p>
</li>
<li>
<p>Use the file browser to select the CSV output file you created.</p>
</li>
<li>
<p>Click <strong>Create Mapping</strong> to load the configurations into the <strong>DataMapper Console </strong>(see image below).</p>
<div class="imageblock">
<div class="content">
<img src="./_images/datamapperscreenshot1.png" alt="datamapperscreenshot1">
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <strong>Element Mapping</strong> selector (center) shows the initial element mapping, called  <code>ForEach 'contact_list' &#8594; 'output</code>.</p>
</div>
<div class="paragraph">
<p>The <strong>Input</strong> pane on the left-hand side displays the input XML file&#8217;s root element, <code>contact_list</code>. A dotted line connects <code>contact_list</code> to the <code>csv</code> root element in the <strong>Output</strong> pane. This dotted line indicates that <em>for each</em> nested element in <code>contact_list</code> that is mapped in a child element mapping, DataMapper should create an entry in <code>csv</code>.<br>
The <strong>Output</strong> pane on the right-hand side displays a list of output elements. The top item represents the <code>csv</code> output file, which can be understood as a list of rows, each of which contains the individual fields Name, LastName and Phone.  In this case, there are no nested lists in the output, since the output format is flat.</p>
</div>
</div>
<div class="sect2">
<h3 id="mapping-the-data"><a class="anchor" href="#mapping-the-data"></a>Mapping the Data</h3>
<div class="paragraph">
<p>In the input pane, attributes are identified by the <span class="image"><img src="./_images/e-icon.png" alt="e.icon"></span> icon. Additionally, the names of mappable attributes are highlighted in <strong>bold</strong>.</p>
</div>
<div class="paragraph">
<p>To map the attributes, follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Hover your mouse over a mappable input attribute. Mule displays a tooltip hinting that the attribute is mappable:</p>
</li>
<li>
<p>For this example, click, then drag the <code>user</code> element under <code>emergency_contacts</code> from the input pane to the <code>Output</code> root element in the output pane. DataMapper will:</p>
<div class="ulist">
<ul>
<li>
<p>Create a new element mapping called <code>Foreach 'user' &#8594; 'Output'</code>. This maps the nested list <code>emergency_contacts/user</code> to the root element of the CSV, called <code>Output</code></p>
</li>
<li>
<p>Map all the individual fields under <code>user</code> to fields with matching names in the CSV<br>
Display all the arrows reflecting these new mappings, as shown below:</p>
<div class="imageblock">
<div class="content">
<img src="./_images/datamapperscreenshot2.png" alt="datamapperscreenshot2">
</div>
</div>
<div class="paragraph">
<p>Note that the other nested list in the input XML file —  <code>contacts</code>  — also contains a <code>user</code> element, but this one is not mapped.</p>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="running-a-preview-of-the-mapping"><a class="anchor" href="#running-a-preview-of-the-mapping"></a>Running a Preview of the Mapping</h3>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
For a complete description of DataMapper&#8217;s Preview feature, see <a href="datamapper/previewing-datamapper-results-on-sample-data.html">Previewing DataMapper Results on Sample Data</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To preview the behavior of the mapping without running your entire mapping flow, click the <strong>Preview</strong> located above the output pane. DataMapper displays the preview view. In the <strong>Input Data</strong> field, enter the path to your input file (or use the folder button to select the file). Then, click <span class="image"><img src="./_images/run-icon.png" alt="run.icon"></span> to preview the output.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./_images/3-1.png" alt="3 1">
</div>
</div>
<div class="paragraph">
<p>As a result of the  <code>emergency_contacts</code>  mapping, the CSV output includes rows corresponding to  the  <code>emergency_contacts</code>  list. There is no mapping for the <code>contacts</code> list, so the output CSV contains no lines for the elements in that list.</p>
</div>
</div>
<div class="sect2">
<h3 id="printing-csv-headers"><a class="anchor" href="#printing-csv-headers"></a>Printing CSV Headers</h3>
<div class="paragraph">
<p>By default, the output does not include the CSV headers. To print CSV headers, follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the output pane of the graphical mapping editor, click the <strong>Properties</strong> icon, highlighted below.</p>
</li>
<li>
<p>DataMapper displays the <strong>CSV Properties</strong> window. Click <strong>Print headers</strong>, then click <strong>OK</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>DataMapper will print the CSV headers in the first line of output.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mapping-nested-lists-to-structured-format-xml-to-json"><a class="anchor" href="#mapping-nested-lists-to-structured-format-xml-to-json"></a>Mapping Nested Lists to Structured Format (XML to JSON)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This example uses DataMapper to map data from XML to JSON. The latter supports simple data structures and associative arrays (which use keys and values roughly as XML uses attribute names and attribute values). This example shows how one representation of structured data can be converted to another.</p>
</div>
<div class="sect2">
<h3 id="creating-the-sample-xml-input-file-2"><a class="anchor" href="#creating-the-sample-xml-input-file-2"></a>Creating the Sample XML Input File</h3>
<div class="paragraph">
<p>If you haven&#8217;t already created a sample XML file, complete the steps in the <a href="#mapping-nested-lists-to-a-flat-file-format-xml-to-csv">Mapping Nested Lists to a Flat File Format (XML to CSV)</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="creating-the-json-output-fields"><a class="anchor" href="#creating-the-json-output-fields"></a>Creating the JSON Output Fields</h3>
<div class="paragraph">
<p>There are two ways to create the JSON output fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a sample JSON file and instruct DataMapper to generate output fields from it</p>
</li>
<li>
<p>Automatically create the output fields from the input</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To fully follow through with this example, you will need to create a sample JSON file as described below. The file provided in this example is intentionally incomplete; the process of adding the missing output fields will help you to become familiar with working with mapping levels via DataMapper&#8217;s graphical mapping editor.</p>
</div>
<div class="paragraph">
<p>To learn how to automatically create the output structure and mappings from an input file, see <a href="#automatically-creating-the-json-output-fields">Automatically Creating the JSON Output Fields</a>.</p>
</div>
<div class="sect3">
<h4 id="creating-the-sample-json-output-file"><a class="anchor" href="#creating-the-sample-json-output-file"></a>Creating the Sample JSON Output File</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new file in a text editor, then paste into it the following contents:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">{
  "type": "members",
  "id": "id0",
  "contacts": [
    {
      "name": "",
      "lastname": ""
    },
    {
      "name": "",
      "lastname": ""
    },
  ],
  "emergencyContacts": [
    {
      "name": "",
      "lastname": ""
    },
  ]
}</code></pre>
</div>
</div>
</li>
<li>
<p>Save the file to a convenient location under a useful descriptive name. This JSON file provides DataMapper with the output data fields.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="adding-datamapper-to-a-flow-2"><a class="anchor" href="#adding-datamapper-to-a-flow-2"></a>Adding DataMapper to a Flow</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Drag a DataMapper transformer to your flow.</p>
</li>
<li>
<p>Click the DataMapper icon in the canvas to open its Properties Editor.</p>
</li>
<li>
<p>In the Input pane, use the drop-down menu next to the <strong>Type</strong> field to select XML.</p>
</li>
<li>
<p>Click <strong>Generate schema from xml</strong>.</p>
</li>
<li>
<p>Click the ellipsis (<strong>&#8230;&#8203;</strong>) button to navigate to and select the XML file you created for DataMapper input. (If you&#8217;ve completed the previous example, DataMapper will ask if you want to overwrite the XML schema file. It is safe to overwrite it; click <strong>OK</strong>.)</p>
</li>
<li>
<p>In the <strong>Output</strong> section of the Properties Editor, use the drop-down menu next to the <strong>Type</strong> field to select <strong>JSON</strong>.</p>
</li>
<li>
<p>In the <strong>Output</strong> section, click the ellipsis symbol (<strong>&#8230;&#8203;</strong>) next to the <strong>Json sample</strong> field.</p>
</li>
<li>
<p>Navigate to and select the JSON file you created.</p>
</li>
<li>
<p>Click <strong>Create mapping</strong>. The DataMapper graphical editor should look like the image below.</p>
<div class="imageblock">
<div class="content">
<img src="./_images/2-3.png" alt="2 3">
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the screenshot above, the Output pane contains two nested lists: <code>contacts</code> and <code>emergencyContacts</code>. Mule read the names of these lists from the sample JSON file.</p>
</div>
<div class="paragraph">
<p>The input field <code>phone</code> is missing in  the output. This is because the JSON file used to generate the output fields did not contain the field <code>phone</code>. We will add this missing field in the example below.</p>
</div>
<div class="paragraph">
<p>Note that the child elements of each list — both in the input pane and in the output pane — are greyed out. Before you can map individual list elements to each other, you must first map the lists (displayed in bold type) themselves.</p>
</div>
</div>
<div class="sect2">
<h3 id="mapping-the-data-2"><a class="anchor" href="#mapping-the-data-2"></a>Mapping the Data</h3>
<div class="paragraph">
<p>To map the input to the output data, follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click, then drag the <code>user : user</code> element under <code>emergencyContacts</code> in the Input pane to the `emergencyContacts: emergencyContacts `element in the Output pane.
DataMapper will:</p>
<div class="ulist">
<ul>
<li>
<p>Create a new element mapping the <code>emergency_contacts/user</code> list in the XML input to the <code>object/emergencyContacts</code> list in the JSON output. You can view the new mapping using the <strong>Element Mapping</strong> drop-down menu:</p>
<div class="imageblock">
<div class="content">
<img src="./_images/2-a1.png" alt="2 a1">
</div>
</div>
</li>
<li>
<p>Auto-map all children of <code>emergency_contacts/user</code> that have matching names to children of <code>emergencyContacts</code></p>
<div class="imageblock">
<div class="content">
<img src="./_images/2-a2.png" alt="2 a2">
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Notice that the DataMapper mapped <code>name</code> and <code>lastname</code>, but not <code>phone</code>. This is because the sample JSON file does not contain a field or attribute called <code>phone</code>. To include phone numbers for the emergency contacts, create a new attribute for <code>phone</code>, then drag and drop to map the <code>phone</code> input attribute to the new output attribute.</p>
<div class="paragraph">
<p>Adding a new metadata field</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Complete the following steps to create the new field in the output pane.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the output pane, right-click the <code>emergencyContacts</code> list, then select <strong>Add Metadata Field</strong>. <br></p>
<div class="imageblock">
<div class="content">
<img src="./_images/ins-1.png" alt="ins 1">
</div>
</div>
</li>
<li>
<p>Fill in the New Attribute dialog:<br></p>
<div class="ulist">
<ul>
<li>
<p>For <strong>Type</strong>, select <strong>Attribute</strong>.</p>
</li>
<li>
<p>For <strong>Name</strong> field of the <strong>New Attribute</strong> window, type the name of the attribute.</p>
</li>
<li>
<p>For <strong>Configuration &#8594; Type</strong>, select <strong>string</strong>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>OK.</strong> The new <code>phone</code> attribute is created in the JSON output file.</p>
<div class="imageblock">
<div class="content">
<img src="./_images/ins-3.png" alt="ins 3">
</div>
</div>
</li>
<li>
<p>Click the <code>phone</code> element in the input pane, then drag it to the newly-created <code>phone</code> key in the output pane.</p>
<div class="imageblock">
<div class="content">
<img src="./_images/ins-4.png" alt="ins 4">
</div>
</div>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>The next step is to map the <code>contacts</code> element in the XML to its counterpart in the JSON.</p>
<div class="paragraph">
<p>In order to map the <code>contacts</code> items, first we must select the element mapping between their parents – in this case, the &#8220;Foreach 'contact_list' to 'object'&#8221; element mapping. Use the Element Mapping control to make this selection:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./_images/2-4.png" alt="2 4">
</div>
</div>
<div class="paragraph">
<p>The mapping editor updates to focus on this mapping:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./_images/2-5.png" alt="2 5">
</div>
</div>
<div class="paragraph">
<p>When you initially configured DataMapper, it automatically created the top level <code>Foreach 'contact_list' &#8594; 'object'</code>. This level maps the XML input file <code>&lt;contact_list type="members" id="id0"&gt;</code> to the JSON output file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">{
  "type" : "members",
  "id" : "id0",
[...]

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To map these elements in DataMapper, click the <code>contacts/user</code> list in the Input pane (identified as <strong>user : user</strong>), then drag it to the <code>contacts</code> output list in the Output pane. DataMapper will:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add a new mapping called <code>Foreach 'user' &#8594; 'contacts'</code>, which you can see in the <strong>Element Mapping</strong> drop-down menu</p>
</li>
<li>
<p>Map the input fields under <code>user</code> to their matching output fields</p>
<div class="imageblock">
<div class="content">
<img src="./_images/2-6.png" alt="2 6">
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Notice that this new mapping level does not have an output field to match the input field <code>phone</code>. Use the procedure described above to create a new output field called <code>phone</code>. Then, drag-and-drop the input field <code>phone</code> to the new field to complete the mapping.</p>
</div>
<div class="paragraph">
<p>At this point, you have mapped all of the XML input fields to their corresponding JSON output fields. The final DataMapper view should look like the image below. You can check each of the element mappings to see if they match.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./_images/2-7.png" alt="2 7">
</div>
</div>
<div class="paragraph">
<p>The output of the mapping should be the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">{
  "type" : "members",
  "id" : "id0",
  "contacts" : [ {
    "name" : "John",
    "lastname" : "Harrison",
    "phone" : "1111 1111"
  }, {
    "name" : "Jane",
    "lastname" : "Doe",
    "phone" : "2222 2222"
  }, {
    "name" : "Harry",
    "lastname" : "Hausen",
    "phone" : "3333 3333"
  } ],
  "emergencyContacts" : [ {
    "name" : "Larry",
    "phone" : "4444 4444",
    "lastname" : "Larson"
  }, {
    "name" : "Harry",
    "phone" : "5555 5555",
    "lastname" : "Harrison"
  }, {
    "name" : "John",
    "phone" : "6666 6666",
    "lastname" : "Johnson"
  } ]
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
To generate a preview of your mapping, click the <strong>Preview</strong> tab in the DataMapper view, then click <strong>Run Mapping</strong>. Consult <a href="datamapper/previewing-datamapper-results-on-sample-data.html">Previewing DataMapper Results on Sample Data</a> for details.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="automatically-creating-the-json-output-fields"><a class="anchor" href="#automatically-creating-the-json-output-fields"></a>Automatically Creating the JSON Output Fields</h3>
<div class="paragraph">
<p>Often, the quickest and easiest way to create output fields is to use DataMapper&#8217;s <strong>From Input</strong> feature when you initially configure DataMapper. This feature automatically creates output fields matching the names of the input fields, and maps matching fields accordingly.</p>
</div>
<div class="paragraph">
<p>To create the JSON output fields used in the example above, follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the sample XML input file as described <a href="#mapping-nested-lists-to-a-flat-file-format-xml-to-csv">Mapping Nested Lists to a Flat File Format (XML to CSV)</a>.</p>
</li>
<li>
<p>In DataMapper&#8217;s Output pane, select <strong>JSON</strong> from the <strong>Type</strong> drop-down menu. DataMapper should look like the image below.</p>
<div class="imageblock">
<div class="content">
<img src="./_images/3-1-1.png" alt="3 1 1">
</div>
</div>
</li>
<li>
<p>Click the <strong>From Input</strong> radio button.</p>
</li>
<li>
<p>Click the <strong>Copy Structure</strong> button.</p>
</li>
<li>
<p>Click <strong>Create mapping</strong>. DataMapper displays its graphical mapping editor, which should look like the image below.</p>
<div class="imageblock">
<div class="content">
<img src="./_images/2-2.png" alt="2 2">
</div>
</div>
<div class="paragraph">
<p>DataMapper has automatically:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Created a JSON output structure and fields matching the XML input file</p>
</li>
<li>
<p>Created different mapping levels, one for each level in the nested lists</p>
</li>
<li>
<p>Mapped the matching input and output fields</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can also use the <strong>Infer Metadata</strong> tool to automatically update or recreate output metadata. For details, see <a href="updating-metadata-in-an-existing-mapping.html">Updating Metadata in an Existing Mapping</a>.</p>
</div>
</div>
</div>
</div>
  </article>
</main>
<footer class="footer"><div class="footer__wrapper">
      <div class="footer__top">
              </div>
      <div class="footer-bottom-wrapper">
        <!--<a href="/" title="Home" rel="home" class="header__logo" id="logo"><img src="/sites/all/themes/muletheme/images/mule_logo.svg" alt="Home" class="header__logo-image" /></a>-->
        <div class="connect-footer">
          <p>Sign up for our Dev newsletter</p>
          <div class="connect-footer">

</div>
  </div>
        <div class="terms-conditions temp">
          <div id="block-menu-menu-footer-bottom-menu" class="block block-menu contextual-links-region first last odd" role="navigation">
            <ul class="menu"><li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/" class="menu__link">MuleSoft.com</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://blogs.mulesoft.com/" class="menu__link">Blog</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/content/terms-service" class="menu__link">Terms</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/privacy-policy" class="menu__link">Privacy</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/contact" class="menu__link">Contact</a></li>
            </ul></div>
                    <div class="default-terms-conditions">
          </div>
          MuleSoft provides a widely used <a href="https://www.mulesoft.com/platform/enterprise-integration">integration platform</a> for connecting SaaS and enterprise applications in the cloud and on-premise. Delivered as a unified integration experience, <a href="https://www.mulesoft.com/platform/saas/cloudhub-ipaas-cloud-based-integration">CloudHub&trade;</a> and <a href="https://www.mulesoft.com/platform/soa/mule-esb-open-source-esb">Mule ESB&trade;</a> (Enterprise Service Bus) are built on proven open source technology for fast and reliable on-premise and cloud integration without vendor lock-in.


        </div>
      </div>
      <div class="footer-end">
        <div class="footer-logo-wrapper">
          <a href="https://developer.mulesoft.com/" class="footer-logo"></a>
        </div>
        <ul class="social-links"><li><a href="https://www.mulesoft.com/lp/contact" target="_blank" class="icon-muletheme-phone"></a></li>
          <li><a href="https://www.linkedin.com/company/mulesoft" target="_blank" class="icon-muletheme-linkedin"></a></li>
          <li><a href="https://twitter.com/muledev" target="_blank" class="icon-muletheme-twitter"></a></li>
          <li><a href="https://www.facebook.com/MuleSoft" target="_blank" class="icon-muletheme-facebook"></a></li>
          <li><a href="mailto:info@mulesoft.com" target="_blank" class="icon-muletheme-email"></a></li>
          <li><a href="https://videos.mulesoft.com/" target="_blank" class="icon-muletheme-youtube"></a></li>
        </ul><p class="copyright"><span>&copy;2017</span> MuleSoft, INC.</p>
      </div>
    </div>
    </footer><script src="../../_theme/scripts/menu.js"></script>
<script src="../../_theme/scripts/highlight.pack.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>
