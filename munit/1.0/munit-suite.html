<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="munit, testing, unit testing">
  <link rel="canonical" href="https://ede65566-docs-migration.github.io/docs-site/munit/1.3/munit-suite.html">
  <link rel="stylesheet" href="../../_theme/stylesheets/theme.css">
  <title>MUnit Suite // MuleSoft Documentation</title>
</head>
<body class="article">
<header class="header" id="header" role="banner"><div class="header__wrapper clearfix">
      <div class="header__logo--primary-nav clearfix">
        <a href="https://docs.mulesoft.com" title="Home" rel="home" class="header__logo" id="logo">
          <img src="../../_theme/images/mulesoft-dev-logo.svg" alt="Home" class="header__logo-image"></a>
          <div class="header__region region region-header">
    <div id="block-system-main-menu" class="block block-menu first last odd" role="navigation">

        <h2 class="block__title block-title">Main Dev Menu</h2>
    
  <ul class="menu"><li class="menu__item is-expanded first expanded"><span class="menu__link">Platform</span><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="https://developer.mulesoft.com/dev/anypoint-studio" title="" class="menu__link">Studio</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/connectors" title="" class="menu__link">Connectors</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/anypoint-exchange" title="" class="menu__link">Exchange</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/design-api" title="" class="menu__link">API Designer</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/api-developer-portal" title="" class="menu__link">API Portal</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/mule-runtime-engine" title="" class="menu__link">Mule runtime engine</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/api-management" title="" class="menu__link">API Manager</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://developer.mulesoft.com/dev/reporting-api-analytics" title="" class="menu__link">API Analytics</a></li>
</ul></li>
<li class="menu__item is-expanded expanded"><span class="menu__link">Resources</span><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="https://developer.mulesoft.com/getting-started/anypoint-platform" class="menu__link">Getting started</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/tutorials-and-howtos" class="menu__link">Tutorials &amp; HowTos</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/webinars-and-videos" title="" class="menu__link">Webinars &amp; Videos</a></li>
<li class="menu__item is-leaf leaf"><a href="http://s2.developer.mulesoft.com/workshops" class="menu__link">Online Workshops</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/integration-books-and-resources" class="menu__link">Books &amp; Whitepapers</a></li>
<li class="menu__item is-leaf leaf"><a href="https://blogs.mulesoft.com/dev/" class="menu__link">Blog</a></li>
<li class="menu__item is-leaf leaf"><a href="https://docs.mulesoft.com" class="menu__link">Documentation</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://training.mulesoft.com" class="menu__link">Training</a></li>
</ul></li>
<li class="menu__item is-expanded expanded"><a href="https://developer.mulesoft.com/community" class="menu__link">Community</a><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="http://forum.mulesoft.org/" class="menu__link">Forums</a></li>
<li class="menu__item is-leaf leaf"><a href="https://meetups.mulesoft.com" class="menu__link">Meetups</a></li>
<li class="menu__item is-leaf leaf"><a href="http://s2.developer.mulesoft.com/" class="menu__link">Contributed Content</a></li>
<li class="menu__item is-leaf leaf"><a href="https://s2.developer.mulesoft.com/jobs.html" class="menu__link">Jobs</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://www.mulesoft.org/jira/browse/MULE" class="menu__link">Issue tracker</a></li>
</ul></li>
<li class="menu__item is-leaf last leaf"><a href="https://developer.mulesoft.com/champions" class="menu__link">Champions</a></li>
</ul></div>
  </div>
      </div> <!-- header__logo--primary-nav -->
      <div class="header__top-wrapper">
        <div class="header__nav-wrapper">
                      <div class="region region-header-top">
    <div id="block-search-form" class="block block-search first last odd" role="search">

      
  
</div>
  </div>
        </div>
        <div class="top-nav-ctas">
          <a class="icon-muletheme-phone" href="https://mulesoft.com/lp/contact" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-contact');"></a>
          <a href="https://anypoint.mulesoft.com/login/#/signup?apintent=dmc_generic" class="try" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-nav');">Try now</a>
          <a href="https://mulesoft.com/" class="dev" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-mscom');">MuleSoft.com</a>
        </div>
      </div> <!-- header__secondary-nav-search -->
    </div> <!-- header__wrapper -->
    <a href="#sidr" id="open-left" class="closed">
    </a>
  </header><main role="main" class="main-wrapper">
  <div class="navigation-wrapper">
    <nav role="navigation" class="navigation">
      <div class="search">
        <input type="text" placeholder="Search the docs" class="search-input" autocomplete="off" autocorrect="off" autocapitalize="off">
      </div>
      <div class="inner-nav">
          <ul class="nav-lst">
              <li class="nav-itm" data-depth="0" data-state="collapsed">
                  <button class="nav-tgl"></button>
                <a class="nav-lnk" href="index.html">MUnit</a>
                  <ul class="nav-lst">
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="using-munit-in-anypoint-studio.html">Using MUnit in Anypoint Studio</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="munit-suite.html">MUnit Suite</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="mock-message-processor.html">Mock Message Processor</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="verify-message-processor.html">Verify Message Processor</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="set-message-processor.html">Set Message Processor</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="spy-message-processor.html">Spy Message Processor</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="assertion-message-processor.html">Assertion Message Processor</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="munit-matchers.html">MUnit Matchers</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="munit-database-server.html">MUnit Database Server</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="munit-ftp-server.html">MUnit FTP Server</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="munit-maven-support.html">MUnit Maven Support</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="munit-short-tutorial.html">MUnit Short Tutorial</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="example-testing-apikit.html">Example: Testing APIKit</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="logging-in-munit.html">Logging in MUnit</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="run-and-wait-scope.html">Run and Wait Scope</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="munit-tests-with-java.html">MUnit Tests With Java</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="../../solutions/migration/munit/1.0-migration-guide.html">MUnit 1.0 Migration Guide</a>
                      </li>
                  </ul>
              </li>
          </ul>
      </div>
    </nav>
  </div>
  <article class="primary-content">
    <header class="article-header">
      <div class="breadcrumb">
        <strong class="breadcrumb-item">[ Domain Selector Placeholder ]</strong> /
        <span class="breadcrumb-item">MUnit Suite</span>
      </div>
      <div class="edit-on-github">
        <a href="https://github.com/ede65566-docs-migration/munit-docs/edit/v1.0/modules/ROOT/content/munit-suite.adoc" class="edit-on-github-link">Edit on Github</a>
      </div>
    </header>
    <h1>MUnit Suite</h1>
    <div id="preamble">
<div class="sectionbody">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
This page and related MUnit pages are focused on XML; however, MUnit is fully compatible with Anypoint Studio&#8217;s graphical user interface. Within the Studio environment, you can create, design and run MUnit tests just like you would Mule applications. You can even use <a href="../../anypoint-studio/5/studio-visual-debugger.html">Studio&#8217;s Visual Debugger</a> to debug your MUnit tests. For an overview of MUnit in Studio, see <a href="using-munit-in-anypoint-studio.html">Using MUnit in Anypoint Studio</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="definition"><a class="anchor" href="#definition"></a>Definition</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The base file in the MUnit Framework is the <strong>MUnit Test Suite file</strong>. These files are the <code>.xml</code> files located under the <code>src/test/munit</code> folder in your Mule application&#8217;s folder structure. Each MUnit Test Suite file is a collection of MUnit tests. It is meant to work on its own, and should be able to run independently from other MUnit test suite files.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="components-of-an-munit-test-suite"><a class="anchor" href="#components-of-an-munit-test-suite"></a>Components of an MUnit Test Suite</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An MUnit test suite file should contain any combination of the following components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Imports</p>
</li>
<li>
<p>Bean Definitions</p>
</li>
<li>
<p>Before/After Suites</p>
</li>
<li>
<p>Before/After Tests</p>
</li>
<li>
<p>MUnit Tests</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Each MUnit test suite file is, behind the scenes, no different than a Mule
application XML file. You can use several of the Mule top level elements such as flow, sub-flow, scripts, etc.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="defining-imports"><a class="anchor" href="#defining-imports"></a>Defining Imports</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each MUnit suite is meant to test a particular set of Mule flows. To do that, you need to tell MUnit where those flows are defined in your application structure. For this we use <em>imports</em>, which are in fact <em>spring imports</em>.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: MUnit does not support Mule Domains.</p>
</div>
<div class="listingblock">
<div class="title">Spring Import Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;spring:beans&gt;
  &lt;spring:import resource="classpath:your-production-code.xml"/&gt;
&lt;/spring:beans&gt;</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
If your application is spread across multiple files and the components in those files cross-reference each other, you need to import all of the files.
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Currently, MUnit Suite doesn&#8217;t support the use of components defined in Shared Resources. It&#8217;s required to define those components explicitly in the test suit file in order to execute the test.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Ideally, your production code and your flows should be arranged in a cohesive way&#8201;&#8212;&#8201;this improves readability, maintainability and testability.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="defining-before-and-after-suites"><a class="anchor" href="#defining-before-and-after-suites"></a>Defining Before and After Suites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As with other testing frameworks, MUnit provides certain features around the test suite concept.
In particular, you can add processing/actions to be run <em>before</em> and/or <em>after</em> the entire
MUnit Test Suite executions.</p>
</div>
<div class="sect2">
<h3 id="defining-a-before-suite"><a class="anchor" href="#defining-a-before-suite"></a>Defining a Before Suite</h3>
<div class="paragraph">
<p>The MUnit Before Suite is a scope. It can contain code that is meant to be executed <strong><em>before</em></strong> the whole suite.</p>
</div>
<div class="paragraph">
<p>For instance, let&#8217;s suppose you have an MUnit Test Suite file with four tests. The code inside an MUnit Before Suite runs just once, before your four tests.</p>
</div>
<div class="paragraph">
<p>The MUnit Before Suite is a <em>top level scope</em>, so you can have as many Before Suites as you need. They all follow the same execution rule: <em>Run before the tests, just once</em>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
If there is more than one Before Suite, MUnit does not guarantee the order in which the Before Suites run amongst themselves.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Before Suite example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;munit:before-suite name="before.suite" description="A description"&gt;
  &lt;!-- some mule code here --&gt; <i class="conum" data-value="1"></i><b>(1)</b>
&lt;/munit:before-suite &gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Define the code you want to run</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the name of the Before suite. The name must be unique inside the suite.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Describes the actions performed.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
One instance in which the MUnit Before Suite is useful is when you need to set up a test environment before the whole test runs.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="defining-an-after-suite"><a class="anchor" href="#defining-an-after-suite"></a>Defining an After Suite</h3>
<div class="paragraph">
<p>The MUnit After Suite is a scope. It can contain code that is meant to be executed <em>after</em> the whole suite.</p>
</div>
<div class="paragraph">
<p>For instance, let&#8217;s suppose you have an MUnit Test Suite File with four tests. The code inside an MUnit After Suite, <em>runs just once, after all your tests</em>.</p>
</div>
<div class="paragraph">
<p>The MUnit After Suite is a <em>top level scope</em>, thus you can have as many After Suites as you need.
They all follow the same execution rule: <em>Run after the tests, just once</em>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
If there is more than one After Suite, MUnit does not guarantee the order in which the After Suites run amongst themselves.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">After Suite example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;munit:after-suite  name="after.suite" description="A description"&gt;
  &lt;!-- some Mule code here --&gt; <i class="conum" data-value="1"></i><b>(1)</b>
&lt;/munit:after-suite &gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Define the code you want to run</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the name of the After suite. The name must be unique inside the suite.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Describes the actions performed.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
One instance in which the MUnit After Suite is useful is when you need to set up a test environment after the whole test runs.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="defining-before-and-after-tests"><a class="anchor" href="#defining-before-and-after-tests"></a>Defining Before and After Tests</h2>
<div class="sectionbody">
<div class="paragraph">
<p>MUnit provides the ability to perform <em>Before</em> and <em>After</em> tests. These are similar to the concepts defined by JUnit. You can add processing/actions to be run <em>before</em> and/or <em>after</em> the execution of each MUnit Test suite.</p>
</div>
<div class="sect2">
<h3 id="defining-a-before-test"><a class="anchor" href="#defining-a-before-test"></a>Defining a Before Test</h3>
<div class="paragraph">
<p>The MUnit Before Test is a scope. It can contain code that is meant to be executed <em>before each</em> test.</p>
</div>
<div class="paragraph">
<p>For instance, let&#8217;s suppose you have an MUnit Test Suite file with four tests. The code inside an MUnit Before test <em>runs before <strong>each</strong> of your four tests</em>; it runs four times.</p>
</div>
<div class="paragraph">
<p>The MUnit Before Test is a <em>top-level scope</em>, thus you can have as many Before tests as you need. They all follow the same execution rule: <em>Run before each test</em>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
If there is more than one Before test, MUnit does not guarantee the order in which the Before tests run amongst themselves.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Before Test example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;munit:before-test name="before.tests" description="A description"&gt;
  &lt;!-- some mule code here --&gt; <i class="conum" data-value="1"></i><b>(1)</b>
&lt;/munit:before-test&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Define the code you want to run</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the name of the Before test. The name must be unique inside the test.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>description</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Describes the actions performed.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
One instance in which the MUnit After Suite is useful is when you need to set up a test environment after the whole test runs.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="defining-an-after-test"><a class="anchor" href="#defining-an-after-test"></a>Defining an After Test</h3>
<div class="paragraph">
<p>The MUnit After Test is a scope. It can contain code that is meant to be executed <em>after each</em> test.</p>
</div>
<div class="paragraph">
<p>For instance, let&#8217;s suppose you have an MUnit Test Suite file with four tests. The code inside an MUnit After Test <em>runs after <strong>each</strong> of your four tests</em>; it runs four times.</p>
</div>
<div class="paragraph">
<p>The MUnit After Test is a <em>top level scope</em>, so you can have as many After Tests as you need.
They all follow the same execution rule: <em>Run after each test</em>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
If there is more than one After test, MUnit does not guarantee the order in which the After Tests run amongst themselves.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">After Test example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;munit:after-test  name="after.test" description="A description"&gt;
  &lt;!-- some mule code here --&gt; <i class="conum" data-value="1"></i><b>(1)</b>
&lt;/munit:after-test&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Define the code you want to run</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the name of the After test. The name must be unique inside the test.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>description</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Describes the actions performed.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
One instance in which the MUnit After test is useful is when you need to set up a test environment after the whole test runs.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="defining-an-munit-test"><a class="anchor" href="#defining-an-munit-test"></a>Defining an MUnit Test</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <strong>MUnit Test</strong> is the basic building block of an MUnit Test Suite. It represents each test scenario you want to try.</p>
</div>
<div class="listingblock">
<div class="title">MUnit Test example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;munit:test name="my-flow-Test" description="Test to verify scenario 1"&gt;
&lt;/munit:test&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>MUnit Test Attributes</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Mandatory.</strong> Defines the name of the test. The name must be unique inside the test suite.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Mandatory.</strong> Describes the scenario being tested.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines if the test should be ignored. If not present, the test is not ignored.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>expectException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the exception that should be received after the execution of this test.</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="defining-an-munit-test-description"><a class="anchor" href="#defining-an-munit-test-description"></a>Defining an MUnit Test Description</h3>
<div class="paragraph">
<p>In MUnit, it&#8217;s mandatory that you write a description in your test, that is, the <code>description</code> attribute is mandatory.</p>
</div>
<div class="paragraph">
<p>Ideally, you should write a useful, representative description of the scenario you are testing. This description displays in the test console before running the test, and also in the reports.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The more representative the description, the more easy to read and troubleshoot any failures.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;munit:test name="testingEchoFlow"
    description="We want to test that the flow always returns the same payload as we had before calling it."&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="defining-an-munit-test-to-ignore"><a class="anchor" href="#defining-an-munit-test-to-ignore"></a>Defining an MUnit Test To Ignore</h3>
<div class="paragraph">
<p>There may be scenarios where you need to shoot-down a test. Whether this be
because the test is failing or because it has nasty side effect. The point is you
shouldn&#8217;t have to comment out the code.</p>
</div>
<div class="paragraph">
<p>In some scenarios, you may find it necessary to bypass a defined test, for example if the test fails or produces unwanted side-effects. In this case, MUnit allows you to ignore a specific test so you don&#8217;t have to comment out the code.</p>
</div>
<div class="paragraph">
<p>You can ignore any of your tests by adding the <code>ignore</code> boolean to the test definition, as shown below.</p>
</div>
<div class="listingblock">
<div class="title">MUnit ignore test example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;munit:test name="my-flow-Test"
      ignore="true"               <i class="conum" data-value="1"></i><b>(1)</b>
      description="Test to verify scenario 1"&gt;
&lt;/munit:test&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Ignore test <em>my-flow-Test</em></td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Valid values for <code>ignore</code> are <strong>true</strong> and <strong>false</strong>. If the attribute is not present, the default is false.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="defining-an-expected-exception"><a class="anchor" href="#defining-an-expected-exception"></a>Defining an Expected Exception</h3>
<div class="paragraph">
<p>Sometimes, the only thing you want to validate is that the flow or sub-flow you are testing fails and throws a specific exception, which depends on the business logic being tested. In these cases, MUnit provides a simple way to validate the scenario.</p>
</div>
<div class="paragraph">
<p>You can validate a specific scenario by adding the attribute <code>expectException</code>, as shown below.</p>
</div>
<div class="listingblock">
<div class="title">MUnit test expect exception example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;munit:test name="testExceptions" description="Test Exceptions" expectException=""&gt;
  &lt;flow-ref name="exceptionFlow"/&gt;
&lt;/munit:test&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The attribute <code>expectException</code> expects one of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A literal exception class name (canonical form)</p>
</li>
<li>
<p>A MEL expression</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">MUnit test expected exception <em>class name</em> example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;munit:test name="testExceptions" description="Test Exceptions" expectException="java.lang.RuntimException"&gt;
  &lt;flow-ref name="exceptionFlow"/&gt;
&lt;/munit:test&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you define that your test expects an exception and none is thrown, the test fails immediately.</p>
</div>
<div class="sect3">
<h4 id="code-expectexception-code-literal-value"><a class="anchor" href="#code-expectexception-code-literal-value"></a><code>expectException</code> - Literal Value</h4>
<div class="paragraph">
<p>When you provide a literal value, it should take the form of the <em>canonical class name</em> of the exception that is expected. In these cases, Mule always throws a <code>MuleMessagingException</code>. MUnit validates the provided classname if the underlying cause of the <code>MuleMessagingException</code> thrown is of the exact same type.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
When providing exceptions in this way, a subclass of the provided exception does not pass the validation&#8201;&#8212;&#8201;MUnit looks for the exact same type.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="expectexception-mel-expression-value"><a class="anchor" href="#expectexception-mel-expression-value"></a>expectException - MEL Expression Value</h4>
<div class="paragraph">
<p>If you choose to use expressions, Mule itself offers a collection of MEL expressions that simplifies the validations of the exceptions thrown.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>exception.causedBy(exception_type)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evaluates if the exception was caused by an (instance of) the provided exception type.
<strong>Example</strong>: <code>exception.causedBy(org.mule.example.ExceptionType)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>exception.causedExactlyBy(exception_type)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evaluates if the exception was caused by the specific exception type provided, discarding all other exception types. For example, if the provided exception type is <code>NullPointerException</code>, the expression returns true only if the test returns a NullPointerException.
<strong>Example</strong>: <code>exception.causedExactlyBy(org.mule.example.ExceptionType)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>exception.causeMatches(&lt;regex&gt;)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checks the cause exception type name matches the provided regex. Supports any java regex plus, prefix, suffix. <strong>Example</strong>: <code>exception.causeMatches(org.mule.example.*)</code></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can combine any expressions as a boolean expression. For example:
<code>exception.causeMatches('*') &amp;&amp; !exception.causedBy(java.lang.ArithmeticException) &amp;&amp;
!exception.causedBy(org.mule.api.registry.ResolverException)`</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This MEL expression is meant to be used with the expressions listed above, but no verification is performed done to avoid other usages. The only contract being enforced is: <strong>The MEL expression should return a boolean value. If true, the test is successful</strong>.</p>
</div>
<div class="paragraph">
<p>If the MEL expression returns something that cannot be cast to a Boolean value, the test fails.</p>
</div>
<div class="paragraph">
<p>All MEL expression shortcuts, such as <code>message</code> or <code>payload</code>, are valid. Just bear in mind that if an exception is thrown, the original payload most likely is lost.</p>
</div>
</div>
</div>
</div>
</div>
  </article>
</main>
<footer class="footer"><div class="footer__wrapper">
      <div class="footer__top">
              </div>
      <div class="footer-bottom-wrapper">
        <!--<a href="/" title="Home" rel="home" class="header__logo" id="logo"><img src="/sites/all/themes/muletheme/images/mule_logo.svg" alt="Home" class="header__logo-image" /></a>-->
        <div class="connect-footer">
          <p>Sign up for our Dev newsletter</p>
          <div class="connect-footer">

</div>
  </div>
        <div class="terms-conditions temp">
          <div id="block-menu-menu-footer-bottom-menu" class="block block-menu contextual-links-region first last odd" role="navigation">
            <ul class="menu"><li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/" class="menu__link">MuleSoft.com</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://blogs.mulesoft.com/" class="menu__link">Blog</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/content/terms-service" class="menu__link">Terms</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/privacy-policy" class="menu__link">Privacy</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/contact" class="menu__link">Contact</a></li>
            </ul></div>
                    <div class="default-terms-conditions">
          </div>
          MuleSoft provides a widely used <a href="https://www.mulesoft.com/platform/enterprise-integration">integration platform</a> for connecting SaaS and enterprise applications in the cloud and on-premise. Delivered as a unified integration experience, <a href="https://www.mulesoft.com/platform/saas/cloudhub-ipaas-cloud-based-integration">CloudHub&trade;</a> and <a href="https://www.mulesoft.com/platform/soa/mule-esb-open-source-esb">Mule ESB&trade;</a> (Enterprise Service Bus) are built on proven open source technology for fast and reliable on-premise and cloud integration without vendor lock-in.


        </div>
      </div>
      <div class="footer-end">
        <div class="footer-logo-wrapper">
          <a href="https://developer.mulesoft.com/" class="footer-logo"></a>
        </div>
        <ul class="social-links"><li><a href="https://www.mulesoft.com/lp/contact" target="_blank" class="icon-muletheme-phone"></a></li>
          <li><a href="https://www.linkedin.com/company/mulesoft" target="_blank" class="icon-muletheme-linkedin"></a></li>
          <li><a href="https://twitter.com/muledev" target="_blank" class="icon-muletheme-twitter"></a></li>
          <li><a href="https://www.facebook.com/MuleSoft" target="_blank" class="icon-muletheme-facebook"></a></li>
          <li><a href="mailto:info@mulesoft.com" target="_blank" class="icon-muletheme-email"></a></li>
          <li><a href="https://videos.mulesoft.com/" target="_blank" class="icon-muletheme-youtube"></a></li>
        </ul><p class="copyright"><span>&copy;2017</span> MuleSoft, INC.</p>
      </div>
    </div>
    </footer><script src="../../_theme/scripts/menu.js"></script>
<script src="../../_theme/scripts/highlight.pack.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>
