<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="munit, testing, unit testing">
  <link rel="canonical" href="https://ede65566-docs-migration.github.io/docs-site/munit/1.3/munit-ftp-server.html">
  <link rel="stylesheet" href="../../_theme/stylesheets/theme.css">
  <title>MUnit FTP Server // MuleSoft Documentation</title>
</head>
<body class="article">
<header class="header" id="header" role="banner"><div class="header__wrapper clearfix">
      <div class="header__logo--primary-nav clearfix">
        <a href="https://docs.mulesoft.com" title="Home" rel="home" class="header__logo" id="logo">
          <img src="../../_theme/images/mulesoft-dev-logo.svg" alt="Home" class="header__logo-image"></a>
          <div class="header__region region region-header">
    <div id="block-system-main-menu" class="block block-menu first last odd" role="navigation">

        <h2 class="block__title block-title">Main Dev Menu</h2>
    
  <ul class="menu"><li class="menu__item is-expanded first expanded"><span class="menu__link">Platform</span><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="https://developer.mulesoft.com/dev/anypoint-studio" title="" class="menu__link">Studio</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/connectors" title="" class="menu__link">Connectors</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/anypoint-exchange" title="" class="menu__link">Exchange</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/design-api" title="" class="menu__link">API Designer</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/api-developer-portal" title="" class="menu__link">API Portal</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/mule-runtime-engine" title="" class="menu__link">Mule runtime engine</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/api-management" title="" class="menu__link">API Manager</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://developer.mulesoft.com/dev/reporting-api-analytics" title="" class="menu__link">API Analytics</a></li>
</ul></li>
<li class="menu__item is-expanded expanded"><span class="menu__link">Resources</span><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="https://developer.mulesoft.com/getting-started/anypoint-platform" class="menu__link">Getting started</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/tutorials-and-howtos" class="menu__link">Tutorials &amp; HowTos</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/webinars-and-videos" title="" class="menu__link">Webinars &amp; Videos</a></li>
<li class="menu__item is-leaf leaf"><a href="http://s2.developer.mulesoft.com/workshops" class="menu__link">Online Workshops</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/integration-books-and-resources" class="menu__link">Books &amp; Whitepapers</a></li>
<li class="menu__item is-leaf leaf"><a href="https://blogs.mulesoft.com/dev/" class="menu__link">Blog</a></li>
<li class="menu__item is-leaf leaf"><a href="https://docs.mulesoft.com" class="menu__link">Documentation</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://training.mulesoft.com" class="menu__link">Training</a></li>
</ul></li>
<li class="menu__item is-expanded expanded"><a href="https://developer.mulesoft.com/community" class="menu__link">Community</a><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="http://forum.mulesoft.org/" class="menu__link">Forums</a></li>
<li class="menu__item is-leaf leaf"><a href="https://meetups.mulesoft.com" class="menu__link">Meetups</a></li>
<li class="menu__item is-leaf leaf"><a href="http://s2.developer.mulesoft.com/" class="menu__link">Contributed Content</a></li>
<li class="menu__item is-leaf leaf"><a href="https://s2.developer.mulesoft.com/jobs.html" class="menu__link">Jobs</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://www.mulesoft.org/jira/browse/MULE" class="menu__link">Issue tracker</a></li>
</ul></li>
<li class="menu__item is-leaf last leaf"><a href="https://developer.mulesoft.com/champions" class="menu__link">Champions</a></li>
</ul></div>
  </div>
      </div> <!-- header__logo--primary-nav -->
      <div class="header__top-wrapper">
        <div class="header__nav-wrapper">
                      <div class="region region-header-top">
    <div id="block-search-form" class="block block-search first last odd" role="search">

      
  
</div>
  </div>
        </div>
        <div class="top-nav-ctas">
          <a class="icon-muletheme-phone" href="https://mulesoft.com/lp/contact" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-contact');"></a>
          <a href="https://anypoint.mulesoft.com/login/#/signup?apintent=dmc_generic" class="try" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-nav');">Try now</a>
          <a href="https://mulesoft.com/" class="dev" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-mscom');">MuleSoft.com</a>
        </div>
      </div> <!-- header__secondary-nav-search -->
    </div> <!-- header__wrapper -->
    <a href="#sidr" id="open-left" class="closed">
    </a>
  </header><main role="main" class="main-wrapper">
  <div class="navigation-wrapper">
    <nav role="navigation" class="navigation">
      <div class="search">
        <input type="text" placeholder="Search the docs" class="search-input" autocomplete="off" autocorrect="off" autocapitalize="off">
      </div>
      <div class="inner-nav">
          <ul class="nav-lst">
              <li class="nav-itm" data-depth="0" data-state="collapsed">
                  <button class="nav-tgl"></button>
                <a class="nav-lnk" href="index.html">MUnit</a>
                  <ul class="nav-lst">
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="munit-suite.html">Test Suite</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="using-munit-in-anypoint-studio.html">Using MUnit in Anypoint Studio</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="munit-maven-support.html">Maven Support</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="munit-domain-support.html">Domain Support</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="munit-coverage-report.html">Coverage Report</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="message-processors.html">Message Processors</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="assertion-message-processor.html">Assertion</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="set-message-processor.html">Set</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="mock-message-processor.html">Mock</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="verify-message-processor.html">Verify</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="spy-message-processor.html">Spy</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="munit-matchers.html">Matchers</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="munit-utils.html">Utilities</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="munit-database-server.html">Database Server</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="munit-ftp-server.html">FTP Server</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="run-and-wait-scope.html">Run and Wait Scope</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="munit-examples.html">Examples</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="munit-short-tutorial.html">Short Tutorial</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="example-testing-apikit.html">Testing APIkit</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="logging-in-munit.html">Logging</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="munit-tests-with-java.html">Tests With Java</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="../../solutions/migration/munit/1.2-migration-guide.html">MUnit 1.2 Migration Guide</a>
                      </li>
                  </ul>
              </li>
          </ul>
      </div>
    </nav>
  </div>
  <article class="primary-content">
    <header class="article-header">
      <div class="breadcrumb">
        <strong class="breadcrumb-item">[ Domain Selector Placeholder ]</strong> /
        <span class="breadcrumb-item">MUnit FTP Server</span>
      </div>
      <div class="edit-on-github">
        <a href="https://github.com/ede65566-docs-migration/munit-docs/edit/v1.2/modules/ROOT/content/munit-ftp-server.adoc" class="edit-on-github-link">Edit on Github</a>
      </div>
    </header>
    <h1>MUnit FTP Server</h1>
    <div class="sect1">
<h2 id="overview"><a class="anchor" href="#overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>One of the main problems of testing production code are external system connections. If we create a test of a piece of code that connects with an FTP server, we need to install an FTP server in our local environment in order to run the tests. Another option is to have an external FTP server for testing only, but the major problem with this approach is that our Maven project would not be portable -- we would not be able to send it to a third party because they would not be able to compile it without installing the FTP server first.</p>
</div>
<div class="paragraph">
<p>To enable you to avoid this issue, MUnit allows you to implement an FTP server in your local environment.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-munit-ftp-server-module"><a class="anchor" href="#install-munit-ftp-server-module"></a>Install MUnit FTP Server Module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For this example, you need to install  the <strong>FTP server Module</strong> provided by MUnit.<br>
From Anypoint Studio, go to <strong>Help</strong> and <strong>Install New Software&#8230;&#8203;</strong>.<br>
In the <strong>Work with:</strong> panel look for <strong>MUnit Update Site</strong>, and from the <strong>MUnit Tools for Mule</strong> section, select <strong>FTP server Module (Mule 3.4.0+)</strong></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A few considerations if you are using Maven:</p>
</div>
<div class="paragraph">
<p>You need to add the MUnit FTP server artifact to your <code>pom</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;!-- ftpServer Dependency --&gt;
&lt;dependency&gt;
	&lt;groupId&gt;com.mulesoft.munit.utils&lt;/groupId&gt;
	&lt;artifactId&gt;munit-ftpserver-module&lt;/artifactId&gt;
		&lt;version&gt;1.1.0&lt;/version&gt;
	&lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Also this code example uses Spring for the Database configuration. When running from Maven, you should add Spring&#8217;s dependencies to your <code>pom.xml</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;!-- Spring Dependency --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.springframework&lt;/groupId&gt;
  &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;
  &lt;version&gt;4.1.6.RELEASE&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-a-test-using-munit-ftp-server"><a class="anchor" href="#creating-a-test-using-munit-ftp-server"></a>Creating a Test Using MUnit FTP Server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For the purpose of this documentation we are going to assume we are testing the
following Mule code:</p>
</div>
<div class="exampleblock ex">
<div class="content">
<h3 id="studio-visual-editor" class="discrete view">Studio Visual Editor</h3>
<div class="imageblock">
<div class="content">
<img src="./_images/ftp-code-to-test.png" alt="ftp code to test">
</div>
</div>
<h3 id="xml-or-standalone-editor" class="discrete view">XML or Standalone Editor</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;flow name="exampleFlow"&gt;
  &lt;set-payload value="#['something_something_dark_side']"/&gt;

  &lt;ftp:outbound-endpoint host="${host}" port="${ftp.port}" user="${ftp.user}" password="${ftp.password}" outputPattern="ftp-jsonResult.txt" path="/tmp"&gt;
  &lt;/ftp:outbound-endpoint&gt;
&lt;/flow&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For this example, we are using properties <code>${host}</code> and <code>${ftp.port}</code>.<br>
Remember to add these properties in your <code>mule-app.properties</code> file:</p>
</div>
<div class="paragraph">
<p>ftp.port=22<br>
host=localhost/</p>
</div>
<div class="paragraph">
<p>It is also required for you to set a user and a password for the FTP configuration.<br>
For this example, any credentials work, so add the following lines in your <code>mule-app.properties</code> file:</p>
</div>
<div class="paragraph">
<p>ftp.user=max<br>
ftp.password=munittest</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The username field cannot be empty.<br>
If you do not have a username/password pair, set the username to <code>anonymous</code> and don&#8217;t set any password since, by default, the <code>anonymous</code> attribute is set to true.<br>
Learn more about this in the attributes table for <a href="#defining-the-ftp-server">defining the FTP server</a></p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="defining-the-ftp-server"><a class="anchor" href="#defining-the-ftp-server"></a>Defining the FTP Server</h3>
<div class="paragraph">
<p>Define the FTP server using the <code>FTP Server</code> connector from the <code>MUnit Integration Test Tools</code> in your Mule Pallet.<br>
The DB Server can take the following parameters:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the configuration name of this FTP server. The value must be unique.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>port</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the port on which the FTP server should listen.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Anonymous</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Boolean.) Sets anonymous access to the FTP Server. If Anonymous is set to true, by setting the username to "anonymous" you don&#8217;t need to set a password to access the FTP server. Default value is true.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>secure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Boolean.) Defines the FTP protocol. When the secure parameter is set to true, the server behaves as a SFTP server and connections are allowed only through authentication. If it is set to false, the server behaves as a FTP server and allows either authenticated or anonymous connections. Default value is false.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>homeDir</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the user home directory. The default value is the filesystem root.<br>
It is possible to define the FTP user home directory using the "~" character to represent the home directory on the file system.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Proceed to define your FTP Server configuration in a new <a href="munit-suite.html">MUnit Suite</a>.</p>
</div>
<div class="paragraph">
<p>First, you need to set <code>both mock connectors</code> and <code>mock inbounds</code> options to false:</p>
</div>
<div class="exampleblock ex">
<div class="content">
<h3 id="studio-visual-editor-2" class="discrete view">Studio Visual Editor</h3>
<div class="imageblock">
<div class="content">
<img src="./_images/munit-configuration-mock-false.png" alt="munit configuration mock false">
</div>
</div>
<h3 id="xml-or-standalone-editor-2" class="discrete view">XML or Standalone Editor</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;munit:config mock-inbounds="false" mock-connectors="false"/&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Next, define your FTP configuration:</p>
</div>
<div class="exampleblock ex">
<div class="content">
<h3 id="studio-visual-editor-3" class="discrete view">Studio Visual Editor</h3>
<div class="paragraph">
<p>Navigate to your <strong>Global Elements</strong> tab, and select your <strong>FTP Server</strong> element. Click <strong>Edit</strong> and complete the fields:</p>
</div>
<div class="paragraph">
<p><em>Name</em>: ftpServer<br>
<em>port</em>.: ${ftp.port}<br>
<em>Username</em>.: ${ftp.user}<br>
<em>Password</em>.: ${ftp.password}<br></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./_images/ftp-server-config.png" alt="ftp server config">
</div>
</div>
<h3 id="xml-or-standalone-editor-3" class="discrete view">XML or Standalone Editor</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;ftpserver:config port="${ftp.port}" name="ftpServer"/&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="starting-the-ftp-server"><a class="anchor" href="#starting-the-ftp-server"></a>Starting the FTP Server</h3>
<div class="paragraph">
<p>In order to run, the FTP server must be started in the <code>before-suite</code>. You start the server using the <code>start-server</code> message processor.</p>
</div>
<div class="exampleblock ex">
<div class="content">
<h3 id="studio-visual-editor-4" class="discrete view">Studio Visual Editor</h3>
<div class="imageblock">
<div class="content">
<img src="./_images/ftp-server-start.png" alt="ftp server start">
</div>
</div>
<h3 id="xml-or-standalone-editor-4" class="discrete view">XML or Standalone Editor</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;munit:before-suite name="before.suite" description="Starting FTP server"&gt;
  &lt;ftpserver:start-server config-ref="ftpServer"/&gt;
&lt;/munit:before-suite&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="running-the-test"><a class="anchor" href="#running-the-test"></a>Running the Test</h3>
<div class="paragraph">
<p>Once our FTP server is up and running we can run our test.</p>
</div>
<div class="exampleblock ex">
<div class="content">
<h3 id="studio-visual-editor-5" class="discrete view">Studio Visual Editor</h3>
<div class="imageblock">
<div class="content">
<img src="./_images/run-ftp-server-test.png" alt="run ftp server test">
</div>
</div>
<h3 id="xml-or-standalone-editor-5" class="discrete view">XML or Standalone Editor</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;munit:test name="testFTPServer" description="Data must be stored in the ftp server"&gt;
  &lt;flow-ref name="exampleFlow" /&gt;
  &lt;ftpserver:contains-files file="ftp-jsonResult.txt" path="/tmp" config-ref="ftpServer"/&gt;
&lt;/munit:test&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This FTP accepts any user, so there is no need to set up a user database or list.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As you can see in the test, we make use of the <code>contains-file</code> message processor.</p>
</div>
<div class="paragraph">
<p>This message processor attempts to validate the existence of a file in the FTP server. If the file is not present, the message processor fails, thus causing the test to fail.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>config-ref</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the FTP server configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>path</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines in which folder to search based on the user home directory defined previously.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>file</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the name of the file to look for.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <code>remove</code> message processor provides another operation that may be of use. This operation instructs the FTP server to remove a file from storage.</p>
</div>
<div class="exampleblock ex">
<div class="content">
<h3 id="studio-visual-editor-6" class="discrete view">Studio Visual Editor</h3>
<div class="imageblock">
<div class="content">
<img src="./_images/ftp-server-delete.png" alt="ftp server delete">
</div>
</div>
<h3 id="xml-or-standalone-editor-6" class="discrete view">XML or Standalone Editor</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;ftpserver:remove config-ref="ftpServer" path="/tmp/ftp-jsonResult.txt"/&gt;</code></pre>
</div>
</div>
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>config-ref</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the FTP server configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>path</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The full path of the file to remove.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
This feature is of use when we are creating the same file name several times. For example, we can make use of it in an <code>after-test</code> to ensure that no name collisions cause the test to fail.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="stopping-the-ftp-server"><a class="anchor" href="#stopping-the-ftp-server"></a>Stopping the FTP Server</h3>
<div class="paragraph">
<p>To stop the FTP server gracefully, it needs to be stopped in the <code>after-suite</code>, using the <code>stop-server</code> message processor.</p>
</div>
<div class="exampleblock ex">
<div class="content">
<h3 id="studio-visual-editor-7" class="discrete view">Studio Visual Editor</h3>
<div class="imageblock">
<div class="content">
<img src="./_images/stop-ftp-server.png" alt="stop ftp server">
</div>
</div>
<h3 id="xml-or-standalone-editor-7" class="discrete view">XML or Standalone Editor</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;munit:after-suite name="after.suite" description="Stoping FTP server"&gt;
  &lt;ftpserver:stop-server config-ref="ftpServer"/&gt;
&lt;/munit:after-suite&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="execution-environments"><a class="anchor" href="#execution-environments"></a>Execution Environments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You may have noticed that our production code example makes extensive use of placeholders for certain parameters, such as <code>host</code>, <code>port</code> etc. in the example below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;ftp:outbound-endpoint host="${host}" port="${ftp.port}" user="${ftp.user}" password="${ftp.password}" outputPattern="ftp-jsonResult.txt" path="/tmp"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The reason for this is that properties allow us to create code that is more configurable. Compare the example above with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;ftp:outbound-endpoint host="some.host" port="myPort" user="myUser" password="myPassword" outputPattern="ftp-jsonResult.txt" path="/tmp"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The second example code is untestable, even without MUnit. If we need to test this code before going to production, we always hit the production DB server with our real credentials, which entails risk.</p>
</div>
<div class="paragraph">
<p>On the other hand, the first example code allows us to define two different property files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>One for testing environment</p>
</li>
<li>
<p>One for the production environment</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This is used in combination with the Mule property placeholder, shown below with <code>${env}</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;global-property value="mule.${env}.property"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example above, the use of <code>${env}</code> allows us to leverage execution environments. So for example we can define two separate properties files, <code>mule.test.properties</code> and <code>mule.prod.properties</code>, containing the same properties with values according to the environment we wish to use.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
To run your test from Maven and issue the env parameter from the command line, you can run: <code>mvn -DargLine="-Dmule.env=test" clean test</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
  </article>
</main>
<footer class="footer"><div class="footer__wrapper">
      <div class="footer__top">
              </div>
      <div class="footer-bottom-wrapper">
        <!--<a href="/" title="Home" rel="home" class="header__logo" id="logo"><img src="/sites/all/themes/muletheme/images/mule_logo.svg" alt="Home" class="header__logo-image" /></a>-->
        <div class="connect-footer">
          <p>Sign up for our Dev newsletter</p>
          <div class="connect-footer">

</div>
  </div>
        <div class="terms-conditions temp">
          <div id="block-menu-menu-footer-bottom-menu" class="block block-menu contextual-links-region first last odd" role="navigation">
            <ul class="menu"><li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/" class="menu__link">MuleSoft.com</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://blogs.mulesoft.com/" class="menu__link">Blog</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/content/terms-service" class="menu__link">Terms</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/privacy-policy" class="menu__link">Privacy</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/contact" class="menu__link">Contact</a></li>
            </ul></div>
                    <div class="default-terms-conditions">
          </div>
          MuleSoft provides a widely used <a href="https://www.mulesoft.com/platform/enterprise-integration">integration platform</a> for connecting SaaS and enterprise applications in the cloud and on-premise. Delivered as a unified integration experience, <a href="https://www.mulesoft.com/platform/saas/cloudhub-ipaas-cloud-based-integration">CloudHub&trade;</a> and <a href="https://www.mulesoft.com/platform/soa/mule-esb-open-source-esb">Mule ESB&trade;</a> (Enterprise Service Bus) are built on proven open source technology for fast and reliable on-premise and cloud integration without vendor lock-in.


        </div>
      </div>
      <div class="footer-end">
        <div class="footer-logo-wrapper">
          <a href="https://developer.mulesoft.com/" class="footer-logo"></a>
        </div>
        <ul class="social-links"><li><a href="https://www.mulesoft.com/lp/contact" target="_blank" class="icon-muletheme-phone"></a></li>
          <li><a href="https://www.linkedin.com/company/mulesoft" target="_blank" class="icon-muletheme-linkedin"></a></li>
          <li><a href="https://twitter.com/muledev" target="_blank" class="icon-muletheme-twitter"></a></li>
          <li><a href="https://www.facebook.com/MuleSoft" target="_blank" class="icon-muletheme-facebook"></a></li>
          <li><a href="mailto:info@mulesoft.com" target="_blank" class="icon-muletheme-email"></a></li>
          <li><a href="https://videos.mulesoft.com/" target="_blank" class="icon-muletheme-youtube"></a></li>
        </ul><p class="copyright"><span>&copy;2017</span> MuleSoft, INC.</p>
      </div>
    </div>
    </footer><script src="../../_theme/scripts/menu.js"></script>
<script src="../../_theme/scripts/highlight.pack.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>
