<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="migration, devkit, release notes">
  <link rel="canonical" href="https://ede65566-docs-migration.github.io/docs-site/solutions/migration/anypoint-connector-devkit/3.6-to-3.7-migration-guide.html">
  <link rel="stylesheet" href="../../../_theme/stylesheets/theme.css">
  <title>Connector Migration Guide - DevKit 3.6 to 3.7 // MuleSoft Documentation</title>
</head>
<body class="article">
<header class="header" id="header" role="banner"><div class="header__wrapper clearfix">
      <div class="header__logo--primary-nav clearfix">
        <a href="https://docs.mulesoft.com" title="Home" rel="home" class="header__logo" id="logo">
          <img src="../../../_theme/images/mulesoft-dev-logo.svg" alt="Home" class="header__logo-image"></a>
          <div class="header__region region region-header">
    <div id="block-system-main-menu" class="block block-menu first last odd" role="navigation">

        <h2 class="block__title block-title">Main Dev Menu</h2>
    
  <ul class="menu"><li class="menu__item is-expanded first expanded"><span class="menu__link">Platform</span><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="https://developer.mulesoft.com/dev/anypoint-studio" title="" class="menu__link">Studio</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/connectors" title="" class="menu__link">Connectors</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/anypoint-exchange" title="" class="menu__link">Exchange</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/design-api" title="" class="menu__link">API Designer</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/api-developer-portal" title="" class="menu__link">API Portal</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/mule-runtime-engine" title="" class="menu__link">Mule runtime engine</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/api-management" title="" class="menu__link">API Manager</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://developer.mulesoft.com/dev/reporting-api-analytics" title="" class="menu__link">API Analytics</a></li>
</ul></li>
<li class="menu__item is-expanded expanded"><span class="menu__link">Resources</span><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="https://developer.mulesoft.com/getting-started/anypoint-platform" class="menu__link">Getting started</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/tutorials-and-howtos" class="menu__link">Tutorials &amp; HowTos</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/webinars-and-videos" title="" class="menu__link">Webinars &amp; Videos</a></li>
<li class="menu__item is-leaf leaf"><a href="http://s2.developer.mulesoft.com/workshops" class="menu__link">Online Workshops</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/integration-books-and-resources" class="menu__link">Books &amp; Whitepapers</a></li>
<li class="menu__item is-leaf leaf"><a href="https://blogs.mulesoft.com/dev/" class="menu__link">Blog</a></li>
<li class="menu__item is-leaf leaf"><a href="https://docs.mulesoft.com" class="menu__link">Documentation</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://training.mulesoft.com" class="menu__link">Training</a></li>
</ul></li>
<li class="menu__item is-expanded expanded"><a href="https://developer.mulesoft.com/community" class="menu__link">Community</a><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="http://forum.mulesoft.org/" class="menu__link">Forums</a></li>
<li class="menu__item is-leaf leaf"><a href="https://meetups.mulesoft.com" class="menu__link">Meetups</a></li>
<li class="menu__item is-leaf leaf"><a href="http://s2.developer.mulesoft.com/" class="menu__link">Contributed Content</a></li>
<li class="menu__item is-leaf leaf"><a href="https://s2.developer.mulesoft.com/jobs.html" class="menu__link">Jobs</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://www.mulesoft.org/jira/browse/MULE" class="menu__link">Issue tracker</a></li>
</ul></li>
<li class="menu__item is-leaf last leaf"><a href="https://developer.mulesoft.com/champions" class="menu__link">Champions</a></li>
</ul></div>
  </div>
      </div> <!-- header__logo--primary-nav -->
      <div class="header__top-wrapper">
        <div class="header__nav-wrapper">
                      <div class="region region-header-top">
    <div id="block-search-form" class="block block-search first last odd" role="search">

      
  
</div>
  </div>
        </div>
        <div class="top-nav-ctas">
          <a class="icon-muletheme-phone" href="https://mulesoft.com/lp/contact" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-contact');"></a>
          <a href="https://anypoint.mulesoft.com/login/#/signup?apintent=dmc_generic" class="try" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-nav');">Try now</a>
          <a href="https://mulesoft.com/" class="dev" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-mscom');">MuleSoft.com</a>
        </div>
      </div> <!-- header__secondary-nav-search -->
    </div> <!-- header__wrapper -->
    <a href="#sidr" id="open-left" class="closed">
    </a>
  </header><main role="main" class="main-wrapper">
  <div class="navigation-wrapper">
    <nav role="navigation" class="navigation">
      <div class="search">
        <input type="text" placeholder="Search the docs" class="search-input" autocomplete="off" autocorrect="off" autocapitalize="off">
      </div>
      <div class="inner-nav">
          <ul class="nav-lst">
              <li class="nav-itm" data-depth="0" data-state="collapsed">
                  <button class="nav-tgl"></button>
                <a class="nav-lnk" href="../../anypoint-b2b.html">Anypoint B2B</a>
                  <ul class="nav-lst">
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="https://www.mulesoft.com/exchange#!/edifact-edi-integration-connector">EDIFACT Module</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="https://www.mulesoft.com/exchange#!/edifact-edi-integration-connector">TRADACOMS EDI</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="https://www.mulesoft.com/exchange#!/x12-edi-integration-connector">X12 Module</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="https://www.mulesoft.com/exchange#!/edifact-edi-integration-connector">EDI Schema Language Reference</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/index.html">Anypoint Partner Manager</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                  <button class="nav-tgl"></button>
                                <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/key-concepts.html">Key Concepts</a>
                                  <ul class="nav-lst">
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/b2b-transaction-processing-framework.html">B2B Transaction-Processing Framework</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/resolution-processes.html">Resolution Processes</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/tracking.html">Tracking</a>
                                      </li>
                                  </ul>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/examples.html">Examples</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                  <button class="nav-tgl"></button>
                                <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/transaction-monitoring.html">Transaction Monitoring</a>
                                  <ul class="nav-lst">
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/central-pane-elements.html">Central Pane Elements</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/tracking-scenarios.html">Tracking Scenarios</a>
                                      </li>
                                  </ul>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                  <button class="nav-tgl"></button>
                                <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/partner-configuration.html">Partner Configuration</a>
                                  <ul class="nav-lst">
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/company-information.html">Company Information</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/identifiers.html">Identifiers</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/on-hold-inactive.html">On-Hold/Inactive</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="https://www.mulesoft.com/exchange#!/as2-integration-connector">Certificate</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="https://www.mulesoft.com/exchange#!/x12-edi-integration-connector">X12 Settings</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="https://www.mulesoft.com/exchange#!/edifact-edi-integration-connector">EDIFACT Settings</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/csv-settings.html">CSV Settings</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/document-types.html">Document Types</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/endpoints.html">Endpoints</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/maps.html">Maps</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/channels.html">Channels</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/routes.html">Routes</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/partner-conversations.html">Partner Conversations</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/rosettanet-pips.html">RosettaNet PIPs</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/rosettanet-agreements.html">RosettaNet Agreements</a>
                                      </li>
                                  </ul>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                  <button class="nav-tgl"></button>
                                <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/administration.html">Administration</a>
                                  <ul class="nav-lst">
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/environments.html">Environments</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/error-codes.html">Error Codes</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/security.html">Security</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/lookup-tables.html">Lookup Tables</a>
                                      </li>
                                  </ul>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                  <button class="nav-tgl"></button>
                                <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/walkthroughs.html">Walkthroughs</a>
                                  <ul class="nav-lst">
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="https://www.mulesoft.com/exchange#!/as2-integration-connector">AS2 and EDI X12 Purchase Order Walkthrough</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/ftps-and-edi-x12-purchase-order-walkthrough.html">FTPS and EDI X12 Purchase Order Walkthrough</a>
                                      </li>
                                      <li class="nav-itm" data-depth="3" data-state="collapsed">
                                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/transaction-tracking-walkthrough.html">Transaction Tracking Walkthrough</a>
                                      </li>
                                  </ul>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/anypoint-partner-manager-api.html">Anypoint Partner Manager API</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/glossary.html">Glossary</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/partner-manager-connector.html">Partner Manager Connector</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="https://www.mulesoft.com/exchange#!/as2-integration-connector">AS2 Connector</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/ftps-connector.html">FTPS Connector</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="https://www.mulesoft.com/exchange#!/x12-edi-integration-connector">EDI X12 Order Processing Example</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="../../../anypoint-platform/partner-manager/supported-edi-document-types.html">Supported EDI Document Types</a>
                      </li>
                  </ul>
              </li>
              <li class="nav-itm" data-depth="0" data-state="collapsed">
                  <button class="nav-tgl"></button>
                <a class="nav-lnk" href="../../getting-started/index.html">Getting Started with Anypoint Platform</a>
                  <ul class="nav-lst">
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="../../getting-started/design-an-api.html">To Design an API</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="../../getting-started/implement-and-test-api.html">To Implement and Test an API</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="../../getting-started/sync-api.html">To Sync an API</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="../../../anypoint-platform/exchange/index.html">Anypoint Exchange</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="../../../anypoint-platform/exchange/exchange-faq.html">Anypoint Exchange FAQ</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="../../getting-started/build-a-hello-world-application.html">Tutorial: Creating a Mule App</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="../../getting-started/anypoint-connector.html">Anypoint Connector Tutorial</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="../../../mule-runtime/3.8/messages/mule-message.html">How to Work with a Mule Message</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="../../getting-started/content-based-routing.html">How to Route Mule Messages Using a Switch Statement</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="../../../anypoint-platform/cloudhub/deploy-to-cloudhub.html">Deploy to CloudHub</a>
                      </li>
                  </ul>
              </li>
              <li class="nav-itm" data-depth="0" data-state="collapsed">
                  <button class="nav-tgl"></button>
                <a class="nav-lnk" href="../../healthcare-toolkit/index.html">Healthcare Toolkit</a>
                  <ul class="nav-lst">
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="../../healthcare-toolkit/hl7/hl7-edi.html">HL7 EDI</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="../../healthcare-toolkit/mllp-connector.html">HL7 MLLP</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="../../healthcare-toolkit/connector-testpanel.html">Connector Testing with TestPanel</a>
                      </li>
                  </ul>
              </li>
          </ul>
      </div>
    </nav>
  </div>
  <article class="primary-content">
    <header class="article-header">
      <div class="breadcrumb">
        <strong class="breadcrumb-item">[ Domain Selector Placeholder ]</strong> /
        <span class="breadcrumb-item">Connector Migration Guide - DevKit 3.6 to 3.7</span>
      </div>
      <div class="edit-on-github">
        <a href="https://github.com/ede65566-docs-migration/solutions-docs/edit/master/modules/migration/content/anypoint-connector-devkit/3.6-to-3.7-migration-guide.adoc" class="edit-on-github-link">Edit on Github</a>
      </div>
    </header>
    <h1>Connector Migration Guide - DevKit 3.6 to 3.7</h1>
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><strong>July 8, 2015</strong></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="migrating-from-devkit-3-6-to-3-7"><a class="anchor" href="#migrating-from-devkit-3-6-to-3-7"></a>Migrating from DevKit 3.6 to 3.7</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The sections that follow list DevKit changes between versions 3.6.n and 3.7.0.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Although apps built with DevKit 3.7 support being deployed to environments that run on JDK 8, the environment in which you build your DevKit connector should use JDK 7. JDK 8 is not supported for compiling new connectors with DevKit.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="new-connector-functional-testing-framework"><a class="anchor" href="#new-connector-functional-testing-framework"></a>New Connector Functional Testing Framework</h3>
<div class="paragraph">
<p>The goal of this new framework is twofold. In the first place, it eases the test development phase by decoupling Mule flows with the test logic itself: no flow references are now defined within flows and therefore a notion of Mule flows is not required from the test developer side. In the second place, it now allows connector tests to run in different Mule versions, either locally or in CloudHub in an automatic manner. As a result, we can now test connector code against multiple Mule versions, assuring backward-compatibility, forward-compatibility, and library-compatibility.</p>
</div>
</div>
<div class="sect2">
<h3 id="old-mule-connector-test-for-devkit-3-6-n-and-previous-versions"><a class="anchor" href="#old-mule-connector-test-for-devkit-3-6-n-and-previous-versions"></a>Old Mule Connector Test For DevKit 3.6.n and Previous Versions</h3>
<div class="paragraph">
<p>Consider the following when running a test with the old test framework. Let’s consider an example with the Salesforce connector test suite.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Extend from <strong>ConnectorTestCase</strong>. This class brings up methods such <strong>initializeTestRunMessage</strong>, <strong>runFlowAndGetPayload,</strong> or <strong>upsertOnTestRunMessage</strong>. These methods let you load test data through Spring beans, run a flow, get the resulting payload, and add data to a common test data container, respectively.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.mule.modules.salesforce.automation.testcases;
       import org.mule.modules.tests.ConnectorTestCase;
       public abstract class AbstractTestCase extends ConnectorTestCase {
}</code></pre>
</div>
</div>
</li>
<li>
<p>Load test data and set up the test context by loading test data through <strong>initializeTestRunMessage(springName)</strong>, running a particular flow by means of <strong>runFlowAndGetPayload(flowName)</strong>, and keeping the resulting value with <strong>upsertOnTestRunMessage(key,value)</strong>. These methods require a Spring bean definition file, normally called <strong>automationSpringBeans.xml</strong> and a Mule application flows file, normally called <strong>automation-test-flows.xml</strong>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.mule.modules.salesforce.automation.testcases;
 ...
public class AbortJobTestCases extends AbstractTestCase {
@Before
public void setUp() throws Exception {
      initializeTestRunMessage("abortJobTestData");
      JobInfo jobInfo = runFlowAndGetPayload("create-job");
      upsertOnTestRunMessage("jobId", jobInfo.getId());
}
 ...</code></pre>
</div>
</div>
</li>
<li>
<p>Execute the test, where different flows can be called by means of <strong>runFlowAndGetPayload(flowName)</strong>, <strong>runFlowAndExpectProperty(flowName, propertyName, expectedObject),</strong> or <strong>runFlowWithPayloadAndExpect(flowName, expectedObject, payload)</strong>, among other available methods.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Category({RegressionTests.class})
@Test
  public void testAbortJob() {
  try {
     JobInfo jobInfo = runFlowAndGetPayload("abort-job");

    assertEquals(com.sforce.async.JobStateEnum.Aborted,  jobInfo.getState());
    assertEquals(getTestRunMessageValue("jobId").toString(), jobInfo.getId());
    assertEquals(getTestRunMessageValue("concurrencyMode").toString(),jobInfo.getConcurrencyMode().toString());
    assertEquals(getTestRunMessageValue("operation").toString(),jobInfo.getOperation().toString());
    assertEquals(getTestRunMessageValue("contentType").toString(),
    jobInfo.getContentType().toString());

    } catch (Exception e) {
        fail(ConnectorTestUtils.getStackTrace(e));
    }
  }
}</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="take-away-from-the-pre-3-7-test-framework"><a class="anchor" href="#take-away-from-the-pre-3-7-test-framework"></a>Take-Away From the Pre-3.7 Test Framework</h3>
<div class="paragraph">
<p>The following is how a normal test looks like with the pre-3.7 test framework, where we can observe two things.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>On the one hand, we have the test data in a Spring bean file, which normally looks like this:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;beans xmlns="http://www.springframework.org/schema/beans"
...&gt;

    &lt;context:property-placeholder location="${CREDENTIALS}"/&gt;

        &lt;util:map id="abortJobTestData" map-class="java.util.HashMap" key-type="java.lang.String" value-type="java.lang.Object"&gt;
              &lt;entry key="type" value="Account" /&gt;
              &lt;entry key="concurrencyMode" value="Parallel" /&gt;
              &lt;entry key="contentType" value="XML" /&gt;
              &lt;entry key="externalIdFieldName" value="Id" /&gt;
              &lt;entry key="operation" value="insert" /&gt;
        &lt;/util:map&gt;
&lt;/beans&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This Spring file gathers all test data used through out the entire test execution phase.</p>
</div>
</li>
<li>
<p>On the other hand, we have a* Mule application flows* file, which looks like this:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;mule xmlns="http://www.mulesoft.org/schema/mule/core"...&gt;
&lt;context:property-placeholder location="CREDENTIALS"/&gt;
&lt;sfdc:config name="Salesforce" doc:name="configDocName" password="${config.password}" username="${config.username}" ...&gt;

&lt;flow name="create-job" doc:name="create-job"&gt;
     &lt;sfdc:create-job config-ref="Salesforce" doc:name="Create job" type="#[payload.type]" concurrencyMode="#[payload.concurrencyMode]" contentType="#[payload.contentType]" externalIdFieldName="#[payload.externalIdFieldName]" operation="#[payload.operation]"&gt;&lt;/sfdc:create-job&gt;
&lt;/flow&gt;
&lt;flow name="abort-job" doc:name="abort-job"&gt;
       &lt;sfdc:abort-job config-ref="Salesforce" doc:name="Abort job" jobId="#[payload.jobId]"&gt;
       &lt;/sfdc:abort-job&gt;
&lt;/flow&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This Mule application flows file defines the way a Salesforce operation (keeping in mind we are working with Salesforce as an example) is executed. A flow defines a particular operation to be carried out, a name, the connector configuration to be used and every parameter for that particular operation. A Mule application is formed by flows, which are define in one (or many) Mule application flows file.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Therefore, in order to run a test (or a battery of tests), define a Spring bean file along with a flow files, mostly disaggregating test data, methods to be run and the logic of the test itself. It becomes virtually impossible to understand a test by simple reading a test class without either the Spring file or the flows file.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The goal of the new connector test framework is to make a test self-contained, decoupling the test from Mule flows and Spring beans. You should have a minimum understanding of how Mule runs, keeping the test data within the test itself (or closed enough).</p>
</div>
<div class="paragraph">
<p>The next section introduces the new connector test framework along with its features. We additionally show different use cases, including features such as pagination or Mule DataSense.</p>
</div>
</div>
<div class="sect2">
<h3 id="migration-guideline-to-the-new-framework"><a class="anchor" href="#migration-guideline-to-the-new-framework"></a>Migration Guideline to the New Framework</h3>
<div class="paragraph">
<p>Migration from the previous Mule Connector Test approach to this new framework has been carefully thought and as a result we have easy-to-follow migration guidelines.</p>
</div>
</div>
<div class="sect2">
<h3 id="iterative-migration"><a class="anchor" href="#iterative-migration"></a>Iterative Migration</h3>
<div class="paragraph">
<p>We strongly advise connector developers to move current connector tests to a legacy package. For example, if you currently have a package named <strong>org.mule.modules.connector.automation.testcases</strong>, rename it to <strong>org.mule.modules.connector.automation.testcases.legacy</strong>. Then create a package <strong>org.mule.modules.connector.automation.testcases</strong>, as before. This newly created package now contains every migrated test.</p>
</div>
<div class="paragraph">
<p>Test resources are likely to be used within the migrated tests and therefore we advise to leave these resources as they are, normally within <code>src/test/resources</code>.</p>
</div>
<div class="paragraph">
<p>Some tests might not be migrated, either due to framework limitations or to developer choices. If framework limitations or problem arise during migration, inform Mule Support.</p>
</div>
<div class="paragraph">
<p>Take in mind that we currently do not pack the old framework Maven dependency required to run the legacy test suite. Said that, if you maintain the legacy suite is required to manually add the dependency in the pom.xml file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
       &lt;groupId&gt;org.mule.modules&lt;/groupId&gt;
       &lt;artifactId&gt;mule-connector-test&lt;/artifactId&gt;
       &lt;version&gt;2.0.7&lt;/version&gt;
       &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="calling-a-connector-method-versus-a-mule-flow"><a class="anchor" href="#calling-a-connector-method-versus-a-mule-flow"></a>Calling a Connector Method Versus a Mule Flow</h3>
<div class="paragraph">
<p>The major change from Mule Connector Test to this new test framework is how operations are called and executed. Let’s consider the following example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">...
initializeTestRunMessage("sampleTestCaseData");
JobInfo jobInfo = runFlowAndGetPayload("create-job");
upsertOnTestRunMessage("jobId", jobInfo.getId());
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>We first need to <strong>load</strong> the test data by means of a Spring bean, called sampleTestCaseData, defined in an external Spring beans file. Next, we need to run a Mule flow, called create-job, defined as well in an external file. Finally, we need to add to a common data container the recently obtained job identifier for a later use. This require to understand Spring beans, Mule flows and three different methods from <strong>ConnectorTestCase</strong> to execute a simple create job operation.</p>
</div>
<div class="paragraph">
<p>We have radically changed this approach. We have simplified the way a test developer writes a test by enabling direct access to the operations of a connector. Only special operations, such as paginated ones, require alternative methods. Considering the same example as before, we now have a simplified interface, considering that we already have a connector mockup instance, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">...
JobInfo jobInfo = connector.createJob(OperationEnum.insert, "Account", "Id", ContentType.XML, ConcurrencyMode.Parallel);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The main characteristic is that the concept of Mule flows disappears and test data is bundled within the test itself.</p>
</div>
</div>
<div class="sect2">
<h3 id="test-data-management"><a class="anchor" href="#test-data-management"></a>Test Data Management</h3>
<div class="paragraph">
<p>Test data is currently maintained within Spring beans. We encourage to drop support for Spring beans and follow these practices:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If test objects are simple (String, Integers, etc.), just add to the test itself as in:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">JobInfo jobInfo = connector.createJob(OperationEnum.insert, "Account", "Id", ContentType.XML, ConcurrencyMode.Parallel);</code></pre>
</div>
</div>
</li>
<li>
<p>If test objects are complex such as Domain objects, implement a <strong>DataBuilder</strong> and use it as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">List&lt;Map&lt;String, Object&gt;&gt; batchPayload = DataBuilder.createdBatchPayload();
    batchInfo = connector.createBatch(jobInfo, batchPayload);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Implementing a DataBuilder is mandatory  to keep tests consistent. However, the DataBuilder can read the existent Spring beans to load already defined objects or create new ones from scratch following the build pattern . If loading existent Spring beans to build objects, a possible way is using an ApplicationContext as follows inside the data builder class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import ...
public class TestDataBuilder {

      public TestDataBuilder(){
          ApplicationContext context = new ClassPathXmlApplicationContext(automationSpringBeans.xml);
      }

      public static CustomObjectType createCustomTestData(){
          CustomObjectType ret = (CustomObjectType) context.getBean("customObject");
          return ret;
      }

      public void shutDownDataBuilder(){
      ((ConfigurableApplicationContext)context).close();
      }
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="configurable-fields-not-supported-at-connector-module-class-level"><a class="anchor" href="#configurable-fields-not-supported-at-connector-module-class-level"></a>@Configurable Fields Not Supported at @Connector/@Module Class Level</h3>
<div class="paragraph">
<p>In DevKit 3.7.n, @Configurable fields in @Connector and/or @Module classes are no longer encouraged. You should move @Configurable fields to a proper @Config.</p>
</div>
<div class="sect3">
<h4 id="3-6-n-connector-example"><a class="anchor" href="#3-6-n-connector-example"></a>3.6.n Connector Example</h4>
<div class="paragraph">
<p>The following shows how the @Connector class was coded in version 3.6.n:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Connector(name="my-connector", friendlyName="MyConnector")
public class MyConnector
{
    @Configurable
    String token;

    @Config
    ConnectorConfiguration config;

    @Processor
    public String myProcessor(String param) {
    ...
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="3-7-n-connector-example"><a class="anchor" href="#3-7-n-connector-example"></a>3.7.n Connector Example</h4>
<div class="paragraph">
<p>The following shows how the  @C onnector class is now coded in version 3.7.n:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Connector(name="my-connector", friendlyName="MyConnector")
public class MyConnector
{
    @Config
    ConnectorConfiguration config;

    @Processor
    public String myProcessor(String param) {
    ...
    }
}


@Configuration(configElementName="config",friendlyName="Configuration")
public class ConnectorConfiguration
{
    @Configurable
    String token;


    // More Configurable Fields
    …


}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Important</strong>: If you want to share @Configurable fields between @Config classes, create an abstract class and make all your @Config classes extend that parent element that contains the shared @Configurable fields.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="inject-is-not-supported-at-processor-level"><a class="anchor" href="#inject-is-not-supported-at-processor-level"></a>@Inject is Not Supported at @Processor Level</h3>
<div class="paragraph">
<p>Mule 3.7 is compliant with the JSR-330 specification. Because of that, the @Inject annotation at @Processor level is invalid. Starting with DevKit 3.7, if the signature method has either MuleEvent or MuleMessage as a parameter, DevKit properly injects the parameter when the processor is called.</p>
</div>
<div class="paragraph">
<p>*Important: * DevKit does not support the JSR-330 specification.</p>
</div>
<div class="sect3">
<h4 id="3-6-n-legacy-inject-example"><a class="anchor" href="#3-6-n-legacy-inject-example"></a>3.6.n Legacy @Inject Example</h4>
<div class="paragraph">
<p>The following shows how @Inject was used in version 3.6.n:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
@Processor
public boolean parameterInjectionModule(MuleEvent event, MuleMessage message)
    throws Exception {
    if(event == null || message == null) {
        throw new RuntimeException("MuleEvent or MuleMessage cannot be null");
    }
    return true;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="3-7-n-processor-example-with-parameter-injection"><a class="anchor" href="#3-7-n-processor-example-with-parameter-injection"></a>3.7.n @Processor Example With Parameter Injection</h4>
<div class="paragraph">
<p>The following shows how to inject a parameter in version 3.7.n:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Processor
public boolean parameterInjectionModule(MuleEvent event, MuleMessage message)
    throws Exception {
    if(event == null || message == null) {
        throw new RuntimeException("MuleEvent or MuleMessage cannot be null");
    }
    return true;
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="see-also"><a class="anchor" href="#see-also"></a>See Also</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Document</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../../../mule-runtime/3.7/connectors/anypoint-connectors.html">Anypoint Connectors</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MuleSoft connector user guides.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.mulesoft.com/exchange#!/?types=connector&amp;sortBy=name">Connectors</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Connectors available from MuleSoft or third party sources.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../../../anypoint-connector-devkit/3.7/index.html">Anypoint Connector DevKit</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Connector development information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../../../anypoint-connector-devkit/3.7/annotation-reference.html">Annotation Reference</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Describes DevKit elements that start with an at sign(@), which you can use in your connector to identify classes and functions for Anypoint functionality.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
  </article>
</main>
<footer class="footer"><div class="footer__wrapper">
      <div class="footer__top">
              </div>
      <div class="footer-bottom-wrapper">
        <!--<a href="/" title="Home" rel="home" class="header__logo" id="logo"><img src="/sites/all/themes/muletheme/images/mule_logo.svg" alt="Home" class="header__logo-image" /></a>-->
        <div class="connect-footer">
          <p>Sign up for our Dev newsletter</p>
          <div class="connect-footer">

</div>
  </div>
        <div class="terms-conditions temp">
          <div id="block-menu-menu-footer-bottom-menu" class="block block-menu contextual-links-region first last odd" role="navigation">
            <ul class="menu"><li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/" class="menu__link">MuleSoft.com</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://blogs.mulesoft.com/" class="menu__link">Blog</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/content/terms-service" class="menu__link">Terms</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/privacy-policy" class="menu__link">Privacy</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/contact" class="menu__link">Contact</a></li>
            </ul></div>
                    <div class="default-terms-conditions">
          </div>
          MuleSoft provides a widely used <a href="https://www.mulesoft.com/platform/enterprise-integration">integration platform</a> for connecting SaaS and enterprise applications in the cloud and on-premise. Delivered as a unified integration experience, <a href="https://www.mulesoft.com/platform/saas/cloudhub-ipaas-cloud-based-integration">CloudHub&trade;</a> and <a href="https://www.mulesoft.com/platform/soa/mule-esb-open-source-esb">Mule ESB&trade;</a> (Enterprise Service Bus) are built on proven open source technology for fast and reliable on-premise and cloud integration without vendor lock-in.


        </div>
      </div>
      <div class="footer-end">
        <div class="footer-logo-wrapper">
          <a href="https://developer.mulesoft.com/" class="footer-logo"></a>
        </div>
        <ul class="social-links"><li><a href="https://www.mulesoft.com/lp/contact" target="_blank" class="icon-muletheme-phone"></a></li>
          <li><a href="https://www.linkedin.com/company/mulesoft" target="_blank" class="icon-muletheme-linkedin"></a></li>
          <li><a href="https://twitter.com/muledev" target="_blank" class="icon-muletheme-twitter"></a></li>
          <li><a href="https://www.facebook.com/MuleSoft" target="_blank" class="icon-muletheme-facebook"></a></li>
          <li><a href="mailto:info@mulesoft.com" target="_blank" class="icon-muletheme-email"></a></li>
          <li><a href="https://videos.mulesoft.com/" target="_blank" class="icon-muletheme-youtube"></a></li>
        </ul><p class="copyright"><span>&copy;2017</span> MuleSoft, INC.</p>
      </div>
    </div>
    </footer><script src="../../../_theme/scripts/menu.js"></script>
<script src="../../../_theme/scripts/highlight.pack.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>
