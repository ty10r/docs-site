<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="agent, mule, esb, servers, monitor, notifications, external systems, third party, get status, metrics">
  <link rel="canonical" href="https://ede65566-docs-migration.github.io/docs-site/runtime-manager-agent/1.7/jmx-service.html">
  <link rel="stylesheet" href="../../_theme/stylesheets/theme.css">
  <title>JMX Service // MuleSoft Documentation</title>
</head>
<body class="article">
<header class="header" id="header" role="banner"><div class="header__wrapper clearfix">
      <div class="header__logo--primary-nav clearfix">
        <a href="https://docs.mulesoft.com" title="Home" rel="home" class="header__logo" id="logo">
          <img src="../../_theme/images/mulesoft-dev-logo.svg" alt="Home" class="header__logo-image"></a>
          <div class="header__region region region-header">
    <div id="block-system-main-menu" class="block block-menu first last odd" role="navigation">

        <h2 class="block__title block-title">Main Dev Menu</h2>
    
  <ul class="menu"><li class="menu__item is-expanded first expanded"><span class="menu__link">Platform</span><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="https://developer.mulesoft.com/dev/anypoint-studio" title="" class="menu__link">Studio</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/connectors" title="" class="menu__link">Connectors</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/anypoint-exchange" title="" class="menu__link">Exchange</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/design-api" title="" class="menu__link">API Designer</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/api-developer-portal" title="" class="menu__link">API Portal</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/mule-runtime-engine" title="" class="menu__link">Mule runtime engine</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/api-management" title="" class="menu__link">API Manager</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://developer.mulesoft.com/dev/reporting-api-analytics" title="" class="menu__link">API Analytics</a></li>
</ul></li>
<li class="menu__item is-expanded expanded"><span class="menu__link">Resources</span><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="https://developer.mulesoft.com/getting-started/anypoint-platform" class="menu__link">Getting started</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/tutorials-and-howtos" class="menu__link">Tutorials &amp; HowTos</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/webinars-and-videos" title="" class="menu__link">Webinars &amp; Videos</a></li>
<li class="menu__item is-leaf leaf"><a href="http://s2.developer.mulesoft.com/workshops" class="menu__link">Online Workshops</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/integration-books-and-resources" class="menu__link">Books &amp; Whitepapers</a></li>
<li class="menu__item is-leaf leaf"><a href="https://blogs.mulesoft.com/dev/" class="menu__link">Blog</a></li>
<li class="menu__item is-leaf leaf"><a href="https://docs.mulesoft.com" class="menu__link">Documentation</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://training.mulesoft.com" class="menu__link">Training</a></li>
</ul></li>
<li class="menu__item is-expanded expanded"><a href="https://developer.mulesoft.com/community" class="menu__link">Community</a><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="http://forum.mulesoft.org/" class="menu__link">Forums</a></li>
<li class="menu__item is-leaf leaf"><a href="https://meetups.mulesoft.com" class="menu__link">Meetups</a></li>
<li class="menu__item is-leaf leaf"><a href="http://s2.developer.mulesoft.com/" class="menu__link">Contributed Content</a></li>
<li class="menu__item is-leaf leaf"><a href="https://s2.developer.mulesoft.com/jobs.html" class="menu__link">Jobs</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://www.mulesoft.org/jira/browse/MULE" class="menu__link">Issue tracker</a></li>
</ul></li>
<li class="menu__item is-leaf last leaf"><a href="https://developer.mulesoft.com/champions" class="menu__link">Champions</a></li>
</ul></div>
  </div>
      </div> <!-- header__logo--primary-nav -->
      <div class="header__top-wrapper">
        <div class="header__nav-wrapper">
                      <div class="region region-header-top">
    <div id="block-search-form" class="block block-search first last odd" role="search">

      
  
</div>
  </div>
        </div>
        <div class="top-nav-ctas">
          <a class="icon-muletheme-phone" href="https://mulesoft.com/lp/contact" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-contact');"></a>
          <a href="https://anypoint.mulesoft.com/login/#/signup?apintent=dmc_generic" class="try" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-nav');">Try now</a>
          <a href="https://mulesoft.com/" class="dev" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-mscom');">MuleSoft.com</a>
        </div>
      </div> <!-- header__secondary-nav-search -->
    </div> <!-- header__wrapper -->
    <a href="#sidr" id="open-left" class="closed">
    </a>
  </header><main role="main" class="main-wrapper">
  <div class="navigation-wrapper">
    <nav role="navigation" class="navigation">
      <div class="search">
        <input type="text" placeholder="Search the docs" class="search-input" autocomplete="off" autocorrect="off" autocapitalize="off">
      </div>
      <div class="inner-nav">
      </div>
    </nav>
  </div>
  <article class="primary-content">
    <header class="article-header">
      <div class="breadcrumb">
        <strong class="breadcrumb-item">[ Domain Selector Placeholder ]</strong> /
        <span class="breadcrumb-item">JMX Service</span>
      </div>
      <div class="edit-on-github">
        <a href="https://github.com/ede65566-docs-migration/runtime-manager-agent-docs/edit/v1.7/modules/ROOT/content/jmx-service.adoc" class="edit-on-github-link">Edit on Github</a>
      </div>
    </header>
    <h1>JMX Service</h1>
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><a class="image" href="/runtime-manager/deployment-strategies"><img src="./_images/logo-cloud-disabled.png" alt="logo cloud disabled" title="CloudHub"></a></span>
<span class="image"><a class="image" href="/runtime-manager/deployment-strategies"><img src="./_images/logo-hybrid-active.png" alt="logo hybrid active" title="Hybrid Deployment"></a></span>
<span class="image"><a class="image" href="/runtime-manager/deployment-strategies"><img src="./_images/logo-server-active.png" alt="logo server active" title="Anypoint Platform Private Cloud Edition"></a></span>
<span class="image"><a class="image" href="/runtime-manager/deployment-strategies"><img src="./_images/logo-pcf-disabled.png" alt="logo pcf disabled" title="Pivotal Cloud Foundry"></a></span></p>
</div>
<div class="paragraph">
<p>The Runtime Manager Agent JMX Service allows you to track specific JMX metrics and publish them to external services. The service can be configured to track specific beans and to change the frequency with which it publishes their value.</p>
</div>
<div class="paragraph">
<p>Additionally, MuleSoft provides several open source monitoring publishers as separate agent modules. These are provided as is, and receive no support for MuleSoft. For details, see <a href="#open-source-agent-modules">Open Source Agent Modules</a> below.<br></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jmx-publishers"><a class="anchor" href="#jmx-publishers"></a>JMX Publishers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The JMX service sends all the gathered metrics to publishers, which in turn publish the metrics to external monitoring tools. The service itself provides some example publishers for commonly-used tools; furthermore, you can create your own publisher to suit your specific needs.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-the-jmx-service"><a class="anchor" href="#configuring-the-jmx-service"></a>Configuring the JMX Service</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="operation-retrieve-configuration"><a class="anchor" href="#operation-retrieve-configuration"></a>Operation: Retrieve Configuration</h3>
<div class="paragraph">
<p>Retrieves the JMX service configuration.</p>
</div>
<div class="paragraph">
<p><strong>Request:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>GET &lt;Runtime Manager Agent URL&gt;/mule/agent/mule.agent.jmx.publisher.service HTTP/1.1</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Example:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>GET http://localhost:9999/mule/agent/mule.agent.jmx.publisher.service HTTP/1.1</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Response:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "serviceHandlerTypes": [
        "java.util.List&lt;com.mulesoft.agent.domain.monitoring.Metric&gt;"
    ],
    "injectedHandlers": [
        {
            "name": "com.mulesoft.agent.monitoring.publisher.CloudwatchMonitorPublisher",
            "path": "/mule/agent/cloudwatch.agent.monitor.publisher/configuration",
            "type": "java.util.List&lt;com.mulesoft.agent.domain.monitoring.Metric&gt;"
        },
        {
            "name": "com.mulesoft.agent.monitoring.publisher.GraphiteMonitorPublisher",
            "path": "/mule/agent/mule.agent.graphite.jmx.internal.handler/configuration",
            "type": "java.util.List&lt;com.mulesoft.agent.domain.monitoring.Metric&gt;"
        },
        {
            "name": "com.mulesoft.agent.monitoring.publisher.NagiosMonitorPublisher",
            "path": "/mule/agent/mule.agent.nagios.jmx.internal.handler/configuration",
            "type": "java.util.List&lt;com.mulesoft.agent.domain.monitoring.Metric&gt;"
        },
        {
            "name": "com.mulesoft.agent.monitoring.publisher.ZabbixMonitorPublisher",
            "path": "/mule/agent/mule.agent.zabbix.jmx.internal.handler/configuration",
            "type": "java.util.List&lt;com.mulesoft.agent.domain.monitoring.Metric&gt;"
        }
    ],
    "configurableFields": [
        {
            "name": "frequency",
            "valueType": "java.lang.Integer",
            "value": 15,
            "configurableType": "DYNAMIC"
        },
        {
            "name": "frequencyTimeUnit",
            "valueType": "java.util.concurrent.TimeUnit",
            "value": "MINUTES",
            "configurableType": "DYNAMIC"
        },
        {
            "name": "beans",
            "valueType": "[Lcom.mulesoft.agent.services.monitoring.JMXBean;",
            "value": [],
            "configurableType": "DYNAMIC"
        }
    ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The response contains a list of the publishers currently loaded, as well as the configurable fields of the service and their values (for more information on service configuration, see Administration Service).</p>
</div>
</div>
<div class="sect2">
<h3 id="operation-modify-configuration"><a class="anchor" href="#operation-modify-configuration"></a>Operation: Modify Configuration</h3>
<div class="paragraph">
<p>This operation modifies the current configuration of the service.</p>
</div>
<div class="paragraph">
<p><strong>Request:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">PATCH &lt;Runtime Manager Agent URL&gt;/mule/agent/mule.agent.jmx.publisher.service HTTP/1.1

{
  "&lt;parameter&gt;": "&lt;value&gt;",
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Example:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">PATCH http://localhost:9999/mule/agent/myservice HTTP/1.1

{
  "frequencyTimeUnit": "SECONDS",
  "frequency": "150"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Response (if successful):</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>HTTP 200</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="adding-a-new-jmx-publisher"><a class="anchor" href="#adding-a-new-jmx-publisher"></a>Adding a New JMX Publisher</h3>
<div class="paragraph">
<p>To add a new JMX publisher, you need to implement the Runtime Manager Agent&#8217;s <code>InternalMessageHandler</code> interface.</p>
</div>
<div class="paragraph">
<p>Your custom JMX publisher should meet the following requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It must be thread-safe</p>
</li>
<li>
<p>It must implement all publishing logic in the handle method defined in <code>InternalMessageHandler</code>.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="writing-your-jmx-publisher"><a class="anchor" href="#writing-your-jmx-publisher"></a>Writing Your JMX Publisher</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Named("my.company.jmx.publisher")
@Singleton
public class MyJMXPublisher&lt;T&gt; extends InternalMessageHandler&lt;List&lt;Metric&gt;&gt;{

    boolean handle(List&lt;Metric&gt; metrics){
          // TODO handle message
    }

    @Override
    public void enable(boolean state) throws AgentEnableOperationException {
        // TODO: enable the Handler
    }

    @Override
    public boolean isEnabled() {
        // TODO: return Handler status
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Metric class is a POJO that contains the following fields:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">/**
 * Time stamp when the metric was taken
 */
long timestamp;

/**
 * Name of the metric. In the case of a JXM metric it is the bean that was tracked + message
 */
String name;

/**
 * The numeric value of the metric
 */
Number value;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To add your new JMX publisher, just drop the jar containing your classes under the <code>lib</code> folder within the Runtime Manager Agent plugin.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="open-source-agent-modules"><a class="anchor" href="#open-source-agent-modules"></a>Open Source Agent Modules</h2>
<div class="sectionbody">
<div class="paragraph">
<p>MuleSoft provides several modules for the Runtime Manager Agent, including JMX publishers for Nagios, Zappix and others. These modules are an open source project, and are not supported by MuleSoft.</p>
</div>
<div class="paragraph">
<p>To access the Runtime Manager Agent modules, check the GitHub repositories:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/mulesoft/mule-agent-modules">Agent modules (general)</a></p>
</li>
<li>
<p><a href="https://github.com/mulesoft/mule-agent-modules/tree/release/1.5.1/mule-agent-monitoring-publishers">JMX publisher modules</a></p>
</li>
</ul>
</div>
</div>
</div>
  </article>
</main>
<footer class="footer"><div class="footer__wrapper">
      <div class="footer__top">
              </div>
      <div class="footer-bottom-wrapper">
        <!--<a href="/" title="Home" rel="home" class="header__logo" id="logo"><img src="/sites/all/themes/muletheme/images/mule_logo.svg" alt="Home" class="header__logo-image" /></a>-->
        <div class="connect-footer">
          <p>Sign up for our Dev newsletter</p>
          <div class="connect-footer">

</div>
  </div>
        <div class="terms-conditions temp">
          <div id="block-menu-menu-footer-bottom-menu" class="block block-menu contextual-links-region first last odd" role="navigation">
            <ul class="menu"><li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/" class="menu__link">MuleSoft.com</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://blogs.mulesoft.com/" class="menu__link">Blog</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/content/terms-service" class="menu__link">Terms</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/privacy-policy" class="menu__link">Privacy</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/contact" class="menu__link">Contact</a></li>
            </ul></div>
                    <div class="default-terms-conditions">
          </div>
          MuleSoft provides a widely used <a href="https://www.mulesoft.com/platform/enterprise-integration">integration platform</a> for connecting SaaS and enterprise applications in the cloud and on-premise. Delivered as a unified integration experience, <a href="https://www.mulesoft.com/platform/saas/cloudhub-ipaas-cloud-based-integration">CloudHub&trade;</a> and <a href="https://www.mulesoft.com/platform/soa/mule-esb-open-source-esb">Mule ESB&trade;</a> (Enterprise Service Bus) are built on proven open source technology for fast and reliable on-premise and cloud integration without vendor lock-in.


        </div>
      </div>
      <div class="footer-end">
        <div class="footer-logo-wrapper">
          <a href="https://developer.mulesoft.com/" class="footer-logo"></a>
        </div>
        <ul class="social-links"><li><a href="https://www.mulesoft.com/lp/contact" target="_blank" class="icon-muletheme-phone"></a></li>
          <li><a href="https://www.linkedin.com/company/mulesoft" target="_blank" class="icon-muletheme-linkedin"></a></li>
          <li><a href="https://twitter.com/muledev" target="_blank" class="icon-muletheme-twitter"></a></li>
          <li><a href="https://www.facebook.com/MuleSoft" target="_blank" class="icon-muletheme-facebook"></a></li>
          <li><a href="mailto:info@mulesoft.com" target="_blank" class="icon-muletheme-email"></a></li>
          <li><a href="https://videos.mulesoft.com/" target="_blank" class="icon-muletheme-youtube"></a></li>
        </ul><p class="copyright"><span>&copy;2017</span> MuleSoft, INC.</p>
      </div>
    </div>
    </footer><script src="../../_theme/scripts/menu.js"></script>
<script src="../../_theme/scripts/highlight.pack.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>
