<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="">
  <link rel="canonical" href="https://ede65566-docs-migration.github.io/docs-site/anypoint-connector-devkit/3.4/implementing-datasense-query-language-support.html">
  <link rel="stylesheet" href="../../_theme/stylesheets/theme.css">
  <title>Implementing DataSense Query Language Support // MuleSoft Documentation</title>
</head>
<body class="article">
<header class="header" id="header" role="banner"><div class="header__wrapper clearfix">
      <div class="header__logo--primary-nav clearfix">
        <a href="https://docs.mulesoft.com" title="Home" rel="home" class="header__logo" id="logo">
          <img src="../../_theme/images/mulesoft-dev-logo.svg" alt="Home" class="header__logo-image"></a>
          <div class="header__region region region-header">
    <div id="block-system-main-menu" class="block block-menu first last odd" role="navigation">

        <h2 class="block__title block-title">Main Dev Menu</h2>
    
  <ul class="menu"><li class="menu__item is-expanded first expanded"><span class="menu__link">Platform</span><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="https://developer.mulesoft.com/dev/anypoint-studio" title="" class="menu__link">Studio</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/connectors" title="" class="menu__link">Connectors</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/anypoint-exchange" title="" class="menu__link">Exchange</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/design-api" title="" class="menu__link">API Designer</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/api-developer-portal" title="" class="menu__link">API Portal</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/mule-runtime-engine" title="" class="menu__link">Mule runtime engine</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/dev/api-management" title="" class="menu__link">API Manager</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://developer.mulesoft.com/dev/reporting-api-analytics" title="" class="menu__link">API Analytics</a></li>
</ul></li>
<li class="menu__item is-expanded expanded"><span class="menu__link">Resources</span><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="https://developer.mulesoft.com/getting-started/anypoint-platform" class="menu__link">Getting started</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/tutorials-and-howtos" class="menu__link">Tutorials &amp; HowTos</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/webinars-and-videos" title="" class="menu__link">Webinars &amp; Videos</a></li>
<li class="menu__item is-leaf leaf"><a href="http://s2.developer.mulesoft.com/workshops" class="menu__link">Online Workshops</a></li>
<li class="menu__item is-leaf leaf"><a href="https://developer.mulesoft.com/integration-books-and-resources" class="menu__link">Books &amp; Whitepapers</a></li>
<li class="menu__item is-leaf leaf"><a href="https://blogs.mulesoft.com/dev/" class="menu__link">Blog</a></li>
<li class="menu__item is-leaf leaf"><a href="https://docs.mulesoft.com" class="menu__link">Documentation</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://training.mulesoft.com" class="menu__link">Training</a></li>
</ul></li>
<li class="menu__item is-expanded expanded"><a href="https://developer.mulesoft.com/community" class="menu__link">Community</a><ul class="menu"><li class="menu__item is-leaf first leaf"><a href="http://forum.mulesoft.org/" class="menu__link">Forums</a></li>
<li class="menu__item is-leaf leaf"><a href="https://meetups.mulesoft.com" class="menu__link">Meetups</a></li>
<li class="menu__item is-leaf leaf"><a href="http://s2.developer.mulesoft.com/" class="menu__link">Contributed Content</a></li>
<li class="menu__item is-leaf leaf"><a href="https://s2.developer.mulesoft.com/jobs.html" class="menu__link">Jobs</a></li>
<li class="menu__item is-leaf last leaf"><a href="https://www.mulesoft.org/jira/browse/MULE" class="menu__link">Issue tracker</a></li>
</ul></li>
<li class="menu__item is-leaf last leaf"><a href="https://developer.mulesoft.com/champions" class="menu__link">Champions</a></li>
</ul></div>
  </div>
      </div> <!-- header__logo--primary-nav -->
      <div class="header__top-wrapper">
        <div class="header__nav-wrapper">
                      <div class="region region-header-top">
    <div id="block-search-form" class="block block-search first last odd" role="search">

      
  
</div>
  </div>
        </div>
        <div class="top-nav-ctas">
          <a class="icon-muletheme-phone" href="https://mulesoft.com/lp/contact" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-contact');"></a>
          <a href="https://anypoint.mulesoft.com/login/#/signup?apintent=dmc_generic" class="try" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-nav');">Try now</a>
          <a href="https://mulesoft.com/" class="dev" onclick="ga('send', 'event', 'CTA', 'Click', 'dmc-top-mscom');">MuleSoft.com</a>
        </div>
      </div> <!-- header__secondary-nav-search -->
    </div> <!-- header__wrapper -->
    <a href="#sidr" id="open-left" class="closed">
    </a>
  </header><main role="main" class="main-wrapper">
  <div class="navigation-wrapper">
    <nav role="navigation" class="navigation">
      <div class="search">
        <input type="text" placeholder="Search the docs" class="search-input" autocomplete="off" autocorrect="off" autocapitalize="off">
      </div>
      <div class="inner-nav">
          <ul class="nav-lst">
              <li class="nav-itm" data-depth="0" data-state="collapsed">
                  <button class="nav-tgl"></button>
                <a class="nav-lnk" href="index.html">Anypoint Connector DevKit</a>
                  <ul class="nav-lst">
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="devkit-shortcut-to-success.html">DevKit Shortcut to Success</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="index.html">Anypoint Connector DevKit</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="setting-up-a-devkit-development-environment.html">Setting Up a DevKit Development Environment</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="preparing-api-access-or-a-sandbox-environment.html">Preparing API Access or a Sandbox Environment</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="creating-a-connector-project.html">Creating a Connector Project</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="examining-the-generated-connector-project.html">Examining the Generated Connector Project</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="examining-the-generated-connector-project.html">Examining the Generated Connector Project</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="installing-and-testing-your-connector.html">Installing and Testing Your Connector</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="authentication-and-connection-management.html">Authentication and Connection Management</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="authentication-methods.html">Authentication Methods</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="implementing-connection-management.html">Implementing Connection Management</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="implementing-oauth-1.0-authentication.html">Implementing OAuth 1.0 Authentication</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="implementing-oauth-2.0-authentication.html">Implementing OAuth 2.0 Authentication</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="connector-attributes-operations-and-data-model.html">Connector Attributes Operations and Data Model</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="defining-configurable-connector-attributes.html">Defining Connector Attributes</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="connector-to-java-client-library-example.html">Connector to Java Client Library Example</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="connector-to-soap-service-via-cxf-client-example.html">Connector to a SOAP Service via CXF Client Example</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="connector-to-restful-service-with-jersey-client-example.html">Connector to RESTful Service with Jersey Client Example</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="connector-to-restful-api-with-restcall-annotations-example.html">Connector to RESTful API with <code>@RestCall</code> Annotations Example</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="customizing-connector-integration-with-esb-and-studio.html">Customizing Connector Integration with ESB and Studio</a>
                              </li>
                          </ul>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="developing-devkit-connector-tests.html">Developing DevKit Connector Tests</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="creating-devkit-connector-documentation.html">Creating DevKit Connector Documentation</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="packaging-your-connector-for-release.html">Packaging Your Connector for Release</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                        <a class="nav-lnk" href="devkit-connector-examples.html">DevKit Connector Examples</a>
                      </li>
                      <li class="nav-itm" data-depth="1" data-state="collapsed">
                          <button class="nav-tgl"></button>
                        <a class="nav-lnk" href="devkit-advanced-topics.html">DevKit Advanced Topics</a>
                          <ul class="nav-lst">
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="http-callbacks.html">HTTP Callbacks</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="integrating-connectors-with-the-mule-lifecycle.html">Integrating Connectors with the Mule Lifecycle</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="handling-data-types-for-configurable-properties.html">Handling Data Types for Configurable Properties</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="architectural-considerations-with-connectors-and-the-mule-container.html">Architectural Considerations with Connectors and the Mule Container</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="injecting-mule-managers-into-anypoint-connectors.html">Injecting Mule Managers into Anypoint Connectors</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="supporting-datasense-with-dynamic-data-models.html">Supporting DataSense with Dynamic Data Models</a>
                              </li>
                              <li class="nav-itm" data-depth="2" data-state="collapsed">
                                <a class="nav-lnk" href="implementing-datasense-query-language-support.html">Implementing DataSense Query Language Support</a>
                              </li>
                          </ul>
                      </li>
                  </ul>
              </li>
          </ul>
      </div>
    </nav>
  </div>
  <article class="primary-content">
    <header class="article-header">
      <div class="breadcrumb">
        <strong class="breadcrumb-item">[ Domain Selector Placeholder ]</strong> /
        <span class="breadcrumb-item">Implementing DataSense Query Language Support</span>
      </div>
      <div class="edit-on-github">
        <a href="https://github.com/ede65566-docs-migration/anypoint-connector-devkit-docs/edit/v3.4/modules/ROOT/content/implementing-datasense-query-language-support.adoc" class="edit-on-github-link">Edit on Github</a>
      </div>
    </header>
    <h1>Implementing DataSense Query Language Support</h1>
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Many SaaS applications either implement a proper query language (such as SOQL, Salesforce Object Query Language) or support selecting resources through their API in a way that corresponds to querying. DataSense Query Language (DSQL) provides a uniform query language that can be used to query data in any application with a compatible Anypoint Connector.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assumptions"><a class="anchor" href="#assumptions"></a>Assumptions</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>You have familiarity with Anypoint Connectors, <a href="../../mule-runtime/3.4/mule-datasense.html">Mule DataSense,</a> and <a href="../../anypoint-studio/5/datasense/datasense-query-language.html">DataSense Query Language</a> from a user level.</p>
</li>
<li>
<p>You have experience with implementing a basic connector with <a href="index.html">Anypoint DevKit</a>.</p>
</li>
<li>
<p>You have an understanding of the visitor pattern fundamental to the workings of DSQL-to-native query language translation. Read more:</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://java.dzone.com/articles/design-patterns-visitor">Design Patterns Uncovered: the Visitor Pattern</a></p>
</li>
<li>
<p>Wikipedia&#8217;s <a href="http://en.wikipedia.org/wiki/Visitor_pattern">Visitor pattern</a> article</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dsql-implementation-concepts"><a class="anchor" href="#dsql-implementation-concepts"></a>DSQL Implementation Concepts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Consider the DSQL query from the <a href="../../anypoint-studio/5/datasense/datasense-query-language.html">DataSense Query Language</a> documentation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">SELECT AccountID,FirstName,Lastname FROM Contact WHERE (AccountID &gt; '500' AND IsDeleted = false) OR Employee_Current = false ORDER BY LastName OFFSET 250 LIMIT 1000</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mule uses an internal query model to represent the different semantic elements that make up a query:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 34%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Object</th>
<th class="tableblock halign-left valign-top">Example</th>
<th class="tableblock halign-left valign-top">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Contact</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An object exposed by the application. This is always a List of exactly one Type.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Selected fields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>AccountID, FirstName, LastName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A list of Fields. Each Field represents metadata – field name and datatype.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter expression</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre>WHERE

 (AccountID &gt; '500'

 AND IsDeleted = false)

OR

Employee_Current

= false</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Boolean condition defined over the fields on the object type.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of sort order fields</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre>LastName</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">as in &#8230;&#8203;<code>ORDER BY LastName</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Offset</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre>OFFSET 250</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of items to skip from the beginning of the result set. Used for paging.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Limit</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre>LIMIT 100</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of items to include in the result set. Used for paging.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Similarly, the filter expression is represented internally by a set of field names, data literals, delimiters, operators for comparison and grouping, etc.</p>
</div>
<div class="paragraph">
<p>More details about the query model and accessing it from your code emerge as you build out your new native query language translator that transforms the query model into a query language.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This discussion assumes that the target application supports a native query language. If there is no native query language, there are still techniques for implementing DSQL support. <a href="mailto:connector_team@mulesoft.com">Contact MuleSoft</a> for guidance if you have such a requirement.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="implementing-a-native-query-language-translator"><a class="anchor" href="#implementing-a-native-query-language-translator"></a>Implementing a Native Query Language Translator</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To translate a query from DSQL into native query language for a given connector, the process is as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Parse the DSQL and build a query model that represents the type, fields, filter, order, offset and limit.</p>
</li>
<li>
<p>Traverse the query model elements and generate the desired native query language syntax.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To implement DSQL support for your connector, map the syntax of your target&#8217;s query language to these constructs. Represent that mapping via a set of classes in your connector, thanks to a number of Visitor classes implemented in package <code>org.mule.common.query</code>.</p>
</div>
<div class="sect2">
<h3 id="visitor-classes-and-query-languages"><a class="anchor" href="#visitor-classes-and-query-languages"></a>Visitor Classes and Query Languages</h3>
<div class="paragraph">
<p>A set of visitor classes implements the mapping between query model elements and specific query language syntax – classes that implement the <a href="http://java.dzone.com/articles/design-patterns-visitor">Visitor design pattern</a>, traverse the query model, and generate corresponding statements in the needed native query language.</p>
</div>
<div class="paragraph">
<p>Package <code>org.mule.common.query</code> defines Visitor interfaces that represent different parts of the DSQL query language, then provides default implementations of those Visitors that implement DSQL syntax.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 34%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Visitor Interface</th>
<th class="tableblock halign-left valign-top">Implementation Classes</th>
<th class="tableblock halign-left valign-top">Syntax implemented</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryVisitor</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://github.com/mulesoft/mule-common/tree/3.x/src/main/java/org/mule/common/query/DefaultQueryVisitor.java">DefaultQueryVisitor</a></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/mulesoft/mule-common/blob/c66595981f02fbed7b357d93010c84a0cacf704e/src/main/java/org/mule/common/query/DsqlQueryVisitor.java">DSQLQueryVisitor</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p>"Beginning of an expression"<br>
(i.e. the word "WHERE" before a filter expression)</p>
</li>
<li>
<p>Field lists</p>
</li>
<li>
<p>Types</p>
</li>
<li>
<p>Limit and Offset clauses</p>
</li>
<li>
<p>Precedence operators</p>
</li>
<li>
<p>Order By fields</p>
</li>
<li>
<p>Comparisons</p>
</li>
<li>
<p>Boolean operators</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OperatorVisitor</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://github.com/mulesoft/mule-common/blob/c66595981f02fbed7b357d93010c84a0cacf704e/src/main/java/org/mule/common/query/DefaultOperatorVisitor.java">DefaultOperatorVisitor</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p>Specific comparison operators<br>
(equals, not-equals, greater/less than, LIKE, etc.)</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>To implement support for a new query language, define classes that implement QueryVisitor and OperatorVisitor and use them to construct native query language statements from the query model. You can call your new classes MyAppQueryVisitor and MyAppOperatorVisitor. The following sections describe how to construct them.</p>
</div>
</div>
<div class="sect2">
<h3 id="implementing-an-operator-visitor"><a class="anchor" href="#implementing-an-operator-visitor"></a>Implementing an Operator Visitor</h3>
<div class="paragraph">
<p>Creating a new operator visitor class lets you define the comparison operator syntax (including LIKE) for your native query language.</p>
</div>
<div class="paragraph">
<p>Define a new class in your connector that extends <a href="https://github.com/mulesoft/mule-common/blob/c66595981f02fbed7b357d93010c84a0cacf704e/src/main/java/org/mule/common/query/DefaultOperatorVisitor.java">DefaultOperatorVisitor</a>, which implements all the DSQL comparison operators:</p>
</div>
<div class="paragraph">
<p><strong>Class DefaultOperatorVisitor</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class DefaultOperatorVisitor implements OperatorVisitor {
    public static final String LIKE = " like ";
    public static final String GREATER_OR_EQUALS = " &gt;= ";
    public static final String NOT_EQUALS = " &lt;&gt; ";
    public static final String EQUALS = " = ";
    public static final String LESS_OR_EQUALS = " &lt;= ";
    public static final String GREATER = " &gt; ";
    public static final String LESS = " &lt; ";
    @Override public String lessOperator() {
        return LESS;
    }
    @Override public String greaterOperator() {
        return GREATER;
    }
    @Override public String lessOrEqualsOperator() {
        return LESS_OR_EQUALS;
    }
    @Override public String equalsOperator() {
        return EQUALS;
    }
    @Override public String notEqualsOperator() {
        return NOT_EQUALS;
    }
    @Override public String greaterOrEqualsOperator() {
        return GREATER_OR_EQUALS;
    }
    @Override public String likeOperator() {
        return LIKE;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Most languages will mostly use similar operators. To implement operations in your own language, the shortest path is to create a new class that extends DefaultOperatorVisitor, and then override the methods that return those operators where your language differs from DSQL.</p>
</div>
<div class="paragraph">
<p>For example, in the Salesforce.com connector, class <code>SfdcOperatorVisitor</code> overrides <code>notEqualsOperator():</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.mule.common.query.DefaultOperatorVisitor;


public class SfdcOperatorVisitor extends DefaultOperatorVisitor {
 @Override public java.lang.String notEqualsOperator() {
        return " != ";
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Because the rest of the operators are the same in SOQL and DSQL, there are no other changes.</p>
</div>
</div>
<div class="sect2">
<h3 id="implementing-a-new-query-visitor"><a class="anchor" href="#implementing-a-new-query-visitor"></a>Implementing a New Query Visitor</h3>
<div class="paragraph">
<p>Creating a new query visitor class lets you define the query syntax for expressing the core query model constructs in your native query language.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Define a new class in your connector that extends one of the existing QueryVisitor classes.</p>
<div class="paragraph">
<p>It is usually simplest to extend <a href="https://github.com/mulesoft/mule-common/blob/master/src/main/java/org/mule/common/query/DsqlQueryVisitor.java">DsqlQueryVisitor</a>; at a minimum, extend <a href="https://github.com/mulesoft/mule-common/tree/3.x/src/main/java/org/mule/common/query/DefaultQueryVisitor.java">DefaultQueryVisitor </a>and model your implementation on DsqlQueryVisitor, importing the classes that represent the query model and a couple of utility classes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.mule.common.query.expression.*;
import java.util.Iterator;
import java.util.List;</code></pre>
</div>
</div>
</li>
<li>
<p>DsqlQueryVisitor creates a StringBuilder in its constructor, then traverses the query model elements, building up the query string one function at a time in the StringBuilder:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class DsqlQueryVisitor extends DefaultQueryVisitor {
    private StringBuilder stringBuilder;
    public DsqlQueryVisitor() {
        stringBuilder = new StringBuilder();
    }
    @Override
    public void visitFields(List&lt;Field&gt; fields) {
        StringBuilder select = new StringBuilder();
        select.append("SELECT ");
        Iterator&lt;Field&gt; fieldIterable = fields.iterator();
        while (fieldIterable.hasNext()) {
            String fieldName = addQuotesIfNeeded(fieldIterable.next().getName());
            select.append(fieldName);
            if (fieldIterable.hasNext()) {
                select.append(",");
            }
        }
        stringBuilder.insert(0, select);
    }

    @Override
    public void visitBeginExpression()
    {
        stringBuilder.append(" WHERE ");
    }

    //... other methods omitted for space
}</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Each method adds a clause of the query to the StringBuilder. At the end, one method (not defined in the QueryVisitor interface) returns the built-up query as a String. For example, DsqlQueryVisitor ends with this method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">public String dsqlQuery()
{
        return stringBuilder.toString();
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using-your-query-translator-in-your-code-connector-code-class"><a class="anchor" href="#using-your-query-translator-in-your-code-connector-code-class"></a>Using your Query Translator in your <code>@Connector</code> Class</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In your <code>@Connector</code> class, implement a method annotated with <code>@QueryTranslator</code> that calls the method that returns your query. For example, the Salesforce connector includes this <code>@QueryTranslator</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@QueryTranslator
public String toNativeQuery(DsqlQuery query){
    SfdcQueryVisitor visitor = new SfdcQueryVisitor();
    query.accept(visitor);
    return visitor.dsqlQuery();
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="next-steps"><a class="anchor" href="#next-steps"></a>Next Steps</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Return to the <a href="devkit-advanced-topics.html">DevKit Advanced Topics</a> page</p>
</li>
<li>
<p>Return to the <a href="devkit-shortcut-to-success.html">DevKit Shortcut to Success</a></p>
</li>
</ul>
</div>
</div>
</div>
  </article>
</main>
<footer class="footer"><div class="footer__wrapper">
      <div class="footer__top">
              </div>
      <div class="footer-bottom-wrapper">
        <!--<a href="/" title="Home" rel="home" class="header__logo" id="logo"><img src="/sites/all/themes/muletheme/images/mule_logo.svg" alt="Home" class="header__logo-image" /></a>-->
        <div class="connect-footer">
          <p>Sign up for our Dev newsletter</p>
          <div class="connect-footer">

</div>
  </div>
        <div class="terms-conditions temp">
          <div id="block-menu-menu-footer-bottom-menu" class="block block-menu contextual-links-region first last odd" role="navigation">
            <ul class="menu"><li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/" class="menu__link">MuleSoft.com</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://blogs.mulesoft.com/" class="menu__link">Blog</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/content/terms-service" class="menu__link">Terms</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/privacy-policy" class="menu__link">Privacy</a></li>
              <li class="menu__item is-leaf leaf"><a href="https://www.mulesoft.com/contact" class="menu__link">Contact</a></li>
            </ul></div>
                    <div class="default-terms-conditions">
          </div>
          MuleSoft provides a widely used <a href="https://www.mulesoft.com/platform/enterprise-integration">integration platform</a> for connecting SaaS and enterprise applications in the cloud and on-premise. Delivered as a unified integration experience, <a href="https://www.mulesoft.com/platform/saas/cloudhub-ipaas-cloud-based-integration">CloudHub&trade;</a> and <a href="https://www.mulesoft.com/platform/soa/mule-esb-open-source-esb">Mule ESB&trade;</a> (Enterprise Service Bus) are built on proven open source technology for fast and reliable on-premise and cloud integration without vendor lock-in.


        </div>
      </div>
      <div class="footer-end">
        <div class="footer-logo-wrapper">
          <a href="https://developer.mulesoft.com/" class="footer-logo"></a>
        </div>
        <ul class="social-links"><li><a href="https://www.mulesoft.com/lp/contact" target="_blank" class="icon-muletheme-phone"></a></li>
          <li><a href="https://www.linkedin.com/company/mulesoft" target="_blank" class="icon-muletheme-linkedin"></a></li>
          <li><a href="https://twitter.com/muledev" target="_blank" class="icon-muletheme-twitter"></a></li>
          <li><a href="https://www.facebook.com/MuleSoft" target="_blank" class="icon-muletheme-facebook"></a></li>
          <li><a href="mailto:info@mulesoft.com" target="_blank" class="icon-muletheme-email"></a></li>
          <li><a href="https://videos.mulesoft.com/" target="_blank" class="icon-muletheme-youtube"></a></li>
        </ul><p class="copyright"><span>&copy;2017</span> MuleSoft, INC.</p>
      </div>
    </div>
    </footer><script src="../../_theme/scripts/menu.js"></script>
<script src="../../_theme/scripts/highlight.pack.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>
